import{c as W,r as f,ae as se,j as e,C as Tt,p as Mt,d as nt,an as Pt,ah as _t,Z as At,am as Vt,T as it,X as ke,aK as Ve,f as ot,i as de,U as lt,P as dt,a4 as Et,A as Ye,E as Lt,R as Ft,a as Ot,a8 as Gt,aL as Rt,aM as Bt,aN as Je,y as $t,aO as Ht,az as Ut,ax as Ke,ap as Wt}from"./index-D-msRKty.js";import{T as le}from"./index-Ca_DMGSD.js";import{P as qt,T as Yt,G as Jt,a as Xe,C as Kt}from"./ColumnMenu-B2D-j2UX.js";import{C as ct}from"./copy-BqAQPbPe.js";import{r as Xt}from"./remindersService-5T1yaGYB.js";import{g as Zt}from"./goalsService-CW-tHDGk.js";import{S as Qt}from"./square-check-big-Bhlapl53.js";import{L as es}from"./list-Bg3ntNly.js";import{L as ts}from"./list-ordered-DzOt5jh7.js";import{F as xt}from"./flag-hcacTIoY.js";import{P as ss}from"./phone-CSp6VKZ2.js";import{S as Ze}from"./star-CYQU_OLA.js";import{T as rs}from"./tag-DglP9NUP.js";import{A as as}from"./archive--CB3TGSS.js";/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ns=[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"M20 8h-5",key:"1vsyxs"}],["path",{d:"M15 10V6.5a2.5 2.5 0 0 1 5 0V10",key:"ag13bf"}],["path",{d:"M15 14h5l-5 6h5",key:"ur5jdg"}]],is=W("arrow-down-a-z",ns);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const os=[["path",{d:"M3 19V5",key:"rwsyhb"}],["path",{d:"m13 6-6 6 6 6",key:"1yhaz7"}],["path",{d:"M7 12h14",key:"uoisry"}]],ls=W("arrow-left-to-line",os);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ds=[["path",{d:"M17 12H3",key:"8awo09"}],["path",{d:"m11 18 6-6-6-6",key:"8c2y43"}],["path",{d:"M21 5v14",key:"nzette"}]],cs=W("arrow-right-to-line",ds);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xs=[["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}],["path",{d:"M15 4h5l-5 6h5",key:"8asdl1"}],["path",{d:"M15 20v-3.5a2.5 2.5 0 0 1 5 0V20",key:"r6l5cz"}],["path",{d:"M20 18h-5",key:"18j1r2"}]],us=W("arrow-up-z-a",xs);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ms=[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"m17 12 3-2v8",key:"1hhhft"}]],ps=W("heading-1",ms);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hs=[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M21 18h-4c0-4 4-3 4-6 0-1.5-2-2.5-4-1",key:"9jr5yi"}]],gs=W("heading-2",hs);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fs=[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M17.5 10.5c1.7-1 3.5 0 3.5 1.5a2 2 0 0 1-2 2",key:"68ncm8"}],["path",{d:"M17 17.5c2 1.5 4 .3 4-1.5a2 2 0 0 0-2-2",key:"1ejuhz"}]],ys=W("heading-3",fs);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bs=[["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M17 10v3a1 1 0 0 0 1 1h3",key:"tj5zdr"}],["path",{d:"M21 10v8",key:"1kdml4"}],["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}]],ws=W("heading-4",bs);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const js=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]],ut=W("maximize-2",js);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vs=[["path",{d:"M14 14a2 2 0 0 0 2-2V8h-2",key:"1r06pg"}],["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}],["path",{d:"M8 14a2 2 0 0 0 2-2V8H8",key:"1jzu5j"}]],Ns=W("message-square-quote",vs);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ks=[["path",{d:"M18 8L22 12L18 16",key:"1r0oui"}],["path",{d:"M2 12H22",key:"1m8cig"}]],Qe=W("move-right",ks);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cs=[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]],Ds=W("pin",Cs);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ss=[["path",{d:"M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"rib7q0"}],["path",{d:"M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"1ymkrd"}]],zs=W("quote",Ss);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Is=[["circle",{cx:"9",cy:"12",r:"3",key:"u3jwor"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]],Ts=W("toggle-left",Is);var _=(x=>(x.New="New",x.Pending="Pending",x.Working="Working on it",x.Stuck="Stuck",x.AlmostFinish="Almost Finish",x.Done="Done",x))(_||{}),re=(x=>(x.Normal="Normal",x.Low="Low",x.Medium="Medium",x.High="High",x.Urgent="Urgent",x))(re||{});const Ee={New:"bg-gradient-to-r from-[#A0A5B9] to-[#8D92A6] text-white shadow-sm",Pending:"bg-gradient-to-r from-[#FFD940] to-[#FFCC00] text-white shadow-sm","Working on it":"bg-gradient-to-r from-[#FFBE66] to-[#FFA533] hover:from-[#FFA533] hover:to-[#FF991F] text-white shadow-sm",Stuck:"bg-gradient-to-r from-[#FF7085] to-[#FF526B] hover:from-[#FF526B] hover:to-[#FF3352] text-white shadow-sm","Almost Finish":"bg-gradient-to-r from-[#C48AF0] to-[#B06CE0] text-white shadow-sm",Done:"bg-gradient-to-r from-[#33D995] to-[#00C875] hover:from-[#00C875] hover:to-[#00B067] text-white shadow-sm"},je={Normal:"bg-gradient-to-r from-[#D9D9D9] to-[#C4C4C4] text-white shadow-sm",Low:"bg-gradient-to-r from-[#82B4FF] to-[#579BFC] text-white shadow-sm",Medium:"bg-gradient-to-r from-[#FFBE66] to-[#FFA533] text-white shadow-sm",High:"bg-gradient-to-r from-[#7048C4] to-[#552CB0] text-white shadow-sm",Urgent:"bg-gradient-to-r from-[#FF7085] to-[#FF526B] text-white shadow-sm"},Ne=["#3B82F6","#10B981","#F59E0B","#EC4899","#8B5CF6","#0EA5E9","#7C3AED"],et=[{id:"p1",name:"Max",initials:"MA",color:"bg-gradient-to-br from-blue-400 to-blue-600"},{id:"p2",name:"Hasan",initials:"HA",color:"bg-gradient-to-br from-emerald-400 to-emerald-600"},{id:"p3",name:"Sarah",initials:"SA",color:"bg-gradient-to-br from-purple-400 to-purple-600"},{id:"p4",name:"John",initials:"JO",color:"bg-gradient-to-br from-amber-400 to-amber-600"}],_e={id:"board-1",name:"Task Board",groups:[{id:"group-1",title:"New Group",color:"#579bfc",columns:[{id:"col_name",title:"Item",type:"name",width:"300px"},{id:"col_person",title:"Owner",type:"person",width:"96px"},{id:"col_status",title:"Status",type:"status",width:"128px"},{id:"col_priority",title:"Priority",type:"priority",width:"128px"},{id:"col_date",title:"Due Date",type:"date",width:"110px"}],tasks:[]}]};le.OBJECT,le.ARRAY,le.OBJECT,le.STRING,le.STRING,le.INTEGER,le.STRING;const Ms=async x=>(console.warn("Gemini API key is missing. AI features are disabled."),null),Ps=async x=>"AI features are disabled (missing API key).",_s=x=>{const[v,l]=f.useState(()=>{try{if(typeof window<"u"){const u=localStorage.getItem(x);if(u){const o=JSON.parse(u);if(o.columns&&Array.isArray(o.columns)&&o.groups){const g=o.groups.map(c=>({...c,columns:c.columns||[...o.columns]}));return{...o,groups:g}}if(o.groups&&Array.isArray(o.groups)){const g=o.groups.map(c=>c.columns&&Array.isArray(c.columns)?c:{...c,columns:[{id:"col_name",title:"Item",type:"name",width:"300px"},{id:"col_person",title:"Owner",type:"person",width:"96px"},{id:"col_status",title:"Status",type:"status",width:"128px"},{id:"col_priority",title:"Priority",type:"priority",width:"128px"},{id:"col_date",title:"Due Date",type:"date",width:"110px"}]});return{...o,groups:g}}}}}catch(u){console.warn("Failed to load saved board",u)}return _e}),[m,y]=f.useState(""),[C,z]=f.useState(!1),[b,n]=f.useState(null);f.useEffect(()=>{try{if(typeof window<"u"){const u=localStorage.getItem(x);if(u){const o=JSON.parse(u);if(o.columns&&Array.isArray(o.columns)&&o.groups){const g=o.groups.map(c=>({...c,columns:c.columns||[...o.columns]}));l({...o,groups:g});return}if(o.groups&&Array.isArray(o.groups)){const g=o.groups.map(c=>c.columns&&Array.isArray(c.columns)?c:{...c,columns:[{id:"col_name",title:"Item",type:"name",width:"300px"},{id:"col_person",title:"Owner",type:"person",width:"96px"},{id:"col_status",title:"Status",type:"status",width:"128px"},{id:"col_priority",title:"Priority",type:"priority",width:"128px"},{id:"col_date",title:"Due Date",type:"date",width:"110px"}]});l({...o,groups:g});return}l(o)}else l(_e)}}catch(u){console.warn("Failed to load saved board on key change",u),l(_e)}},[x]),f.useEffect(()=>{try{localStorage.setItem(x,JSON.stringify(v))}catch(u){console.warn("Failed to save board",u)}},[v,x]);const a=(u,o,g)=>{l(c=>({...c,groups:c.groups.map(w=>w.id!==u?w:{...w,tasks:w.tasks.map(I=>I.id===o?{...I,...g}:I)})}))},S=(u,o,g)=>{a(u,o,{selected:g})},B=(u,o)=>{l(g=>({...g,groups:g.groups.map(c=>u!=="all"&&c.id!==u?c:{...c,tasks:c.tasks.map(w=>({...w,selected:o}))})}))},V=(u,o,g,c)=>{l(w=>({...w,groups:w.groups.map(I=>I.id!==u?I:{...I,tasks:I.tasks.map(X=>X.id!==o?X:{...X,textValues:{...X.textValues,[g]:c}})})}))},T=(u,o,g)=>{const c={id:se(),name:(o==null?void 0:o.trim())||"New Item",status:_.New,priority:re.Normal,dueDate:new Date().toISOString().split("T")[0],personId:null,textValues:{},selected:!1,...g};l(w=>({...w,groups:w.groups.map(I=>I.id===u?{...I,tasks:[...I.tasks,c]}:I)}))},M=(u,o)=>{l(g=>({...g,groups:g.groups.map(c=>c.id===u?{...c,tasks:c.tasks.filter(w=>w.id!==o)}:c)}))},N=()=>{const u={id:se(),title:"New Group",color:Ne[v.groups.length%Ne.length],columns:[{id:"col_name",title:"Item",type:"name",width:"300px"},{id:"col_person",title:"Owner",type:"person",width:"96px"},{id:"col_status",title:"Status",type:"status",width:"128px"},{id:"col_priority",title:"Priority",type:"priority",width:"128px"},{id:"col_date",title:"Due Date",type:"date",width:"110px"}],tasks:[]};l(o=>({...o,groups:[...o.groups,u]}))},U=u=>{l(o=>({...o,groups:o.groups.filter(g=>g.id!==u)}))},F=(u,o)=>{l(g=>({...g,groups:g.groups.map(c=>c.id===u?{...c,title:o}:c)}))},P=u=>{l(o=>({...o,groups:o.groups.map(g=>g.id===u?{...g,isPinned:!g.isPinned}:g)}))},E=(u,o="text",g="New Column",c,w)=>{const X={id:`col_${se().slice(0,4)}`,title:g,type:o,width:"140px",options:c,currency:w};l(H=>({...H,groups:H.groups.map(q=>q.id===u?{...q,columns:[...q.columns,X]}:q)}))},te=(u,o,g)=>{l(c=>({...c,groups:c.groups.map(w=>w.id!==u?w:{...w,columns:w.columns.map(I=>I.id===o?{...I,title:g}:I)})}))},Q=(u,o,g)=>{l(c=>({...c,groups:c.groups.map(w=>w.id!==u?w:{...w,columns:w.columns.map(I=>I.id===o?{...I,width:`${g}px`}:I)})}))},ue=(u,o)=>{l(g=>({...g,groups:g.groups.map(c=>c.id!==u?c:{...c,columns:c.columns.filter(w=>w.id!==o)})}))},ce=(u,o)=>{l(g=>({...g,groups:g.groups.map(c=>{if(c.id!==u)return c;const w=c.columns.findIndex(q=>q.id===o);if(w===-1)return c;const I=c.columns[w],X={...I,id:`col_${se().slice(0,4)}`,title:`${I.title} (Copy)`},H=[...c.columns];return H.splice(w+1,0,X),{...c,columns:H}})}))},xe=(u,o,g)=>{l(c=>{const w=c.groups.find(H=>H.id===u);if(!w)return c;const I=[...w.columns],[X]=I.splice(o,1);return I.splice(g,0,X),{...c,groups:c.groups.map(H=>H.id!==u?H:{...H,columns:I})}})};return{board:v,setBoard:l,aiPrompt:m,setAiPrompt:y,isAiLoading:C,aiAnalysis:b,setAiAnalysis:n,updateTask:a,toggleTaskSelection:S,toggleGroupSelection:B,updateTaskTextValue:V,addTask:T,deleteTask:M,addGroup:N,deleteGroup:U,updateGroupTitle:F,toggleGroupPin:P,addColumn:E,updateColumnTitle:te,updateColumnWidth:Q,deleteColumn:ue,duplicateColumn:ce,moveColumn:xe,reorderColumn:(u,o,g)=>{xe(u,o,g)},handleGeneratePlan:async()=>{if(!m.trim())return;z(!0),n(null);const u=await Ms();if(u){const o=new Date,g=u.tasks.map(w=>{const I=new Date(o);return I.setDate(o.getDate()+w.dueDateOffsetDays),{id:se(),name:w.name,status:_.New,priority:w.priority||re.Medium,dueDate:I.toISOString().split("T")[0],personId:null,textValues:{}}}),c={id:se(),title:u.groupName||"AI Generated Plan",color:Ne[Math.floor(Math.random()*Ne.length)],tasks:g,columns:[{id:"col_name",title:"Item",type:"name",width:"300px"},{id:"col_person",title:"Owner",type:"person",width:"96px"},{id:"col_status",title:"Status",type:"status",width:"128px"},{id:"col_priority",title:"Priority",type:"priority",width:"128px"},{id:"col_date",title:"Due Date",type:"date",width:"110px"}]};l(w=>({...w,groups:[c,...w.groups]})),y("")}z(!1)},handleAnalyzeBoard:async()=>{z(!0),v.groups.map(o=>`Group: ${o.title}. Tasks: ${o.tasks.map(g=>`${g.name} (${g.status})`).join(", ")}`).join(`
`);const u=await Ps();n(u),z(!1)}}},As=({date:x,onSelect:v,onClose:l})=>{const[m,y]=f.useState(new Date),[C,z]=f.useState(x?new Date(x):null);f.useEffect(()=>{if(x){const M=new Date(x);z(M),y(M)}},[x]);const b=(M,N)=>new Date(M,N+1,0).getDate(),n=(M,N)=>new Date(M,N,1).getDay(),a=()=>{const M=m.getFullYear(),N=m.getMonth(),U=b(M,N),F=n(M,N),P=[];for(let E=0;E<F;E++)P.push(e.jsx("div",{className:"w-8 h-8"},`empty-${E}`));for(let E=1;E<=U;E++){const te=new Date(M,N,E),Q=C&&te.toDateString()===C.toDateString(),ue=new Date().toDateString()===te.toDateString();P.push(e.jsx("button",{onClick:()=>{const ce=new Date(M,N,E),xe=ce.getTimezoneOffset(),me=new Date(ce.getTime()-xe*60*1e3);v(me.toISOString().split("T")[0]),l()},className:`w-8 h-8 text-xs rounded-full flex items-center justify-center transition-all
                        ${Q?"bg-red-500 text-white font-bold shadow-md":"text-gray-700 hover:bg-gray-100"}
                        ${ue&&!Q?"text-red-500 font-bold":""}
                    `,children:E},E))}return P},S=()=>{y(new Date(m.getFullYear(),m.getMonth()+1,1))},B=()=>{y(new Date(m.getFullYear(),m.getMonth()-1,1))},V=M=>{const N=new Date;N.setDate(N.getDate()+M);const U=N.getTimezoneOffset(),F=new Date(N.getTime()-U*60*1e3);v(F.toISOString().split("T")[0]),l()},T=[{label:"Today",days:0,sub:"Sun"},{label:"Later",days:7,sub:"8:53 pm"},{label:"Tomorrow",days:1,sub:"Mon"},{label:"Next week",days:7,sub:"Mon"},{label:"Next weekend",days:6,sub:"Sat"},{label:"2 weeks",days:14,sub:"14 Dec"},{label:"4 weeks",days:28,sub:"28 Dec"},{label:"8 weeks",days:56,sub:"25 Jan"}];return e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl border border-gray-200 flex overflow-hidden w-[500px] animate-in fade-in zoom-in-95 duration-200",children:[e.jsxs("div",{className:"w-48 bg-gray-50/50 border-r border-gray-100 p-2 flex flex-col gap-1",children:[e.jsxs("div",{className:"px-3 py-2 mb-2 border-b border-gray-100",children:[e.jsxs("div",{className:"flex items-center text-gray-400 text-xs font-medium mb-1",children:[e.jsx(Tt,{size:12,className:"mr-2"}),e.jsx("span",{children:"Date"})]}),e.jsx("div",{className:"text-sm font-bold text-gray-800",children:C?C.toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"}):"Set Date"})]}),e.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar",children:T.map((M,N)=>e.jsxs("button",{onClick:()=>V(M.days),className:"w-full flex items-center justify-between px-3 py-2 hover:bg-gray-100 rounded-lg transition-colors group text-left",children:[e.jsx("span",{className:"text-sm text-gray-700 font-medium group-hover:text-gray-900",children:M.label}),e.jsx("span",{className:"text-xs text-gray-400 group-hover:text-gray-500",children:M.sub})]},N))})]}),e.jsxs("div",{className:"flex-1 p-4 bg-white",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-bold text-gray-900",children:m.toLocaleDateString(void 0,{month:"long",year:"numeric"})}),e.jsx("span",{className:"text-xs text-gray-400 font-medium cursor-pointer hover:text-gray-600",children:"Today"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:B,className:"p-1 hover:bg-gray-100 rounded-full text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(Mt,{size:16})}),e.jsx("button",{onClick:S,className:"p-1 hover:bg-gray-100 rounded-full text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(nt,{size:16})})]})]}),e.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:["Su","Mo","Tu","We","Th","Fr","Sa"].map(M=>e.jsx("div",{className:"text-center text-xs font-medium text-gray-400 py-1",children:M},M))}),e.jsx("div",{className:"grid grid-cols-7 gap-1",children:a()}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-100 flex justify-between items-center",children:[e.jsx("button",{onClick:()=>{v(""),l()},className:"text-xs text-gray-400 hover:text-red-500 font-medium transition-colors",children:"Clear"}),e.jsx("button",{onClick:l,className:"px-3 py-1 bg-black text-white text-xs font-bold rounded-md hover:bg-gray-800 transition-colors",children:"Done"})]})]})]})},Vs=({x,y:v,onClose:l,onAction:m})=>{let z=x,b=v;typeof window<"u"&&(x+256>window.innerWidth&&(z=x-256),v+400>window.innerHeight&&(b=v-400));const n={top:b,left:z},a=S=>{m(S),l()};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-50 bg-transparent",onClick:l,onContextMenu:S=>{S.preventDefault(),l()}}),e.jsx("div",{className:"fixed z-50 bg-white rounded-lg shadow-xl border border-gray-200 w-64 py-2 animate-in fade-in zoom-in-95 duration-100",style:n,onClick:S=>S.stopPropagation(),children:e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("button",{onClick:()=>a("sort_asc"),className:"flex items-center px-4 py-2 hover:bg-gray-50 text-sm text-gray-700 gap-3",children:[e.jsx(is,{size:16,className:"text-gray-500"}),e.jsx("span",{children:"Sort ascending"})]}),e.jsxs("button",{onClick:()=>a("sort_desc"),className:"flex items-center px-4 py-2 hover:bg-gray-50 text-sm text-gray-700 gap-3",children:[e.jsx(us,{size:16,className:"text-gray-500"}),e.jsx("span",{children:"Sort descending"})]}),e.jsxs("button",{onClick:()=>a("group"),className:"flex items-center px-4 py-2 hover:bg-gray-50 text-sm text-gray-700 gap-3",children:[e.jsx(Pt,{size:16,className:"text-gray-500"}),e.jsx("span",{children:"Group by this field"})]}),e.jsx("div",{className:"h-px bg-gray-100 my-1"}),e.jsxs("button",{onClick:()=>a("rename"),className:"flex items-center px-4 py-2 hover:bg-gray-50 text-sm text-gray-700 gap-3",children:[e.jsx(qt,{size:16,className:"text-gray-500"}),e.jsx("span",{children:"Edit field"})]}),e.jsxs("button",{onClick:()=>a("permissions"),className:"flex items-center px-4 py-2 hover:bg-gray-50 text-sm text-gray-700 gap-3",children:[e.jsx(_t,{size:16,className:"text-gray-500"}),e.jsx("span",{children:"Privacy and permissions"})]}),e.jsx("div",{className:"h-px bg-gray-100 my-1"}),e.jsxs("button",{onClick:()=>a("move_start"),className:"flex items-center px-4 py-2 hover:bg-gray-50 text-sm text-gray-700 gap-3",children:[e.jsx(ls,{size:16,className:"text-gray-500"}),e.jsx("span",{children:"Move to start"})]}),e.jsxs("button",{onClick:()=>a("move_end"),className:"flex items-center px-4 py-2 hover:bg-gray-50 text-sm text-gray-700 gap-3",children:[e.jsx(cs,{size:16,className:"text-gray-500"}),e.jsx("span",{children:"Move to end"})]}),e.jsxs("button",{onClick:()=>a("automate"),className:"flex items-center px-4 py-2 hover:bg-gray-50 text-sm text-gray-700 gap-3",children:[e.jsx(At,{size:16,className:"text-gray-500"}),e.jsx("span",{children:"Automate"})]}),e.jsx("div",{className:"h-px bg-gray-100 my-1"}),e.jsxs("button",{onClick:()=>a("hide"),className:"flex items-center px-4 py-2 hover:bg-gray-50 text-sm text-gray-700 gap-3",children:[e.jsx(Vt,{size:16,className:"text-gray-500"}),e.jsx("span",{children:"Hide column"})]}),e.jsxs("button",{onClick:()=>a("duplicate"),className:"flex items-center px-4 py-2 hover:bg-gray-50 text-sm text-gray-700 gap-3",children:[e.jsx(ct,{size:16,className:"text-gray-500"}),e.jsx("span",{children:"Duplicate"})]}),e.jsxs("button",{onClick:()=>a("delete"),className:"flex items-center px-4 py-2 hover:bg-red-50 text-sm text-red-600 gap-3",children:[e.jsx(it,{size:16,className:"text-red-500"}),e.jsx("span",{children:"Delete field"})]})]})})]})},Es=({isOpen:x,onClose:v,group:l})=>{const[m,y]=f.useState(new Set);if(!x)return null;const C=n=>{const a=new Set(m);a.has(n)?a.delete(n):a.add(n),y(a)},z=()=>{const n=l.tasks.filter(a=>m.has(a.id));n.length!==0&&(Xt.addReminder({title:l.title||"Untitled Group",listId:"inbox",priority:"medium",dueDate:void 0,tags:[],completed:!1,subtasks:n.map(a=>({id:se(),title:a.textValues.col_name||a.name||"Untitled Task",completed:a.status==="Done"}))}),v(),y(new Set))},b=()=>{m.size===l.tasks.length?y(new Set):y(new Set(l.tasks.map(n=>n.id)))};return e.jsx("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center bg-black/40 backdrop-blur-sm animate-in fade-in duration-300",children:e.jsxs("div",{className:"bg-white/95 backdrop-blur-xl rounded-2xl shadow-2xl w-full max-w-2xl overflow-hidden animate-in zoom-in-95 duration-300 border border-white/20 ring-1 ring-black/5 flex flex-col max-h-[85vh]",children:[e.jsxs("div",{className:"px-6 py-5 border-b border-gray-100 flex items-center justify-between bg-gradient-to-r from-gray-50/50 to-white",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 tracking-tight",children:"Send to Reminders"}),e.jsxs("p",{className:"text-sm text-gray-500 mt-0.5",children:["Select tasks from ",e.jsx("span",{className:"font-semibold text-gray-700",children:l.title})]})]}),e.jsx("button",{onClick:v,className:"p-2 hover:bg-gray-100 rounded-full transition-all duration-200 text-gray-400 hover:text-gray-600 active:scale-95",children:e.jsx(ke,{size:20})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-0",children:l.tasks.length===0?e.jsxs("div",{className:"text-center py-16 text-gray-400 flex flex-col items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-gray-50 flex items-center justify-center",children:e.jsx(Ve,{size:24,className:"text-gray-300"})}),e.jsx("p",{className:"font-medium",children:"No tasks in this group"})]}):e.jsxs("table",{className:"w-full text-left border-collapse",children:[e.jsx("thead",{className:"bg-gray-50/80 backdrop-blur-md sticky top-0 z-10 shadow-sm",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3.5 border-b border-gray-200/80 w-[50px]",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("input",{type:"checkbox",checked:m.size===l.tasks.length&&l.tasks.length>0,onChange:b,className:"rounded-md border-gray-300 text-indigo-600 focus:ring-indigo-500/20 transition-all cursor-pointer"})})}),e.jsx("th",{className:"px-4 py-3.5 text-xs font-bold text-gray-500 uppercase tracking-wider border-b border-gray-200/80",children:"Task Name"}),e.jsx("th",{className:"px-4 py-3.5 text-xs font-bold text-gray-500 uppercase tracking-wider border-b border-gray-200/80 text-center w-[120px]",children:"Priority"}),e.jsx("th",{className:"px-4 py-3.5 text-xs font-bold text-gray-500 uppercase tracking-wider border-b border-gray-200/80 w-[140px]",children:"Due Date"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:l.tasks.map(n=>{const a=m.has(n.id),S=n.textValues.col_name||n.name||"Untitled Task";return e.jsxs("tr",{onClick:()=>C(n.id),className:`cursor-pointer transition-all duration-200 group ${a?"bg-indigo-50/60":"hover:bg-gray-50/80"}`,children:[e.jsx("td",{className:"px-6 py-3.5 w-[50px]",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("input",{type:"checkbox",checked:a,onChange:()=>C(n.id),onClick:B=>B.stopPropagation(),className:"rounded-md border-gray-300 text-indigo-600 focus:ring-indigo-500/20 transition-all cursor-pointer"})})}),e.jsx("td",{className:"px-4 py-3.5",children:e.jsx("span",{className:`text-sm font-medium truncate block max-w-[320px] transition-colors ${a?"text-indigo-900":"text-gray-700 group-hover:text-gray-900"}`,children:S})}),e.jsx("td",{className:"px-4 py-3.5 text-center w-[120px]",children:e.jsx("div",{className:"flex justify-center transform transition-transform group-hover:scale-105",children:e.jsx("span",{className:`text-[11px] px-2.5 py-1 rounded-full text-white font-semibold shadow-sm tracking-wide ${je[n.priority]||"bg-gray-400"}`,children:n.priority})})}),e.jsx("td",{className:"px-4 py-3.5 w-[140px]",children:e.jsx("span",{className:`text-sm font-mono transition-colors ${n.dueDate?"text-gray-600":"text-gray-300"}`,children:n.dueDate||"-"})})]},n.id)})})]})}),e.jsxs("div",{className:"px-6 py-4 border-t border-gray-100 bg-gray-50/50 backdrop-blur-sm flex justify-end gap-3",children:[e.jsx("button",{onClick:v,className:"px-5 py-2.5 text-sm font-medium text-gray-600 hover:text-gray-900 hover:bg-gray-200/50 rounded-xl transition-all duration-200 active:scale-95",children:"Cancel"}),e.jsxs("button",{onClick:z,disabled:m.size===0,className:"px-6 py-2.5 text-sm font-semibold text-white bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 active:scale-95 rounded-xl shadow-lg shadow-blue-500/25 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed disabled:shadow-none flex items-center gap-2",children:[e.jsx(Ve,{size:16,strokeWidth:2.5}),e.jsx("span",{children:"Send Tasks"}),m.size>0&&e.jsx("span",{className:"bg-white/20 px-1.5 py-0.5 rounded text-xs font-bold ml-1",children:m.size})]})]})]})})},Ls=({isOpen:x,onClose:v,group:l})=>{const[m,y]=f.useState(new Set);if(!x)return null;const C=n=>{const a=new Set(m);a.has(n)?a.delete(n):a.add(n),y(a)},z=()=>{const n=l.tasks.filter(a=>m.has(a.id));n.length!==0&&(Zt.addObjective({title:l.title||"Untitled Objective",progress:0,status:"on-track",expanded:!0,keyResults:n.map(a=>({id:se(),title:a.textValues.col_name||a.name||"Untitled Key Result",current:a.status==="Done"?100:0,target:100,unit:"%",confidence:"medium",owner:"Unassigned"}))}),v(),y(new Set))},b=()=>{m.size===l.tasks.length?y(new Set):y(new Set(l.tasks.map(n=>n.id)))};return e.jsx("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center bg-black/40 backdrop-blur-sm animate-in fade-in duration-300",children:e.jsxs("div",{className:"bg-white/95 backdrop-blur-xl rounded-2xl shadow-2xl w-full max-w-2xl overflow-hidden animate-in zoom-in-95 duration-300 border border-white/20 ring-1 ring-black/5 flex flex-col max-h-[85vh]",children:[e.jsxs("div",{className:"px-6 py-5 border-b border-gray-100 flex items-center justify-between bg-gradient-to-r from-gray-50/50 to-white",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 tracking-tight",children:"Send to Goals"}),e.jsxs("p",{className:"text-sm text-gray-500 mt-0.5",children:["Select tasks from ",e.jsx("span",{className:"font-semibold text-gray-700",children:l.title})]})]}),e.jsx("button",{onClick:v,className:"p-2 hover:bg-gray-100 rounded-full transition-all duration-200 text-gray-400 hover:text-gray-600 active:scale-95",children:e.jsx(ke,{size:20})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-0",children:l.tasks.length===0?e.jsxs("div",{className:"text-center py-16 text-gray-400 flex flex-col items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-gray-50 flex items-center justify-center",children:e.jsx(Ve,{size:24,className:"text-gray-300"})}),e.jsx("p",{className:"font-medium",children:"No tasks in this group"})]}):e.jsxs("table",{className:"w-full text-left border-collapse",children:[e.jsx("thead",{className:"bg-gray-50/80 backdrop-blur-md sticky top-0 z-10 shadow-sm",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3.5 border-b border-gray-200/80 w-[50px]",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("input",{type:"checkbox",checked:m.size===l.tasks.length&&l.tasks.length>0,onChange:b,className:"rounded-md border-gray-300 text-indigo-600 focus:ring-indigo-500/20 transition-all cursor-pointer"})})}),e.jsx("th",{className:"px-4 py-3.5 text-xs font-bold text-gray-500 uppercase tracking-wider border-b border-gray-200/80",children:"Task Name"}),e.jsx("th",{className:"px-4 py-3.5 text-xs font-bold text-gray-500 uppercase tracking-wider border-b border-gray-200/80 text-center w-[120px]",children:"Priority"}),e.jsx("th",{className:"px-4 py-3.5 text-xs font-bold text-gray-500 uppercase tracking-wider border-b border-gray-200/80 w-[140px]",children:"Due Date"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:l.tasks.map(n=>{const a=m.has(n.id),S=n.textValues.col_name||n.name||"Untitled Task";return e.jsxs("tr",{onClick:()=>C(n.id),className:`cursor-pointer transition-all duration-200 group ${a?"bg-indigo-50/60":"hover:bg-gray-50/80"}`,children:[e.jsx("td",{className:"px-6 py-3.5 w-[50px]",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("input",{type:"checkbox",checked:a,onChange:()=>C(n.id),onClick:B=>B.stopPropagation(),className:"rounded-md border-gray-300 text-indigo-600 focus:ring-indigo-500/20 transition-all cursor-pointer"})})}),e.jsx("td",{className:"px-4 py-3.5",children:e.jsx("span",{className:`text-sm font-medium truncate block max-w-[320px] transition-colors ${a?"text-indigo-900":"text-gray-700 group-hover:text-gray-900"}`,children:S})}),e.jsx("td",{className:"px-4 py-3.5 text-center w-[120px]",children:e.jsx("div",{className:"flex justify-center transform transition-transform group-hover:scale-105",children:e.jsx("span",{className:`text-[11px] px-2.5 py-1 rounded-full text-white font-semibold shadow-sm tracking-wide ${je[n.priority]||"bg-gray-400"}`,children:n.priority})})}),e.jsx("td",{className:"px-4 py-3.5 w-[140px]",children:e.jsx("span",{className:`text-sm font-mono transition-colors ${n.dueDate?"text-gray-600":"text-gray-300"}`,children:n.dueDate||"-"})})]},n.id)})})]})}),e.jsxs("div",{className:"px-6 py-4 border-t border-gray-100 bg-gray-50/50 backdrop-blur-sm flex justify-end gap-3",children:[e.jsx("button",{onClick:v,className:"px-5 py-2.5 text-sm font-medium text-gray-600 hover:text-gray-900 hover:bg-gray-200/50 rounded-xl transition-all duration-200 active:scale-95",children:"Cancel"}),e.jsxs("button",{onClick:z,disabled:m.size===0,className:"px-6 py-2.5 text-sm font-semibold text-white bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 active:scale-95 rounded-xl shadow-lg shadow-blue-500/25 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed disabled:shadow-none flex items-center gap-2",children:[e.jsx(ot,{size:16,strokeWidth:2.5}),e.jsx("span",{children:"Send to Goals"}),m.size>0&&e.jsx("span",{className:"bg-white/20 px-1.5 py-0.5 rounded text-xs font-bold ml-1",children:m.size})]})]})]})})},tt=({status:x,onChange:v,tabIndex:l})=>{const[m,y]=f.useState(!1),[C,z]=f.useState({top:0,left:0,width:0}),b=n=>{n.stopPropagation();const a=n.currentTarget.getBoundingClientRect(),S=250,V=window.innerHeight-a.bottom<S;z({top:V?a.top+window.scrollY-S-4:a.bottom+window.scrollY+4,left:a.left+window.scrollX,width:a.width}),y(!m)};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"relative w-full h-full",children:e.jsxs("div",{onClick:b,onKeyDown:n=>{(n.key==="Enter"||n.key===" ")&&(n.preventDefault(),b(n))},tabIndex:l,className:"w-full h-full flex items-center justify-center cursor-pointer transition-all duration-200 text-xs font-medium text-white relative group focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-inset rounded-sm "+(Ee[x]||"bg-gray-100 text-gray-400"),children:[e.jsx("div",{className:"absolute right-0 bottom-0 w-3 h-3 bg-black/10 opacity-0 group-hover:opacity-100 clip-triangle transition-opacity"}),e.jsx("span",{className:"truncate px-1",children:x||e.jsx("span",{className:"opacity-0 group-hover:opacity-100 text-[10px] uppercase",children:"Set Status"})})]})}),m&&de.createPortal(e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-40 bg-transparent",onClick:()=>y(!1)}),e.jsx("div",{className:"fixed z-50 bg-white shadow-2xl rounded-lg border border-gray-200 p-1.5 overflow-hidden animate-in fade-in zoom-in-95 duration-100 flex flex-col gap-1",style:{top:C.top+4,left:C.left-(160-C.width)/2,width:"160px"},children:Object.values(_).map(n=>e.jsx("div",{onClick:()=>{v(n),y(!1)},className:"px-3 py-2.5 text-xs cursor-pointer hover:brightness-95 rounded-sm text-center font-medium transition-all shadow-sm "+(Ee[n]||"bg-gray-100 text-gray-600"),children:n||"Empty"},n))})]}),document.body)]})},st=({priority:x,onChange:v,tabIndex:l})=>{const[m,y]=f.useState(!1),[C,z]=f.useState({top:0,left:0,width:0}),b=n=>{n.stopPropagation();const a=n.currentTarget.getBoundingClientRect(),S=200,V=window.innerHeight-a.bottom<S;z({top:V?a.top+window.scrollY-S-4:a.bottom+window.scrollY+4,left:a.left+window.scrollX,width:a.width}),y(!m)};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"relative w-full h-full",children:e.jsxs("div",{onClick:b,onKeyDown:n=>{(n.key==="Enter"||n.key===" ")&&(n.preventDefault(),b(n))},tabIndex:l,className:"w-full h-full flex items-center justify-center cursor-pointer transition-all duration-200 text-xs font-medium relative group focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-inset rounded-sm "+(je[x]||"bg-gray-100 text-gray-400"),children:[e.jsx("div",{className:"absolute right-0 bottom-0 w-3 h-3 bg-black/10 opacity-0 group-hover:opacity-100 clip-triangle transition-opacity"}),e.jsx("span",{className:"truncate px-1",children:x||e.jsx("span",{className:"opacity-0 group-hover:opacity-100 text-[10px] uppercase",children:"Set"})})]})}),m&&de.createPortal(e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-40 bg-transparent",onClick:()=>y(!1)}),e.jsx("div",{className:"fixed z-50 bg-white shadow-2xl rounded-lg border border-gray-200 p-1.5 animate-in fade-in zoom-in-95 duration-100 flex flex-col gap-1",style:{top:C.top+4,left:C.left-(140-C.width)/2,width:"140px"},children:Object.values(re).map(n=>e.jsx("div",{onClick:()=>{v(n),y(!1)},className:"px-2 py-2 text-xs cursor-pointer hover:brightness-90 rounded-sm text-center font-medium transition-all shadow-sm "+(je[n]||"bg-gray-100 text-gray-600"),children:n||"Empty"},n))})]}),document.body)]})},rt=({personId:x,onChange:v,tabIndex:l})=>{const[m,y]=f.useState(!1),[C,z]=f.useState({top:0,left:0}),b=et.find(a=>a.id===x),n=a=>{a.stopPropagation();const S=a.currentTarget.getBoundingClientRect(),B=250,T=window.innerHeight-S.bottom<B;z({top:T?S.top+window.scrollY-B-5:S.bottom+window.scrollY+5,left:S.left+window.scrollX-90}),y(!m)};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"relative w-full h-full flex justify-center items-center group",children:e.jsxs("div",{onClick:n,onKeyDown:a=>{(a.key==="Enter"||a.key===" ")&&(a.preventDefault(),n(a))},tabIndex:l,className:"cursor-pointer hover:scale-110 transition-transform duration-200 active:scale-95 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded-full",children:[b?e.jsx("div",{className:"w-6 h-6 rounded-full text-white text-[9px] flex items-center justify-center font-bold ring-2 ring-white shadow-md "+b.color,title:b.name,children:b.initials}):e.jsx("div",{className:"w-6 h-6 rounded-full bg-gray-100 text-gray-400 flex items-center justify-center hover:bg-gray-200 border border-dashed border-gray-300 hover:border-gray-400 transition-all shadow-sm",children:e.jsx(lt,{size:12,strokeWidth:2.5})}),!b&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 pointer-events-none",children:e.jsx("div",{className:"w-6 h-6 rounded-full bg-black/5 flex items-center justify-center backdrop-blur-[1px]",children:e.jsx(dt,{size:12,className:"text-black/60",strokeWidth:3})})})]})}),m&&de.createPortal(e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-40 bg-transparent",onClick:()=>y(!1)}),e.jsxs("div",{className:"fixed z-50 bg-white shadow-2xl rounded-xl border border-gray-200 p-2 animate-in fade-in zoom-in-95 duration-100 flex flex-col gap-1 min-w-[180px]",style:{top:C.top,left:C.left},children:[e.jsx("div",{className:"text-xs font-semibold text-gray-400 mb-1 px-2 uppercase tracking-wider py-1",children:"Select Person"}),et.map(a=>e.jsxs("div",{onClick:()=>{v(a.id),y(!1)},className:"flex items-center gap-3 px-3 py-2 hover:bg-blue-50 rounded-lg cursor-pointer transition-colors "+(x===a.id?"bg-blue-50":""),children:[e.jsx("div",{className:"w-6 h-6 rounded-full text-white text-[10px] flex items-center justify-center font-bold "+a.color,children:a.initials}),e.jsx("span",{className:"text-sm text-gray-700 font-medium",children:a.name}),x===a.id&&e.jsx("span",{className:"ml-auto text-blue-500",children:"✓"})]},a.id)),e.jsx("div",{className:"border-t border-gray-100 my-1"}),e.jsxs("div",{onClick:()=>{v(null),y(!1)},className:"px-3 py-2 hover:bg-red-50 text-red-500 text-sm rounded-lg cursor-pointer flex items-center gap-2 transition-colors",children:[e.jsx("span",{className:"w-4 h-4 flex items-center justify-center text-xs",children:"✕"}),"Clear Selection"]})]})]}),document.body)]})},Fs=[{id:"text",label:"Normal text",icon:e.jsx(Yt,{size:18,className:"text-gray-500"})},{id:"h1",label:"Heading 1",icon:e.jsx(ps,{size:18,className:"text-gray-500"})},{id:"h2",label:"Heading 2",icon:e.jsx(gs,{size:18,className:"text-gray-500"})},{id:"h3",label:"Heading 3",icon:e.jsx(ys,{size:18,className:"text-gray-500"})},{id:"h4",label:"Heading 4",icon:e.jsx(ws,{size:18,className:"text-gray-500"})},{id:"checklist",label:"Checklist",icon:e.jsx(Qt,{size:18,className:"text-gray-500"})},{id:"bulletList",label:"Bulleted list",icon:e.jsx(es,{size:18,className:"text-gray-500"})},{id:"orderedList",label:"Numbered list",icon:e.jsx(ts,{size:18,className:"text-gray-500"})},{id:"toggle",label:"Toggle list",icon:e.jsx(Ts,{size:18,className:"text-gray-500"})},{id:"banner",label:"Banners",icon:e.jsx(xt,{size:18,className:"text-gray-500"})},{id:"code",label:"Code block",icon:e.jsx(Et,{size:18,className:"text-gray-500"})},{id:"quote",label:"Block quote",icon:e.jsx(zs,{size:18,className:"text-gray-500"})},{id:"pullQuote",label:"Pull quote",icon:e.jsx(Ns,{size:18,className:"text-gray-500"})}],Os=({search:x,onSelect:v,onClose:l,position:m})=>{const[y,C]=f.useState(0),z=f.useRef(null),b=Fs.filter(n=>n.label.toLowerCase().includes(x.toLowerCase()));return f.useEffect(()=>{C(0)},[x]),f.useEffect(()=>{const n=a=>{a.key==="ArrowDown"?(a.preventDefault(),C(S=>(S+1)%b.length)):a.key==="ArrowUp"?(a.preventDefault(),C(S=>(S-1+b.length)%b.length)):a.key==="Enter"?(a.preventDefault(),b[y]&&v(b[y])):a.key==="Escape"&&l()};return document.addEventListener("keydown",n),()=>document.removeEventListener("keydown",n)},[b,y,v,l]),b.length===0?null:e.jsxs("div",{ref:z,className:"fixed z-[9999] bg-white rounded-lg shadow-xl border border-gray-200 w-72 max-h-80 overflow-y-auto flex flex-col p-1 animate-in fade-in zoom-in-95 duration-100",style:{top:m.top,left:m.left},children:[e.jsx("div",{className:"px-2 py-1.5 text-xs font-semibold text-gray-400 uppercase tracking-wider",children:"Basic blocks"}),b.map((n,a)=>e.jsxs("div",{className:`flex items-center gap-3 px-2 py-1.5 rounded-md cursor-pointer transition-colors ${a===y?"bg-gray-100":"hover:bg-gray-50"}`,onClick:()=>v(n),onMouseEnter:()=>C(a),children:[e.jsx("div",{className:"w-10 h-10 rounded border border-gray-200 bg-white flex items-center justify-center shadow-sm",children:n.icon}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:n.label}),n.description&&e.jsx("span",{className:"text-xs text-gray-400",children:n.description})]})]},n.id))]})},Gs=({value:x,onChange:v,onClose:l,title:m="Edit Text"})=>{const[y,C]=f.useState(x),[z,b]=f.useState(!1),[n,a]=f.useState({top:0,left:0}),[S,B]=f.useState(""),V=f.useRef(null),T=f.useRef(null);f.useEffect(()=>{V.current&&(V.current.focus(),V.current.setSelectionRange(V.current.value.length,V.current.value.length))},[]);const M=F=>{var P;if(z){if(F.key==="ArrowUp"||F.key==="ArrowDown"||F.key==="Enter"){F.key==="Enter"&&F.preventDefault();return}if(F.key==="Escape"){b(!1);return}}else F.key==="Escape"&&l();if(F.key==="/"&&!z){const E=(P=V.current)==null?void 0:P.getBoundingClientRect();E&&(a({top:E.top+40,left:E.left+20}),b(!0),B(""))}},N=F=>{const P=F.target.value;if(C(P),v(P),z){const E=P.lastIndexOf("/");E===-1?b(!1):B(P.slice(E+1))}},U=F=>{var E;let P="";switch(F.id){case"h1":P="# ";break;case"h2":P="## ";break;case"h3":P="### ";break;case"checklist":P="- [ ] ";break;case"bulletList":P="- ";break;case"orderedList":P="1. ";break;case"quote":P="> ";break;case"code":P="```\n\n```";break;default:P=""}if(P){const te=y.lastIndexOf("/"),Q=y.substring(0,te)+P+y.substring(te+1+S.length);C(Q),v(Q)}b(!1),(E=V.current)==null||E.focus()};return de.createPortal(e.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center bg-black/50 backdrop-blur-sm animate-in fade-in duration-200",children:[e.jsxs("div",{ref:T,className:"bg-white rounded-xl shadow-2xl w-[800px] h-[600px] flex flex-col overflow-hidden animate-in zoom-in-95 duration-200 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-gray-100 bg-gray-50/50",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ut,{size:16,className:"text-gray-400"}),e.jsx("span",{className:"text-sm font-semibold text-gray-700",children:m})]}),e.jsx("button",{onClick:l,className:"p-1.5 hover:bg-gray-200 rounded-md text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(ke,{size:18})})]}),e.jsxs("div",{className:"flex-1 relative bg-white",children:[e.jsx("textarea",{ref:V,value:y,onChange:N,onKeyDown:M,className:"w-full h-full p-6 resize-none focus:outline-none text-base leading-relaxed text-gray-800 placeholder-gray-300 font-mono",placeholder:"Write something... Type '/' for commands"}),e.jsx("div",{className:"absolute bottom-4 right-4 text-xs text-gray-400 pointer-events-none",children:"Markdown supported • Type '/' for commands"})]})]}),z&&e.jsx("div",{className:"fixed inset-0 z-[10000] pointer-events-none",children:e.jsx("div",{className:"pointer-events-auto",children:e.jsx(Os,{search:S,onSelect:U,onClose:()=>b(!1),position:n})})})]}),document.body)},Rs=({value:x,onChange:v,tabIndex:l})=>{const[m,y]=f.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"w-full h-full relative group cursor-pointer hover:bg-gray-50 transition-colors",onClick:()=>y(!0),children:[e.jsx("div",{className:"w-full h-full px-2 py-1.5 text-sm text-gray-700 whitespace-nowrap overflow-hidden text-ellipsis focus:outline-none focus:ring-2 focus:ring-blue-500 rounded",tabIndex:l,children:x||e.jsx("span",{className:"text-gray-400 italic",children:"Empty"})}),e.jsx("div",{className:"absolute right-2 top-1/2 -translate-y-1/2 opacity-0 group-hover:opacity-100 transition-opacity text-gray-400",children:e.jsx(ut,{size:12})})]}),m&&e.jsx(Gs,{value:x,onChange:v,onClose:()=>y(!1)})]})},Bs=({options:x=[],value:v,onChange:l,onClose:m,tabIndex:y})=>{const[C,z]=f.useState(!1),[b,n]=f.useState(""),[a,S]=f.useState(null),B=f.useRef(null),V=x.find(N=>N.id===v),T=N=>{if(N.stopPropagation(),B.current){const U=B.current.getBoundingClientRect(),F=Math.max(U.width,220),P=U.left+window.scrollX-(F-U.width)/2;S({top:U.bottom+window.scrollY+4,left:P,width:F})}z(!0)};f.useEffect(()=>{const N=U=>{C&&!U.target.closest(".dropdown-portal")&&(z(!1),m==null||m())};return document.addEventListener("mousedown",N),()=>document.removeEventListener("mousedown",N)},[C,m]);const M=x.filter(N=>N.label.toLowerCase().includes(b.toLowerCase()));return e.jsxs(e.Fragment,{children:[e.jsx("div",{ref:B,onClick:T,onKeyDown:N=>{(N.key==="Enter"||N.key===" ")&&(N.preventDefault(),T(N))},tabIndex:y,className:"w-full h-full flex items-center justify-center cursor-pointer hover:bg-gray-50 transition-colors px-2 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded",children:V?e.jsx("div",{className:"px-3 py-1 rounded-sm text-white text-xs font-medium truncate w-full text-center "+V.color,children:V.label}):e.jsx("span",{className:"text-gray-400",children:"-"})}),C&&a&&de.createPortal(e.jsxs("div",{className:"dropdown-portal fixed z-[9999] bg-white rounded-lg shadow-2xl border border-gray-100 animate-in fade-in zoom-in-95 duration-100",style:{top:a.top,left:a.left,width:a.width,minWidth:"220px"},onClick:N=>N.stopPropagation(),children:[e.jsx("div",{className:"p-2",children:e.jsx("input",{type:"text",placeholder:"Search or add options...",value:b,onChange:N=>n(N.target.value),className:"w-full px-3 py-2 bg-gray-50 border-none rounded-md text-sm focus:ring-2 focus:ring-blue-500/20 text-gray-700 placeholder-gray-400",autoFocus:!0})}),e.jsxs("div",{className:"max-h-[240px] overflow-y-auto custom-scrollbar p-2 space-y-1",children:[e.jsx("div",{onClick:()=>{l(""),z(!1)},className:"flex items-center justify-center px-3 py-2 hover:bg-gray-50 rounded-sm cursor-pointer border border-dashed border-gray-200 text-gray-400 hover:text-gray-600 hover:border-gray-300 transition-all",children:"-"}),M.map(N=>e.jsxs("div",{onClick:()=>{l(N.id),z(!1)},className:"flex items-center justify-center relative gap-2 group cursor-pointer",children:[e.jsx("div",{className:"absolute left-2 text-gray-300 opacity-0 group-hover:opacity-100 cursor-grab p-1 hover:bg-gray-100 rounded",children:e.jsx(Jt,{size:14})}),e.jsx("div",{className:"w-[90%] px-3 py-2 rounded-sm text-white text-sm font-medium shadow-sm transition-transform active:scale-[0.98] text-center "+N.color,children:N.label})]},N.id)),M.length===0&&e.jsx("div",{className:"px-3 py-4 text-center text-xs text-gray-400",children:"No options found"})]})]}),document.body)]})},at=({className:x="w-6 h-6"})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:x,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})}),$s=({className:x="w-6 h-6"})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:x,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"})}),Ae=({className:x="w-6 h-6"})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:x,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.813 15.904 9 18.75l-.813-2.846a4.5 4.5 0 0 0-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 0 0 3.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 0 0 3.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 0 0-3.09 3.09ZM18.259 8.715 18 9.75l-.259-1.035a3.375 3.375 0 0 0-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 0 0 2.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 0 0 2.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 0 0-2.456 2.456ZM16.894 20.567 16.5 21.75l-.394-1.183a2.25 2.25 0 0 0-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 0 0 1.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 0 0 1.423 1.423l1.183.394-1.183.394a2.25 2.25 0 0 0-1.423 1.423Z"})}),ir=({storageKey:x="taskboard-state",tasks:v,onTaskUpdate:l})=>{const{board:m,setBoard:y,aiPrompt:C,setAiPrompt:z,isAiLoading:b,aiAnalysis:n,setAiAnalysis:a,updateTask:S,toggleTaskSelection:B,toggleGroupSelection:V,updateTaskTextValue:T,addTask:M,deleteTask:N,addGroup:U,deleteGroup:F,updateGroupTitle:P,toggleGroupPin:E,addColumn:te,updateColumnTitle:Q,deleteColumn:ue,duplicateColumn:ce,reorderColumn:xe,updateColumnWidth:me,handleGeneratePlan:Ce,handleAnalyzeBoard:Le}=_s(x);f.useEffect(()=>{v&&v.length>0&&y(t=>{const i=[...t.groups];i.length===0&&i.push({id:"g1",title:"Tasks",color:"#3b82f6",tasks:[],columns:[],isPinned:!1});const p=i[0],k=v.map(D=>{let s=_.New;return D.status==="To do"?s=_.New:D.status==="In Progress"?s=_.Working:D.status==="Review"?s=_.AlmostFinish:D.status==="Complete"&&(s=_.Done),{id:D.id,name:D.title,status:s,priority:D.priority,personId:D.assigneeId||null,dueDate:D.dueDate?new Date(D.dueDate).toISOString():"",textValues:{},selected:!1}});return i[0]={...p,tasks:k},{...t,groups:i}})},[v,y]);const u=(t,i,p)=>{if(S(t,i,p),l){const k={};p.name&&(k.title=p.name),p.status&&(p.status===_.New||p.status===_.Pending?k.status="To do":p.status===_.Working||p.status===_.Stuck?k.status="In Progress":p.status===_.AlmostFinish?k.status="Review":p.status===_.Done&&(k.status="Complete")),p.priority&&(k.priority=p.priority),p.personId!==void 0&&(k.assigneeId=p.personId||void 0),p.dueDate&&(k.dueDate=new Date(p.dueDate)),l(i,k)}},o=f.useRef(null),g=f.useRef(null),[c,w]=f.useState(!1),[I,X]=f.useState(null),[H,q]=f.useState(null),[K,pe]=f.useState(null),[De,mt]=f.useState(new Set),[Se,Fe]=f.useState({}),[ze,Oe]=f.useState(null),[Ie,Ge]=f.useState(null),[he,Te]=f.useState(null),[O,Re]=f.useState({}),[Hs,pt]=f.useState(null),ht=f.useRef(null),gt=f.useRef(m.groups.length),[ae,Be]=f.useState(null);f.useEffect(()=>{const t=p=>{if(!ae)return;const k=p.clientX-ae.startX,D=Math.max(50,ae.startWidth+k);me(ae.groupId,ae.colId,D)},i=()=>{ae&&(Be(null),document.body.style.cursor="")};return ae&&(document.addEventListener("mousemove",t),document.addEventListener("mouseup",i),document.body.style.cursor="col-resize"),()=>{document.removeEventListener("mousemove",t),document.removeEventListener("mouseup",i),document.body.style.cursor=""}},[ae,me]),f.useEffect(()=>{gt.current=m.groups.length},[m.groups.length]);const $e=t=>{const i=new Set(De);i.has(t)?i.delete(t):i.add(t),mt(i)},He=(t,i)=>{var D;const p=(D=Se[i])==null?void 0:D.trim();if(!p)return;const k={id:`subtask-${se()}`,name:p,status:_.New,priority:re.Normal,dueDate:"",personId:null,textValues:{},selected:!1};y(s=>({...s,groups:s.groups.map(j=>j.id===t?{...j,tasks:j.tasks.map(h=>h.id===i?{...h,subtasks:[...h.subtasks||[],k]}:h)}:j)})),Fe(s=>({...s,[i]:""}))},Y=(t,i)=>{Re(p=>({...p,[t]:{...p[t],...i}}))},Me=t=>{const i=O[t]||{},p=i.name||"";p.trim()&&(M(t,p,i),Re(k=>{const D={...k};return delete D[t],D}))},ft=(t,i,p)=>{t.preventDefault(),Te({x:t.clientX,y:t.clientY,groupId:i,colId:p})},yt=(t,i,p)=>{if(t==="delete")ue(i,p);else if(t==="duplicate")ce(i,p);else if(t!=="move_left"){if(t!=="move_right"){if(t==="rename"){const k=prompt("Enter new column name:");k&&Q(i,p,k)}}}Te(null)},bt=(t,i)=>{o.current=i,g.current=t.currentTarget,setTimeout(()=>w(!0),0)},wt=(t,i)=>{t.preventDefault();const p=o.current;!p||p.taskId===i.taskId||(o.current=i,y(k=>{const D=JSON.parse(JSON.stringify(k.groups)),s=D.findIndex(d=>d.id===p.groupId),j=D.findIndex(d=>d.id===i.groupId);if(s===-1||j===-1)return k;const h=D[s],r=D[j],L=h.tasks.findIndex(d=>d.id===p.taskId),$=r.tasks.findIndex(d=>d.id===i.taskId);if(L===-1||$===-1)return k;if(h.id===r.id){const[d]=h.tasks.splice(L,1);h.tasks.splice($,0,d)}else{const[d]=h.tasks.splice(L,1);r.tasks.splice($,0,d)}return{...k,groups:D}}))},jt=()=>{w(!1),pt(null),o.current=null,g.current=null},vt=(t,i,p,k)=>{if(k===0){t.preventDefault();return}t.dataTransfer.setData("application/json",JSON.stringify({type:"COLUMN",groupId:i,colId:p,index:k})),t.dataTransfer.effectAllowed="move"},Nt=(t,i)=>{t.preventDefault(),i===0?t.dataTransfer.dropEffect="none":t.dataTransfer.dropEffect="move"},kt=(t,i,p)=>{t.preventDefault();const k=t.dataTransfer.getData("application/json");if(k)try{const{type:D,groupId:s,index:j}=JSON.parse(k);D==="COLUMN"&&s===i&&j!==p&&p!==0&&xe(i,j,p)}catch{}},Ct=t=>{var i;return((i=o.current)==null?void 0:i.taskId)===t?"opacity-40 bg-gray-50 grayscale":""},Dt=t=>{if(t.length===0)return{done:0,working:0,stuck:0,pending:0,almostFinish:0,new:0};const i=t.length,p=t.filter(r=>r.status===_.Done).length,k=t.filter(r=>r.status===_.Working).length,D=t.filter(r=>r.status===_.Stuck).length,s=t.filter(r=>r.status===_.Pending).length,j=t.filter(r=>r.status===_.AlmostFinish).length,h=t.filter(r=>r.status===_.New).length;return{done:p/i*100,working:k/i*100,stuck:D/i*100,pending:s/i*100,almostFinish:j/i*100,new:h/i*100}},ge="50px",fe="50px",Pe=m.groups.flatMap(t=>t.tasks.filter(i=>i.selected).map(i=>({groupId:t.id,task:i}))).length,St=()=>{V("all",!1)},zt=()=>{Pe!==0&&y(t=>({...t,groups:t.groups.map(i=>({...i,tasks:i.tasks.filter(p=>!p.selected)}))}))},It=()=>{Pe!==0&&y(t=>({...t,groups:t.groups.map(i=>{const p=i.tasks.filter(D=>D.selected);if(p.length===0)return i;const k=p.map(D=>({...D,id:crypto.randomUUID(),name:D.name+" (Copy)",selected:!0}));return{...i,tasks:[...i.tasks,...k]}})}))};return e.jsxs("div",{className:"flex w-full h-screen bg-white overflow-hidden font-sans text-gray-800",children:[e.jsxs("main",{className:"flex-1 flex flex-col h-screen overflow-hidden relative bg-white",children:[e.jsxs("header",{className:"h-16 bg-white flex items-center justify-between px-8 flex-shrink-0",children:[e.jsx("div",{children:e.jsx("h1",{className:"text-2xl font-bold text-gray-800 tracking-tight",children:m.name})}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("button",{onClick:Le,disabled:b,className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-indigo-50 to-purple-50 text-indigo-600 rounded-full hover:shadow-md hover:scale-105 transition-all text-sm font-semibold border border-indigo-100",children:[e.jsx(Ae,{className:"w-4 h-4"}),b?"Thinking...":"Analyze Board"]}),e.jsxs("button",{onClick:U,className:"flex items-center gap-2 px-4 py-2 bg-[#1e2126] text-white rounded-md hover:bg-[#2c3036] transition text-sm font-medium shadow-sm",children:[e.jsx(at,{className:"w-4 h-4"})," New Group"]})]})]}),e.jsxs("div",{ref:ht,className:"flex-1 overflow-y-auto overflow-x-hidden custom-scroll p-6 pb-96",children:[n&&e.jsxs("div",{className:"mb-8 p-6 bg-white border border-indigo-100 rounded-2xl shadow-xl relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-indigo-400 via-purple-400 to-pink-400"}),e.jsxs("h3",{className:"text-indigo-900 font-bold text-lg mb-3 flex items-center gap-2",children:[e.jsx(Ae,{className:"w-5 h-5 text-indigo-500"})," AI Assistant Insights"]}),e.jsx("p",{className:"text-gray-700 whitespace-pre-line text-sm leading-relaxed",children:n}),e.jsx("button",{onClick:()=>a(null),className:"mt-4 text-xs font-semibold text-gray-400 hover:text-gray-600 uppercase tracking-wider",children:"Dismiss"})]}),e.jsx("div",{className:"space-y-8 w-full",children:[...m.groups].sort((t,i)=>(i.isPinned?1:0)-(t.isPinned?1:0)).map(t=>{var D;const i=Dt(t.tasks),p=t.tasks.length>0&&t.tasks.every(s=>s.selected),k=t.tasks.some(s=>s.selected);return e.jsxs("div",{id:`group-${t.id}`,className:"relative flex flex-col w-full mb-10 shadow-sm border border-gray-200/60 rounded-xl overflow-hidden",children:[e.jsxs("div",{className:"flex items-center px-4 py-3 relative bg-white w-full border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-3 pr-4",children:[e.jsx("div",{className:"cursor-pointer hover:bg-gray-100 p-1.5 rounded transition-colors group/menu relative",children:e.jsx("svg",{className:"w-4 h-4 text-gray-400 group-hover/menu:text-blue-500",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})}),e.jsx("input",{value:t.title,onChange:s=>P(t.id,s.target.value),className:"text-xl font-bold bg-transparent border border-transparent hover:border-gray-300 rounded px-2 py-0.5 focus:outline-none focus:border-blue-500 focus:bg-white w-full max-w-md transition-all",style:{color:t.color}}),e.jsxs("div",{className:"ml-4 flex items-center gap-2",children:[e.jsxs("div",{className:"flex h-1.5 w-24 overflow-hidden rounded-full bg-gray-100",children:[e.jsx("div",{className:"h-full bg-[#33D995]",style:{width:`${i.done}%`}}),e.jsx("div",{className:"h-full bg-[#FFBE66]",style:{width:`${i.working}%`}}),e.jsx("div",{className:"h-full bg-[#FF7085]",style:{width:`${i.stuck}%`}})]}),e.jsxs("span",{className:"text-xs text-gray-400 font-medium",children:[Math.round(i.done),"%"]})]})]}),e.jsx("div",{className:"flex-1"}),e.jsxs("div",{className:"flex items-center gap-1 px-2",children:[e.jsx("button",{onClick:()=>E(t.id),className:"p-2 transition-colors rounded-md "+(t.isPinned?"text-blue-500 bg-blue-50":"text-gray-300 hover:text-gray-500 hover:bg-gray-100"),title:t.isPinned?"Unpin Group":"Pin Group",children:e.jsx(Ds,{className:"w-4 h-4 "+(t.isPinned?"fill-current":"")})}),e.jsx("button",{onClick:s=>{s.stopPropagation(),Oe(t.id)},className:"p-2 transition-colors rounded-md text-gray-300 hover:text-gray-500 hover:bg-gray-100",title:"Send to Reminders",children:e.jsx(Ye,{className:"w-4 h-4"})}),e.jsx("button",{onClick:s=>{s.stopPropagation(),Ge(t.id)},className:"p-2 transition-colors rounded-md text-gray-300 hover:text-gray-500 hover:bg-gray-100",title:"Send to Goals",children:e.jsx(ot,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>F(t.id),className:"text-gray-400 hover:text-red-500 p-2 transition-colors hover:bg-red-50 rounded-md",title:"Delete Group",children:e.jsx($s,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"overflow-x-auto w-full [&::-webkit-scrollbar]:hidden",children:[e.jsx("div",{className:"sticky top-0 z-[1] bg-white min-w-full w-fit",style:{boxShadow:"0 2px 5px -2px rgba(0,0,0,0.05)"},children:e.jsxs("div",{className:"grid gap-px bg-gray-200 border-y border-gray-200 text-xs font-semibold text-gray-500 uppercase tracking-wide",style:{gridTemplateColumns:ge+" "+t.columns.map(s=>s.width).join(" ")+" "+fe},children:[e.jsx("div",{className:"bg-gray-50/80 flex items-center justify-center sticky left-0 z-20 border-r-2 border-r-gray-200/50",children:e.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded border-gray-300",checked:p,ref:s=>{s&&(s.indeterminate=k&&!p)},onChange:s=>V(t.id,s.target.checked)})}),t.columns.map((s,j)=>e.jsx("div",{className:"relative group bg-gray-50/80 backdrop-blur-sm hover:bg-gray-100 transition-colors "+(s.type==="name"?"sticky left-[50px] z-20 border-r-2 border-r-gray-200/50":"cursor-grab active:cursor-grabbing"),onContextMenu:h=>ft(h,t.id,s.id),draggable:s.type!=="name",onDragStart:h=>vt(h,t.id,s.id,j),onDragOver:h=>Nt(h,j),onDrop:h=>kt(h,t.id,j),children:e.jsxs("div",{className:"flex items-center justify-between h-full",children:[e.jsx("input",{value:s.title,onChange:h=>Q(t.id,s.id,h.target.value),className:"w-full h-full bg-transparent px-3 py-2 text-center text-[11px] focus:outline-none focus:bg-white focus:text-gray-800 border-b-2 border-transparent focus:border-blue-500",style:{textAlign:s.type==="name"||s.type==="long_text"?"left":"center"}}),e.jsx("div",{className:"absolute right-1 top-1/2 transform -translate-y-1/2 opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer p-1 hover:bg-gray-200 rounded",onClick:h=>{h.stopPropagation();const r=h.currentTarget.getBoundingClientRect();pe((K==null?void 0:K.groupId)===t.id?null:{groupId:t.id,rect:r})},children:e.jsx(Lt,{size:14,className:"text-gray-400"})}),e.jsx("div",{className:"absolute right-0 top-0 bottom-0 w-1 cursor-col-resize hover:bg-blue-400/50 z-30",onMouseDown:h=>{h.stopPropagation(),h.preventDefault();const r=parseInt(s.width.replace("px",""))||140;Be({groupId:t.id,colId:s.id,startX:h.clientX,startWidth:r})},onClick:h=>h.stopPropagation()})]})},s.id)),e.jsx("div",{className:"bg-gray-50/80 flex items-center justify-center relative group",children:e.jsx("div",{className:"cursor-pointer w-6 h-6 rounded flex items-center justify-center transition-all duration-200 "+((K==null?void 0:K.groupId)===t.id?"bg-gray-200 text-gray-900":"text-gray-400 hover:text-gray-700 hover:bg-gray-200/50"),onClick:s=>{s.stopPropagation();const j=s.currentTarget.getBoundingClientRect();pe((K==null?void 0:K.groupId)===t.id?null:{groupId:t.id,rect:j})},title:"Add Column",children:e.jsx(at,{className:"w-4 h-4"})})})]})}),e.jsx("div",{className:"divide-y divide-gray-100 relative z-0 min-w-full w-fit",children:t.tasks.map((s,j)=>{var h;return e.jsxs(Ft.Fragment,{children:[e.jsxs("div",{draggable:!0,onDragStart:r=>bt(r,{taskId:s.id,groupId:t.id}),onDragEnter:c?r=>wt(r,{taskId:s.id,groupId:t.id}):void 0,onDragEnd:jt,onDragOver:r=>r.preventDefault(),className:"grid gap-px bg-white hover:bg-gray-50/50 group/row text-sm transition-colors relative "+Ct(s.id),style:{gridTemplateColumns:ge+" "+t.columns.map(r=>r.width).join(" ")+" "+fe},children:[e.jsxs("div",{className:"flex items-center justify-center py-1.5 border-r border-gray-100 relative hover:bg-gray-50 transition-colors sticky left-0 z-10 bg-white border-r-2 border-r-gray-200/50",children:[e.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-1.5",style:{backgroundColor:t.color}}),e.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded border-gray-300",checked:!!s.selected,onChange:r=>B(t.id,s.id,r.target.checked),onClick:r=>r.stopPropagation(),onMouseDown:r=>r.stopPropagation()})]}),t.columns.map(r=>{var $;const L=r.type==="name";return e.jsxs("div",{className:"relative border-r border-gray-100 flex items-center "+(L?"justify-start pl-2 sticky left-[50px] z-10 border-r-2 border-r-gray-200/50":"justify-center")+" min-h-[32px] bg-white group-hover/row:bg-[#f8f9fa] transition-colors",children:[L&&e.jsx("div",{className:"cursor-grab active:cursor-grabbing text-gray-300 mr-2 opacity-0 group-hover/row:opacity-100 hover:text-gray-500 p-1",children:e.jsxs("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"9",cy:"12",r:"1"}),e.jsx("circle",{cx:"9",cy:"5",r:"1"}),e.jsx("circle",{cx:"9",cy:"19",r:"1"}),e.jsx("circle",{cx:"15",cy:"12",r:"1"}),e.jsx("circle",{cx:"15",cy:"5",r:"1"}),e.jsx("circle",{cx:"15",cy:"19",r:"1"})]})}),r.type==="name"&&e.jsxs("div",{className:"flex items-center w-full gap-2",children:[e.jsx("button",{onClick:d=>{d.stopPropagation(),$e(s.id)},className:"p-0.5 hover:bg-gray-200 rounded text-gray-400 transition-colors",children:De.has(s.id)?e.jsx(Ot,{size:14}):e.jsx(nt,{size:14})}),e.jsx("input",{value:s.name,onChange:d=>u(t.id,s.id,{name:d.target.value}),className:"w-full px-2 py-1.5 bg-transparent focus:outline-none focus:ring-2 focus:ring-blue-500 rounded text-gray-700 font-medium truncate"}),e.jsx("div",{className:"text-xs text-gray-400 mr-2",children:($=s.subtasks)!=null&&$.length?`${s.subtasks.length} subtasks`:""})]}),r.type==="status"?e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(tt,{status:r.id==="col_status"?s.status:s.textValues[r.id]||_.New,onChange:d=>{r.id==="col_status"?u(t.id,s.id,{status:d}):T(t.id,s.id,r.id,d)},tabIndex:0})}):r.type==="priority"?e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(st,{priority:r.id==="col_priority"?s.priority:s.textValues[r.id]||re.Normal,onChange:d=>{r.id==="col_priority"?u(t.id,s.id,{priority:d}):T(t.id,s.id,r.id,d)},tabIndex:0})}):r.type==="person"?e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(rt,{personId:r.id==="col_person"?s.personId:s.textValues[r.id]||null,onChange:d=>{r.id==="col_person"?u(t.id,s.id,{personId:d}):T(t.id,s.id,r.id,d||"")},tabIndex:0})}):r.type==="date"?e.jsx("div",{className:"w-full h-full relative flex items-center justify-center",ref:d=>{},children:e.jsx("div",{className:"text-xs text-gray-500 cursor-pointer hover:text-gray-800 font-medium px-2 py-1 rounded hover:bg-gray-100 transition-colors focus:ring-2 focus:ring-blue-500 focus:outline-none",onClick:d=>{d.stopPropagation();const G=d.currentTarget.getBoundingClientRect(),J=r.id==="col_date",ee=J?s.dueDate||"":s.textValues[r.id]||"";q({taskId:s.id,colId:r.id,date:ee,rect:G,onSelect:ne=>{J?u(t.id,s.id,{dueDate:ne}):T(t.id,s.id,r.id,ne)}})},tabIndex:0,onKeyDown:d=>{if(d.key==="Enter"||d.key===" "){d.preventDefault();const G=d.currentTarget.getBoundingClientRect(),J=r.id==="col_date",ee=J?s.dueDate||"":s.textValues[r.id]||"";q({taskId:s.id,colId:r.id,date:ee,rect:G,onSelect:ne=>{J?u(t.id,s.id,{dueDate:ne}):T(t.id,s.id,r.id,ne)}})}},children:(()=>{const G=r.id==="col_date"?s.dueDate:s.textValues[r.id];return G?new Date(G).toLocaleDateString(void 0,{month:"short",day:"numeric"}):e.jsx("span",{className:"text-gray-300",children:"Set Date"})})()})}):null,r.type==="checkbox"&&e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx("input",{type:"checkbox",checked:s.textValues[r.id]==="true",onChange:d=>{T(t.id,s.id,r.id,d.target.checked?"true":"false")},className:"w-4 h-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500 cursor-pointer"})}),r.type==="money"&&e.jsx("div",{className:"w-full h-full px-2 py-1.5 text-sm text-gray-700 flex items-center justify-end font-mono",children:s.textValues[r.id]?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-gray-400 mr-1",children:r.currency||"$"}),e.jsx("input",{type:"text",value:s.textValues[r.id],onChange:d=>{const G=d.target.value.replace(/[^0-9.]/g,"");T(t.id,s.id,r.id,G)},className:"bg-transparent focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1 w-full text-right",placeholder:"0.00"})]}):e.jsx("input",{type:"text",onChange:d=>{const G=d.target.value.replace(/[^0-9.]/g,"");T(t.id,s.id,r.id,G)},className:"bg-transparent focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1 w-full text-right placeholder-gray-300",placeholder:r.currency||"$"})}),r.type==="website"&&e.jsxs("div",{className:"w-full h-full px-2 py-1.5 flex items-center gap-2",children:[e.jsx("div",{className:"p-1 bg-indigo-50 rounded text-indigo-500",children:e.jsx(Gt,{size:12})}),e.jsx("input",{type:"text",value:s.textValues[r.id]||"",onChange:d=>T(t.id,s.id,r.id,d.target.value),className:"w-full bg-transparent focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1 text-sm text-blue-600 hover:underline cursor-text truncate",placeholder:"www.example.com"})]}),r.type==="email"&&e.jsxs("div",{className:"w-full h-full px-2 py-1.5 flex items-center gap-2",children:[e.jsx("div",{className:"p-1 bg-red-50 rounded text-red-500",children:e.jsx(Rt,{size:12})}),e.jsx("input",{type:"text",value:s.textValues[r.id]||"",onChange:d=>T(t.id,s.id,r.id,d.target.value),className:"w-full bg-transparent focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1 text-sm text-gray-700 truncate",placeholder:"email@example.com"})]}),r.type==="phone"&&e.jsxs("div",{className:"w-full h-full px-2 py-1.5 flex items-center gap-2",children:[e.jsx("div",{className:"p-1 bg-orange-50 rounded text-orange-500",children:e.jsx(ss,{size:12})}),e.jsx("input",{type:"text",value:s.textValues[r.id]||"",onChange:d=>T(t.id,s.id,r.id,d.target.value),className:"w-full bg-transparent focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1 text-sm text-gray-700 truncate",placeholder:"+1 234 567 890"})]}),r.type==="location"&&e.jsxs("div",{className:"w-full h-full px-2 py-1.5 flex items-center gap-2",children:[e.jsx("div",{className:"p-1 bg-red-50 rounded text-red-600",children:e.jsx(Bt,{size:12})}),e.jsx("input",{type:"text",value:s.textValues[r.id]||"",onChange:d=>T(t.id,s.id,r.id,d.target.value),className:"w-full bg-transparent focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1 text-sm text-gray-700 truncate",placeholder:"Add location"})]}),r.type==="rating"&&e.jsx("div",{className:"w-full h-full flex items-center justify-center gap-0.5",children:[1,2,3,4,5].map(d=>e.jsx(Ze,{size:14,className:`cursor-pointer transition-colors ${d<=(Number(s.textValues[r.id])||0)?"text-amber-400 fill-amber-400":"text-gray-300"}`,onClick:()=>T(t.id,s.id,r.id,d.toString())},d))}),r.type==="progress_manual"&&e.jsxs("div",{className:"w-full h-full px-2 py-1.5 flex items-center gap-2",children:[e.jsxs("div",{className:"flex-1 h-2 bg-gray-100 rounded-full overflow-hidden relative group/progress cursor-pointer",children:[e.jsx("div",{className:"h-full bg-green-500 transition-all duration-300",style:{width:`${Number(s.textValues[r.id])||0}%`}}),e.jsx("input",{type:"range",min:"0",max:"100",value:Number(s.textValues[r.id])||0,onChange:d=>T(t.id,s.id,r.id,d.target.value),className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"})]}),e.jsxs("span",{className:"text-xs text-gray-500 w-8 text-right",children:[Number(s.textValues[r.id])||0,"%"]})]}),r.type==="button"&&e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx("button",{className:"px-3 py-1 bg-blue-500 text-white text-xs font-medium rounded hover:bg-blue-600 transition-colors active:scale-95",onClick:()=>alert(`Action triggered for ${s.name}`),children:"Click Me"})}),r.type==="text"&&e.jsx("input",{type:"text",value:s.textValues[r.id]||"",onChange:d=>T(t.id,s.id,r.id,d.target.value),className:"w-full h-full text-center px-2 bg-transparent focus:outline-none focus:ring-2 focus:ring-blue-500 rounded text-gray-600",placeholder:"-",tabIndex:0}),r.type==="long_text"&&e.jsx("div",{className:"w-full h-full p-1",children:e.jsx(Rs,{value:s.textValues[r.id]||"",onChange:d=>T(t.id,s.id,r.id,d),tabIndex:0})}),r.type==="dropdown"&&e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(Bs,{options:r.options,value:s.textValues[r.id],onChange:d=>T(t.id,s.id,r.id,d),tabIndex:0})}),r.type==="number"&&e.jsx("input",{type:"text",value:s.textValues[r.id]||"",onChange:d=>{const G=d.target.value;/^[0-9.,]*$/.test(G)&&T(t.id,s.id,r.id,G)},onBlur:d=>{const G=d.target.value.replace(/,/g,"");if(G&&!isNaN(Number(G))){const J=Number(G).toLocaleString();T(t.id,s.id,r.id,J)}},className:"w-full h-full text-center px-2 bg-transparent focus:outline-none focus:ring-2 focus:ring-blue-500 rounded text-gray-600 font-mono text-xs",placeholder:"0",tabIndex:0})]},r.id)}),e.jsx("div",{className:"flex items-center justify-center border-l border-gray-100 bg-white opacity-0 group-hover/row:opacity-100 transition-opacity",children:e.jsx("button",{onClick:()=>N(t.id,s.id),className:"text-gray-300 hover:text-red-500 hover:bg-red-50 p-1.5 rounded transition-all",children:e.jsx("svg",{className:"w-4 h-4",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})})]}),De.has(s.id)&&e.jsxs("div",{className:"contents",children:[(h=s.subtasks)==null?void 0:h.map(r=>e.jsxs("div",{className:"grid gap-px bg-gray-50/30 hover:bg-gray-50 group/subrow text-sm transition-colors relative",style:{gridTemplateColumns:ge+" "+t.columns.map(L=>L.width).join(" ")+" "+fe},children:[e.jsxs("div",{className:"flex items-center justify-center py-1.5 border-r border-gray-100 relative sticky left-0 z-10 bg-gray-50/30 border-r-2 border-r-gray-200/50",children:[e.jsx("div",{className:"w-4 h-4"})," "]}),t.columns.map(L=>{const $=L.type==="name";return e.jsxs("div",{className:"relative border-r border-gray-100 flex items-center "+($?"justify-start pl-8 sticky left-[50px] z-10 border-r-2 border-r-gray-200/50":"justify-center")+" min-h-[32px] bg-gray-50/30 group-hover/subrow:bg-gray-100 transition-colors",children:[$&&e.jsx(Xe,{size:14,className:"text-gray-400 mr-2"}),$?e.jsx("input",{value:r.name,onChange:d=>{var J;const G=(J=s.subtasks)==null?void 0:J.map(ee=>ee.id===r.id?{...ee,name:d.target.value}:ee);u(t.id,s.id,{subtasks:G})},className:"w-full px-2 py-1.5 bg-transparent focus:outline-none focus:ring-2 focus:ring-blue-500 rounded text-gray-600 text-sm truncate"}):e.jsx("div",{className:"text-xs text-gray-400 italic",children:"-"})]},`${r.id}-${L.id}`)}),e.jsx("div",{className:"bg-white border-l border-gray-100"})]},r.id)),e.jsx("div",{className:"grid gap-px bg-white relative z-20 shadow-lg my-2 mx-4 rounded-lg border border-gray-200 overflow-hidden animate-in slide-in-from-top-2 duration-200",style:{gridColumn:"1 / -1"},children:e.jsxs("div",{className:"flex items-center p-2 gap-3 bg-white",children:[e.jsx("div",{className:"w-5 h-5 rounded-full border-2 border-dashed border-gray-300 animate-spin-slow"}),e.jsx("input",{autoFocus:!0,value:Se[s.id]||"",onChange:r=>Fe({...Se,[s.id]:r.target.value}),onKeyDown:r=>{r.key==="Enter"&&He(t.id,s.id)},placeholder:"Task Name or type '/' for commands",className:"flex-1 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-2 text-gray-700 placeholder-gray-400"}),e.jsxs("div",{className:"flex items-center gap-1 border-l border-gray-200 pl-3",children:[e.jsx("button",{className:"p-1.5 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded",children:e.jsx(Je,{size:16})}),e.jsx("button",{className:"p-1.5 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded",children:e.jsx($t,{size:16})}),e.jsx("div",{className:"w-px h-4 bg-gray-200 mx-1"}),e.jsx("button",{className:"p-1.5 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded",children:e.jsx(lt,{size:16})}),e.jsx("button",{className:"p-1.5 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded",children:e.jsx(Ye,{size:16})}),e.jsx("button",{className:"p-1.5 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded",children:e.jsx(xt,{size:16})}),e.jsx("button",{className:"p-1.5 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded",children:e.jsx(rs,{size:16})}),e.jsx("button",{className:"p-1.5 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded",children:e.jsx(Ht,{size:16})}),e.jsx("div",{className:"w-px h-4 bg-gray-200 mx-1"}),e.jsx("button",{onClick:()=>$e(s.id),className:"px-3 py-1.5 text-sm font-medium text-gray-600 hover:bg-gray-100 rounded border border-gray-200 transition-colors",children:"Cancel"}),e.jsxs("button",{onClick:()=>He(t.id,s.id),className:"px-3 py-1.5 text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 rounded shadow-sm transition-colors flex items-center gap-1",children:["Save ",e.jsx(Xe,{size:12})]})]})]})})]})]},s.id)})}),e.jsxs("div",{className:"grid gap-px bg-white border-t border-gray-200 group/add-row hover:bg-gray-50 transition-colors min-w-full w-fit",style:{gridTemplateColumns:ge+" "+t.columns.map(s=>s.width).join(" ")+" "+fe},children:[e.jsxs("div",{className:"flex items-center justify-center border-r border-gray-100 bg-white sticky left-0 z-10 border-r-2 border-r-gray-200/50 group-hover/add-row:bg-gray-50 transition-colors relative",children:[e.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-1.5",style:{backgroundColor:t.color}}),e.jsx("div",{className:"w-4 h-4 rounded border border-gray-200 flex items-center justify-center text-gray-300",children:e.jsx(dt,{size:10})})]}),e.jsx("div",{className:"flex items-center pl-2 py-2 border-r border-gray-100 bg-white sticky left-[50px] z-10 border-r-2 border-r-gray-200/50 group-hover/add-row:bg-gray-50 transition-colors",children:e.jsx("input",{type:"text",placeholder:"+ Add task",value:((D=O[t.id])==null?void 0:D.name)||"",onChange:s=>Y(t.id,{name:s.target.value}),className:"w-full bg-transparent text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-2 placeholder-gray-400 text-gray-700",onKeyDown:s=>{s.key==="Enter"&&Me(t.id)}})}),t.columns.slice(1).map(s=>{var j,h,r,L,$,d,G,J,ee,ne,Ue,We,qe;return e.jsx("div",{className:"border-r border-gray-100 bg-white min-h-[32px] group-hover/add-row:bg-gray-50 transition-colors flex items-center justify-center",children:s.type==="status"?e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(tt,{status:s.id==="col_status"?((j=O[t.id])==null?void 0:j.status)||_.New:((r=(h=O[t.id])==null?void 0:h.textValues)==null?void 0:r[s.id])||_.New,onChange:A=>{var R;s.id==="col_status"?Y(t.id,{status:A}):Y(t.id,{textValues:{...(R=O[t.id])==null?void 0:R.textValues,[s.id]:A}})},tabIndex:0})}):s.type==="priority"?e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(st,{priority:s.id==="col_priority"?((L=O[t.id])==null?void 0:L.priority)||re.Normal:((d=($=O[t.id])==null?void 0:$.textValues)==null?void 0:d[s.id])||re.Normal,onChange:A=>{var R;s.id==="col_priority"?Y(t.id,{priority:A}):Y(t.id,{textValues:{...(R=O[t.id])==null?void 0:R.textValues,[s.id]:A}})},tabIndex:0})}):s.type==="person"?e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(rt,{personId:s.id==="col_person"?((G=O[t.id])==null?void 0:G.personId)||null:((ee=(J=O[t.id])==null?void 0:J.textValues)==null?void 0:ee[s.id])||null,onChange:A=>{var R;s.id==="col_person"?Y(t.id,{personId:A}):Y(t.id,{textValues:{...(R=O[t.id])==null?void 0:R.textValues,[s.id]:A||""}})},tabIndex:0})}):s.type==="date"?e.jsx("div",{className:"w-full h-full relative flex items-center justify-center",children:e.jsx("div",{className:"text-xs text-gray-500 cursor-pointer hover:text-gray-800 font-medium px-2 py-1 rounded hover:bg-gray-100 transition-colors focus:ring-2 focus:ring-blue-500 focus:outline-none",onClick:A=>{var oe,ye,ve;A.stopPropagation();const R=A.currentTarget.getBoundingClientRect(),Z=s.id==="col_date",ie=Z?((oe=O[t.id])==null?void 0:oe.dueDate)||"":((ve=(ye=O[t.id])==null?void 0:ye.textValues)==null?void 0:ve[s.id])||"";q({taskId:"draft-"+t.id,colId:s.id,date:ie,rect:R,onSelect:be=>{var we;Z?Y(t.id,{dueDate:be}):Y(t.id,{textValues:{...(we=O[t.id])==null?void 0:we.textValues,[s.id]:be}})}})},tabIndex:0,onKeyDown:A=>{var R,Z,ie;if(A.key==="Enter"||A.key===" "){A.preventDefault();const oe=A.currentTarget.getBoundingClientRect(),ye=s.id==="col_date",ve=ye?((R=O[t.id])==null?void 0:R.dueDate)||"":((ie=(Z=O[t.id])==null?void 0:Z.textValues)==null?void 0:ie[s.id])||"";q({taskId:"draft-"+t.id,colId:s.id,date:ve,rect:oe,onSelect:be=>{var we;ye?Y(t.id,{dueDate:be}):Y(t.id,{textValues:{...(we=O[t.id])==null?void 0:we.textValues,[s.id]:be}})}})}},children:(()=>{var Z,ie,oe;const R=s.id==="col_date"?(Z=O[t.id])==null?void 0:Z.dueDate:(oe=(ie=O[t.id])==null?void 0:ie.textValues)==null?void 0:oe[s.id];return R?new Date(R).toLocaleDateString(void 0,{month:"short",day:"numeric"}):e.jsx("span",{className:"text-gray-300",children:"Set Date"})})()})}):s.type==="text"?e.jsx("input",{type:"text",value:((Ue=(ne=O[t.id])==null?void 0:ne.textValues)==null?void 0:Ue[s.id])||"",onChange:A=>{var R;return Y(t.id,{textValues:{...(R=O[t.id])==null?void 0:R.textValues,[s.id]:A.target.value}})},className:"w-full h-full text-center px-2 bg-transparent focus:outline-none focus:ring-2 focus:ring-blue-500 rounded text-gray-600",placeholder:"-",tabIndex:0,onKeyDown:A=>A.key==="Enter"&&Me(t.id)}):s.type==="number"?e.jsx("input",{type:"text",value:((qe=(We=O[t.id])==null?void 0:We.textValues)==null?void 0:qe[s.id])||"",onChange:A=>{var Z;const R=A.target.value;/^[0-9.,]*$/.test(R)&&Y(t.id,{textValues:{...(Z=O[t.id])==null?void 0:Z.textValues,[s.id]:R}})},className:"w-full h-full text-center px-2 bg-transparent focus:outline-none focus:ring-2 focus:ring-blue-500 rounded text-gray-600 font-mono text-xs",placeholder:"0",tabIndex:0,onKeyDown:A=>A.key==="Enter"&&Me(t.id)}):e.jsx("div",{className:"w-full h-full"})},s.id)}),e.jsx("div",{className:"bg-white group-hover/add-row:bg-gray-50 transition-colors"})]}),e.jsxs("div",{className:"grid gap-px bg-white border-t border-gray-200 rounded-b-xl min-w-full w-fit",style:{gridTemplateColumns:ge+" "+t.columns.map(s=>s.width).join(" ")+" "+fe},children:[e.jsx("div",{className:"flex items-center justify-center border-r border-gray-100 bg-white sticky left-0 z-10 border-r-2 border-r-gray-200/50"}),e.jsx("div",{className:"flex items-center justify-center bg-white sticky left-[50px] z-10 border-t border-gray-200",children:e.jsx("span",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-wider"})}),t.columns.slice(1).map(s=>e.jsxs("div",{className:"border-r border-gray-100 bg-white min-h-[32px] flex items-center justify-center px-2",children:[s.type==="status"&&e.jsx("div",{className:"w-full h-4 flex rounded-sm overflow-hidden",children:Object.values(_).map(j=>{const h=t.tasks.filter(L=>(s.id==="col_status"?L.status:L.textValues[s.id])===j).length;if(h===0)return null;const r=h/t.tasks.length*100;return e.jsx("div",{style:{width:r+"%"},title:j+": "+h,className:Ee[j]+" h-full hover:opacity-80 transition-opacity"},j)})}),s.type==="priority"&&e.jsx("div",{className:"w-full h-4 flex rounded-sm overflow-hidden",children:Object.values(re).map(j=>{const h=t.tasks.filter(L=>(s.id==="col_priority"?L.priority:L.textValues[s.id])===j).length;if(h===0)return null;const r=h/t.tasks.length*100;return e.jsx("div",{style:{width:r+"%"},title:j+": "+h,className:je[j]+" h-full hover:opacity-80 transition-opacity"},j)})}),s.type==="person"&&(()=>{const j=t.tasks.filter(h=>{const r=s.id==="col_owner"?h.personId:h.textValues[s.id];return r&&r.length>0}).length;return j===0?null:e.jsxs("div",{className:"flex flex-col items-center justify-center leading-none",children:[e.jsx("span",{className:"text-sm text-gray-500 font-medium",children:j}),e.jsx("span",{className:"text-[10px] text-gray-400",children:"owners"})]})})(),s.type==="money"&&(()=>{const j=t.tasks.reduce((h,r)=>{var $;const L=($=r.textValues[s.id])==null?void 0:$.replace(/,/g,"");return h+(Number(L)||0)},0);return e.jsxs("div",{className:"flex flex-col items-center justify-center leading-none",children:[e.jsxs("span",{className:"text-xs text-gray-700 font-bold font-mono",children:[s.currency||"$"," ",j.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]}),e.jsx("span",{className:"text-[10px] text-gray-400",children:"sum"})]})})(),s.type==="checkbox"&&(()=>{const j=t.tasks.filter(h=>h.textValues[s.id]==="true").length;return j===0?null:e.jsxs("div",{className:"flex flex-col items-center justify-center leading-none",children:[e.jsx("span",{className:"text-xs text-gray-700 font-bold font-mono",children:j}),e.jsx("span",{className:"text-[10px] text-gray-400",children:"checked"})]})})(),s.type==="number"&&(()=>{const j=t.tasks.reduce((h,r)=>{var $;const L=($=r.textValues[s.id])==null?void 0:$.replace(/,/g,"");return h+(Number(L)||0)},0);return e.jsxs("div",{className:"flex flex-col items-center justify-center leading-none",children:[e.jsx("span",{className:"text-xs text-gray-700 font-bold font-mono",children:j.toLocaleString()}),e.jsx("span",{className:"text-[10px] text-gray-400",children:"sum"})]})})(),(s.type==="text"||s.type==="long_text"||s.type==="date"||s.type==="dropdown"||s.type==="name")&&(()=>{const j=t.tasks.filter(h=>{if(s.type==="name")return!0;const r=h.textValues[s.id];return r&&r.trim().length>0}).length;return j===0?null:e.jsxs("div",{className:"flex flex-col items-center justify-center leading-none",children:[e.jsx("span",{className:"text-xs text-gray-700 font-bold font-mono",children:j}),e.jsx("span",{className:"text-[10px] text-gray-400",children:"count"})]})})()]},s.id)),e.jsx("div",{className:"bg-white"})]})]})]},t.id)})})]}),e.jsx(Ut,{children:Pe>0&&e.jsx(Ke.div,{className:"fixed bottom-16 md:bottom-20 left-0 right-0 px-4 z-50 pointer-events-none",initial:{opacity:0,y:16,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:16,scale:.98},transition:{duration:.18,ease:"easeOut"},children:e.jsx(Ke.div,{className:"mx-auto max-w-5xl bg-white shadow-2xl border border-gray-200 rounded-2xl px-6 py-3 flex items-center gap-6 pointer-events-auto justify-center",initial:{opacity:0,y:8},animate:{opacity:1,y:0},exit:{opacity:0,y:8},transition:{duration:.18,ease:"easeOut",delay:.02},children:e.jsx("div",{className:"flex items-center gap-5 text-sm text-gray-600 flex-wrap md:flex-nowrap justify-center w-full",children:e.jsxs("div",{className:"flex items-center gap-5 flex-wrap md:flex-nowrap justify-center",children:[e.jsxs("button",{className:"flex items-center gap-2 hover:text-gray-900 whitespace-nowrap text-gray-700",onClick:It,children:[e.jsx(ct,{size:18,className:"text-gray-700"})," ",e.jsx("span",{children:"Duplicate"})]}),e.jsxs("button",{className:"flex items-center gap-2 hover:text-gray-900 whitespace-nowrap text-gray-700",children:[e.jsx(Wt,{size:18,className:"text-gray-700"})," ",e.jsx("span",{children:"Export"})]}),e.jsxs("button",{className:"flex items-center gap-2 hover:text-gray-900 whitespace-nowrap text-gray-700",children:[e.jsx(as,{size:18,className:"text-gray-700"})," ",e.jsx("span",{children:"Archive"})]}),e.jsxs("button",{className:"flex items-center gap-2 hover:text-gray-900 whitespace-nowrap text-gray-700",onClick:zt,children:[e.jsx(it,{size:18,className:"text-gray-700"})," ",e.jsx("span",{children:"Delete"})]}),e.jsxs("button",{className:"flex items-center gap-2 text-gray-400 cursor-not-allowed whitespace-nowrap",disabled:!0,children:[e.jsx(Qe,{size:18,className:"text-gray-400"})," ",e.jsx("span",{children:"Convert"})]}),e.jsxs("button",{className:"flex items-center gap-2 hover:text-gray-900 whitespace-nowrap text-gray-700",children:[e.jsx(Qe,{size:18,className:"text-gray-700"})," ",e.jsx("span",{children:"Move to"})]}),e.jsxs("button",{className:"flex items-center gap-2 hover:text-gray-900 whitespace-nowrap text-gray-700",children:[e.jsx(Ze,{size:18,className:"text-gray-700"})," ",e.jsx("span",{children:"Sidekick"})]}),e.jsxs("button",{className:"flex items-center gap-2 hover:text-gray-900 whitespace-nowrap text-gray-700",children:[e.jsx(Je,{size:18,className:"text-gray-700"})," ",e.jsx("span",{children:"Apps"})]}),e.jsxs("button",{className:"flex items-center gap-2 hover:text-gray-900 whitespace-nowrap text-gray-700",onClick:St,children:[e.jsx(ke,{size:18,className:"text-gray-700"})," ",e.jsx("span",{children:"Clear"})]})]})})})})}),e.jsx("div",{className:"absolute bottom-6 left-1/2 transform -translate-x-1/2 w-full max-w-2xl px-4",children:e.jsxs("div",{className:"bg-white/90 backdrop-blur-md rounded-full shadow-2xl border border-white/50 p-2 flex items-center gap-3 pl-5 transition-all focus-within:ring-4 ring-indigo-500/10",children:[e.jsx(Ae,{className:"text-indigo-500 w-5 h-5 animate-pulse"}),e.jsx("input",{type:"text",value:C,onChange:t=>z(t.target.value),onKeyDown:t=>t.key==="Enter"&&Ce(),placeholder:"Ask AI to build a plan (e.g. 'Plan a product launch for next month')",className:"flex-1 bg-transparent focus:outline-none text-sm text-gray-800 py-2 placeholder-gray-500"}),e.jsx("button",{onClick:Ce,disabled:b||!C,className:"bg-indigo-600 text-white rounded-full px-6 py-2.5 text-sm font-medium hover:bg-indigo-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-all hover:shadow-lg flex items-center gap-2",children:b?e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):e.jsx("span",{children:"Generate"})})]})})]}),he&&e.jsx(Vs,{x:he.x,y:he.y,onClose:()=>Te(null),onAction:t=>yt(t,he.groupId,he.colId)}),H&&de.createPortal(e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-[9998] bg-transparent",onClick:t=>{t.stopPropagation(),q(null)}}),e.jsx("div",{className:"fixed z-[9999]",style:{top:H.rect.bottom+8,left:H.rect.left+H.rect.width/2,transform:"translateX(-50%)"},onClick:t=>t.stopPropagation(),children:e.jsx(As,{date:H.date,onSelect:t=>{H.onSelect(t)},onClose:()=>q(null)})})]}),document.body),K&&de.createPortal(e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-[9998] bg-transparent",onClick:t=>{t.stopPropagation(),pe(null)}}),e.jsx("div",{className:"fixed top-[100px] bottom-0 right-0 z-[9999]",onClick:t=>t.stopPropagation(),children:e.jsx(Kt,{onClose:()=>pe(null),onSelect:(t,i,p,k)=>{K&&te(K.groupId,t,i,p,k),pe(null)}})})]}),document.body),ze&&e.jsx(Es,{isOpen:!!ze,onClose:()=>Oe(null),group:m.groups.find(t=>t.id===ze)}),Ie&&e.jsx(Ls,{isOpen:!!Ie,onClose:()=>Ge(null),group:m.groups.find(t=>t.id===Ie)})]})};export{Ds as P,_ as S,ir as T,Ee as a,_s as u};
