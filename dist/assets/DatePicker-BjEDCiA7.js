import{r as m,R as Y,j as e,k as S,C as k,z as A}from"./index-DYCMOhyY.js";const J=({date:u,startDate:x,onSelect:f,onClose:b,darkMode:I,className:W="",compact:w=!1})=>{const[s,p]=m.useState("due"),[n,D]=m.useState(new Date),[l,j]=m.useState(u?new Date(u):null),[o,v]=m.useState(x?new Date(x):null),{ref:C}=Y({onCancel:b,initialActive:!0});m.useEffect(()=>{u&&j(new Date(u)),x&&v(new Date(x))},[u,x]);const M=(r,a)=>new Date(r,a+1,0).getDate(),T=(r,a)=>new Date(r,a,1).getDay(),$=r=>{const a=n.getFullYear(),y=n.getMonth(),d=new Date(a,y,r),c=d.getTimezoneOffset(),t=new Date(d.getTime()-c*60*1e3).toISOString().split("T")[0];s==="due"?(f(t,"due"),j(d)):(f(t,"start"),v(d),p("due"))},O=()=>{const r=n.getFullYear(),a=n.getMonth(),y=M(r,a),d=T(r,a),c=[];["Su","Mo","Tu","We","Th","Fr","Sa"].forEach(t=>{c.push(e.jsx("div",{className:"text-center text-xs font-medium py-2 text-gray-400",children:t},`header-${t}`))});for(let t=0;t<d;t++)c.push(e.jsx("div",{className:"w-8 h-8"},`empty-${t}`));for(let t=1;t<=y;t++){const i=new Date(r,a,t),L=new Date().toDateString()===i.toDateString();let g=!1,h=!1;s==="due"&&l&&i.toDateString()===l.toDateString()&&(g=!0),s==="start"&&o&&i.toDateString()===o.toDateString()&&(g=!0),o&&l&&(i>o&&i<l&&(h=!0),s==="due"&&o&&i.toDateString()===o.toDateString()&&(h=!0),s==="start"&&l&&i.toDateString()===l.toDateString()&&(h=!0)),c.push(e.jsx("button",{onClick:()=>$(t),className:`
                        w-8 h-8 text-sm rounded-full flex items-center justify-center transition-all relative
                        ${g?"bg-red-500 text-white font-medium shadow-sm z-10":"hover:bg-gray-100 text-gray-700"}
                        ${L&&!g?"text-red-500 font-medium":""}
                        ${h&&!g?"bg-purple-50 text-purple-700 rounded-none first:rounded-l-full last:rounded-r-full":""}
                    `,children:t},t))}return c},R=()=>D(new Date(n.getFullYear(),n.getMonth()+1,1)),F=()=>D(new Date(n.getFullYear(),n.getMonth()-1,1)),N=r=>r?r.toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"}):"",z=[{label:"Today",sub:"Tue"},{label:"Later",sub:"11:40 am"},{label:"Tomorrow",sub:"Wed"},{label:"This weekend",sub:"Sat"},{label:"Next week",sub:"Mon"},{label:"Next weekend",sub:"20 Dec"},{label:"2 weeks",sub:"23 Dec"},{label:"4 weeks",sub:"6 Jan"}];return e.jsx("div",{ref:C,className:`rounded-xl shadow-2xl bg-white border border-gray-200 flex overflow-hidden animate-in fade-in zoom-in-95 duration-200 ${w?"flex-col w-[320px]":"w-[640px]"}`,children:e.jsxs("div",{className:"flex flex-1",children:[!w&&e.jsxs("div",{className:"w-48 border-r border-gray-100 bg-gray-50/30 flex flex-col",children:[e.jsx("div",{className:"p-2 space-y-0.5",children:z.map((r,a)=>e.jsxs("button",{className:"w-full flex items-center justify-between px-3 py-2 rounded-md hover:bg-gray-100/80 text-left group",children:[e.jsx("span",{className:"text-sm text-gray-700 font-medium",children:r.label}),e.jsx("span",{className:"text-xs text-gray-400 group-hover:text-gray-500",children:r.sub})]},a))}),e.jsx("div",{className:"mt-auto border-t border-gray-100",children:e.jsxs("button",{className:"w-full flex items-center justify-between px-4 py-3 hover:bg-gray-50 text-left text-sm font-medium text-gray-700",children:["Set Recurring ",e.jsx(S,{className:"w-4 h-4 text-gray-400"})]})})]}),e.jsxs("div",{className:"flex-1 flex flex-col p-4 bg-white",children:[e.jsxs("div",{className:"flex gap-2 mb-4",children:[e.jsxs("div",{onClick:()=>p("start"),className:`flex-1 flex items-center gap-2 p-2 rounded-md border cursor-pointer transition-all ${s==="start"?"border-purple-500 ring-1 ring-purple-500 bg-purple-50/10":"border-gray-200 hover:border-gray-300 bg-gray-50"}`,children:[e.jsx(k,{className:`w-4 h-4 ${s==="start"?"text-purple-600":"text-gray-400"}`}),e.jsx("input",{type:"text",readOnly:!0,value:o?N(o):"",placeholder:"Start date",className:"bg-transparent outline-none text-sm w-full cursor-pointer text-gray-700 font-medium placeholder:font-normal"})]}),e.jsxs("div",{onClick:()=>p("due"),className:`flex-1 flex items-center gap-2 p-2 rounded-md border cursor-pointer transition-all ${s==="due"?"border-purple-500 ring-1 ring-purple-500 bg-purple-50/10":"border-gray-200 hover:border-gray-300 bg-gray-50"}`,children:[e.jsx(k,{className:`w-4 h-4 ${s==="due"?"text-purple-600":"text-gray-400"}`}),e.jsx("div",{className:"w-px h-4 bg-gray-300 mx-1"})," ",e.jsx("input",{type:"text",readOnly:!0,value:l?N(l):"",placeholder:"Due date",className:"bg-transparent outline-none text-sm w-full cursor-pointer text-gray-700 font-medium placeholder:font-normal"})]})]}),e.jsxs("div",{className:"flex items-center justify-between mb-2 px-1",children:[e.jsxs("div",{className:"flex items-center gap-2 font-bold text-gray-900",children:[n.toLocaleDateString(void 0,{month:"long",year:"numeric"}),e.jsx("span",{className:"text-xs font-normal text-gray-400 cursor-pointer hover:text-gray-600 px-1.5 py-0.5 rounded hover:bg-gray-100",children:"Today"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:F,className:"p-1 hover:bg-gray-100 rounded text-gray-400 hover:text-gray-600",children:e.jsx(A,{className:"w-5 h-5"})}),e.jsx("button",{onClick:R,className:"p-1 hover:bg-gray-100 rounded text-gray-400 hover:text-gray-600",children:e.jsx(S,{className:"w-5 h-5"})})]})]}),e.jsx("div",{className:"grid grid-cols-7 gap-y-1",children:O()}),e.jsx("div",{className:"mt-auto pt-4 flex justify-between items-center",children:e.jsx("button",{onClick:()=>{f("","due"),f("","start"),b()},className:"text-xs font-medium text-gray-400 hover:text-gray-600",children:"Clear"})})]})]})})};export{J as D};
