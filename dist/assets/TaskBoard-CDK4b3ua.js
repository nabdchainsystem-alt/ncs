import{c as q,r as w,ag as se,j as e,C as Ot,w as Vt,g as at,aC as Gt,aj as Rt,Z as Bt,aP as Ht,T as Ee,X as Ne,aQ as je,i as nt,at as it,u as Ut,L as ot,n as ue,k as lt,P as dt,a5 as Wt,J as ct,E as qt,ay as Yt,aw as Me,aR as Kt,aS as xt,a2 as Jt,R as Xt,e as Zt,a9 as Qt,a3 as Mt,aT as es,G as ts,aU as ss}from"./index-DK7_M6Tf.js";import{T as ge}from"./index-Ca_DMGSD.js";import{P as rs,T as as,G as ns,S as is,v as os,C as ls,b as ds,u as cs,a as et}from"./sortable.esm-DN4Hw5B8.js";import{C as gt}from"./copy-Dbfsq9yB.js";import{r as xs}from"./remindersService-Cc0gC_Hz.js";import{g as gs}from"./goalsService-CHRyOQMd.js";import{S as us}from"./square-check-big-CECGp4fJ.js";import{L as hs}from"./list-Byk9ZAme.js";import{L as ms}from"./list-ordered-Bpm7Xqs-.js";import{F as ut}from"./flag-DZJGz3Hi.js";import{u as ps,a as ys,P as bs,D as fs,g as ws,C as vs}from"./core.esm-CqkBkiy_.js";import{S as ht}from"./star-CjddD0wI.js";import{P as js}from"./phone-fE_mEW86.js";import{T as Ns}from"./tag-BnAhU3qo.js";/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $s=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],Cs=q("archive",$s);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ss=[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"M20 8h-5",key:"1vsyxs"}],["path",{d:"M15 10V6.5a2.5 2.5 0 0 1 5 0V10",key:"ag13bf"}],["path",{d:"M15 14h5l-5 6h5",key:"ur5jdg"}]],Ds=q("arrow-down-a-z",Ss);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zs=[["path",{d:"M3 19V5",key:"rwsyhb"}],["path",{d:"m13 6-6 6 6 6",key:"1yhaz7"}],["path",{d:"M7 12h14",key:"uoisry"}]],ks=q("arrow-left-to-line",zs);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Is=[["path",{d:"M17 12H3",key:"8awo09"}],["path",{d:"m11 18 6-6-6-6",key:"8c2y43"}],["path",{d:"M21 5v14",key:"nzette"}]],Ts=q("arrow-right-to-line",Is);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ps=[["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}],["path",{d:"M15 4h5l-5 6h5",key:"8asdl1"}],["path",{d:"M15 20v-3.5a2.5 2.5 0 0 1 5 0V20",key:"r6l5cz"}],["path",{d:"M20 18h-5",key:"18j1r2"}]],_s=q("arrow-up-z-a",Ps);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const As=[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"m17 12 3-2v8",key:"1hhhft"}]],Es=q("heading-1",As);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ls=[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M21 18h-4c0-4 4-3 4-6 0-1.5-2-2.5-4-1",key:"9jr5yi"}]],Fs=q("heading-2",Ls);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Os=[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M17.5 10.5c1.7-1 3.5 0 3.5 1.5a2 2 0 0 1-2 2",key:"68ncm8"}],["path",{d:"M17 17.5c2 1.5 4 .3 4-1.5a2 2 0 0 0-2-2",key:"1ejuhz"}]],Vs=q("heading-3",Os);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gs=[["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M17 10v3a1 1 0 0 0 1 1h3",key:"tj5zdr"}],["path",{d:"M21 10v8",key:"1kdml4"}],["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}]],Rs=q("heading-4",Gs);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bs=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]],mt=q("maximize-2",Bs);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hs=[["path",{d:"M14 14a2 2 0 0 0 2-2V8h-2",key:"1r06pg"}],["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}],["path",{d:"M8 14a2 2 0 0 0 2-2V8H8",key:"1jzu5j"}]],Us=q("message-square-quote",Hs);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ws=[["path",{d:"M18 8L22 12L18 16",key:"1r0oui"}],["path",{d:"M2 12H22",key:"1m8cig"}]],tt=q("move-right",Ws);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qs=[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]],Ys=q("pin",qs);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ks=[["path",{d:"M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"rib7q0"}],["path",{d:"M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"1ymkrd"}]],Js=q("quote",Ks);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xs=[["circle",{cx:"9",cy:"12",r:"3",key:"u3jwor"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]],Zs=q("toggle-left",Xs);var O=(r=>(r.New="New",r.Pending="Pending",r.Working="Working on it",r.Stuck="Stuck",r.AlmostFinish="Almost Finish",r.Done="Done",r))(O||{}),ie=(r=>(r.Normal="Normal",r.Low="Low",r.Medium="Medium",r.High="High",r.Urgent="Urgent",r))(ie||{});const pt={New:"bg-gradient-to-r from-[#A0A5B9] to-[#8D92A6] text-white shadow-sm",Pending:"bg-gradient-to-r from-[#FFD940] to-[#FFCC00] text-white shadow-sm","Working on it":"bg-gradient-to-r from-[#FFBE66] to-[#FFA533] hover:from-[#FFA533] hover:to-[#FF991F] text-white shadow-sm",Stuck:"bg-gradient-to-r from-[#FF7085] to-[#FF526B] hover:from-[#FF526B] hover:to-[#FF3352] text-white shadow-sm","Almost Finish":"bg-gradient-to-r from-[#C48AF0] to-[#B06CE0] text-white shadow-sm",Done:"bg-gradient-to-r from-[#33D995] to-[#00C875] hover:from-[#00C875] hover:to-[#00B067] text-white shadow-sm"},Qs={New:"bg-gradient-to-r from-slate-700 to-slate-600 text-white shadow-sm border border-white/10",Pending:"bg-gradient-to-r from-yellow-700 to-yellow-600 text-white shadow-sm border border-white/10","Working on it":"bg-gradient-to-r from-orange-700 to-orange-600 text-white shadow-sm border border-white/10",Stuck:"bg-gradient-to-r from-red-700 to-red-600 text-white shadow-sm border border-white/10","Almost Finish":"bg-gradient-to-r from-purple-700 to-purple-600 text-white shadow-sm border border-white/10",Done:"bg-gradient-to-r from-emerald-700 to-emerald-600 text-white shadow-sm border border-white/10"},$e={Normal:"bg-gradient-to-r from-[#D9D9D9] to-[#C4C4C4] text-white shadow-sm",Low:"bg-gradient-to-r from-[#82B4FF] to-[#579BFC] text-white shadow-sm",Medium:"bg-gradient-to-r from-[#FFBE66] to-[#FFA533] text-white shadow-sm",High:"bg-gradient-to-r from-[#7048C4] to-[#552CB0] text-white shadow-sm",Urgent:"bg-gradient-to-r from-[#FF7085] to-[#FF526B] text-white shadow-sm"},Ms={Normal:"bg-gradient-to-r from-slate-700 to-slate-600 text-white shadow-sm border border-white/10",Low:"bg-gradient-to-r from-blue-700 to-blue-600 text-white shadow-sm border border-white/10",Medium:"bg-gradient-to-r from-orange-700 to-orange-600 text-white shadow-sm border border-white/10",High:"bg-gradient-to-r from-purple-700 to-purple-600 text-white shadow-sm border border-white/10",Urgent:"bg-gradient-to-r from-red-700 to-red-600 text-white shadow-sm border border-white/10"},Ie=["#3B82F6","#10B981","#F59E0B","#EC4899","#8B5CF6","#0EA5E9","#7C3AED"],st=[{id:"p1",name:"Max",initials:"MA",color:"bg-gradient-to-br from-blue-400 to-blue-600"},{id:"p2",name:"Hasan",initials:"HA",color:"bg-gradient-to-br from-emerald-400 to-emerald-600"},{id:"p3",name:"Sarah",initials:"SA",color:"bg-gradient-to-br from-purple-400 to-purple-600"},{id:"p4",name:"John",initials:"JO",color:"bg-gradient-to-br from-amber-400 to-amber-600"}],ve={id:"board-1",name:"Task Board",groups:[{id:"group-1",title:"New Group",color:"#579bfc",columns:[{id:"col_name",title:"Item",type:"name",width:"300px"},{id:"col_person",title:"Owner",type:"person",width:"96px"},{id:"col_status",title:"Status",type:"status",width:"128px"},{id:"col_priority",title:"Priority",type:"priority",width:"128px"},{id:"col_date",title:"Due Date",type:"date",width:"110px"}],tasks:[]}]};ge.OBJECT,ge.ARRAY,ge.OBJECT,ge.STRING,ge.STRING,ge.INTEGER,ge.STRING;const er=async r=>(console.warn("Gemini API key is missing. AI features are disabled."),null),tr=async r=>"AI features are disabled (missing API key).",sr=r=>{const[c,d]=w.useState(()=>{try{if(typeof window<"u"){const h=localStorage.getItem(r);if(h){const o=JSON.parse(h);if(o.columns&&Array.isArray(o.columns)&&o.groups){const p=o.groups.map(m=>({...m,columns:m.columns||[...o.columns]}));return{...o,groups:p}}if(o.groups&&Array.isArray(o.groups)){const p=o.groups.map(m=>m.columns&&Array.isArray(m.columns)?m:{...m,columns:[{id:"col_name",title:"Item",type:"name",width:"300px"},{id:"col_person",title:"Owner",type:"person",width:"96px"},{id:"col_status",title:"Status",type:"status",width:"128px"},{id:"col_priority",title:"Priority",type:"priority",width:"128px"},{id:"col_date",title:"Due Date",type:"date",width:"110px"}]});return{...o,groups:p}}}}}catch(h){console.warn("Failed to load saved board",h)}return ve}),[s,i]=w.useState(""),[y,v]=w.useState(!1),[j,N]=w.useState(null);w.useEffect(()=>{try{if(typeof window<"u"){const h=localStorage.getItem(r);if(h){const o=JSON.parse(h);if(o.columns&&Array.isArray(o.columns)&&o.groups){const p=o.groups.map(m=>({...m,columns:m.columns||[...o.columns]}));d({...o,groups:p});return}if(o.groups&&Array.isArray(o.groups)){const p=o.groups.map(m=>m.columns&&Array.isArray(m.columns)?m:{...m,columns:[{id:"col_name",title:"Item",type:"name",width:"300px"},{id:"col_person",title:"Owner",type:"person",width:"96px"},{id:"col_status",title:"Status",type:"status",width:"128px"},{id:"col_priority",title:"Priority",type:"priority",width:"128px"},{id:"col_date",title:"Due Date",type:"date",width:"110px"}]});d({...o,groups:p});return}d(o)}else d(ve)}}catch(h){console.warn("Failed to load saved board on key change",h),d(ve)}},[r]),w.useEffect(()=>{try{localStorage.setItem(r,JSON.stringify(c))}catch(h){console.warn("Failed to save board",h)}},[c,r]);const x=(h,o,p)=>{d(m=>({...m,groups:m.groups.map(k=>k.id!==h?k:{...k,tasks:k.tasks.map(A=>A.id===o?{...A,...p}:A)})}))},n=(h,o,p)=>{x(h,o,{selected:p})},z=(h,o)=>{d(p=>({...p,groups:p.groups.map(m=>h!=="all"&&m.id!==h?m:{...m,tasks:m.tasks.map(k=>({...k,selected:o}))})}))},C=(h,o,p,m)=>{d(k=>({...k,groups:k.groups.map(A=>A.id!==h?A:{...A,tasks:A.tasks.map(M=>M.id!==o?M:{...M,textValues:{...M.textValues,[p]:m}})})}))},I=(h,o,p)=>{const m={id:se(),name:(o==null?void 0:o.trim())||"New Item",status:O.New,priority:ie.Normal,dueDate:new Date().toISOString().split("T")[0],personId:null,textValues:{},selected:!1,...p};d(k=>({...k,groups:k.groups.map(A=>A.id===h?{...A,tasks:[...A.tasks,m]}:A)}))},L=(h,o)=>{d(p=>({...p,groups:p.groups.map(m=>m.id===h?{...m,tasks:m.tasks.filter(k=>k.id!==o)}:m)}))},g=()=>{const h={id:se(),title:"New Group",color:Ie[c.groups.length%Ie.length],columns:[{id:"col_name",title:"Item",type:"name",width:"300px"},{id:"col_person",title:"Owner",type:"person",width:"96px"},{id:"col_status",title:"Status",type:"status",width:"128px"},{id:"col_priority",title:"Priority",type:"priority",width:"128px"},{id:"col_date",title:"Due Date",type:"date",width:"110px"}],tasks:[]};d(o=>({...o,groups:[...o.groups,h]}))},D=h=>{d(o=>({...o,groups:o.groups.filter(p=>p.id!==h)}))},U=(h,o)=>{d(p=>({...p,groups:p.groups.map(m=>m.id===h?{...m,title:o}:m)}))},V=h=>{d(o=>({...o,groups:o.groups.map(p=>p.id===h?{...p,isPinned:!p.isPinned}:p)}))},E=(h,o="text",p="New Column",m,k)=>{const M={id:`col_${se().slice(0,4)}`,title:p,type:o,width:"140px",options:m,currency:k};d(Y=>({...Y,groups:Y.groups.map(de=>de.id===h?{...de,columns:[...de.columns,M]}:de)}))},F=(h,o,p)=>{d(m=>({...m,groups:m.groups.map(k=>k.id!==h?k:{...k,columns:k.columns.map(A=>A.id===o?{...A,title:p}:A)})}))},J=(h,o,p)=>{d(m=>({...m,groups:m.groups.map(k=>k.id!==h?k:{...k,columns:k.columns.map(A=>A.id===o?{...A,width:`${p}px`}:A)})}))},X=(h,o)=>{d(p=>({...p,groups:p.groups.map(m=>m.id!==h?m:{...m,columns:m.columns.filter(k=>k.id!==o)})}))},ae=(h,o)=>{d(p=>({...p,groups:p.groups.map(m=>{if(m.id!==h)return m;const k=m.columns.findIndex(de=>de.id===o);if(k===-1)return m;const A=m.columns[k],M={...A,id:`col_${se().slice(0,4)}`,title:`${A.title} (Copy)`},Y=[...m.columns];return Y.splice(k+1,0,M),{...m,columns:Y}})}))},l=(h,o,p)=>{d(m=>{const k=m.groups.find(Y=>Y.id===h);if(!k)return m;const A=[...k.columns],[M]=A.splice(o,1);return A.splice(p,0,M),{...m,groups:m.groups.map(Y=>Y.id!==h?Y:{...Y,columns:A})}})};return{board:c,setBoard:d,aiPrompt:s,setAiPrompt:i,isAiLoading:y,aiAnalysis:j,setAiAnalysis:N,updateTask:x,toggleTaskSelection:n,toggleGroupSelection:z,updateTaskTextValue:C,addTask:I,deleteTask:L,addGroup:g,deleteGroup:D,updateGroupTitle:U,toggleGroupPin:V,addColumn:E,updateColumnTitle:F,updateColumnWidth:J,deleteColumn:X,duplicateColumn:ae,moveColumn:l,reorderColumn:(h,o,p)=>{l(h,o,p)},handleGeneratePlan:async()=>{if(!s.trim())return;v(!0),N(null);const h=await er();if(h){const o=new Date,p=h.tasks.map(k=>{const A=new Date(o);return A.setDate(o.getDate()+k.dueDateOffsetDays),{id:se(),name:k.name,status:O.New,priority:k.priority||ie.Medium,dueDate:A.toISOString().split("T")[0],personId:null,textValues:{}}}),m={id:se(),title:h.groupName||"AI Generated Plan",color:Ie[Math.floor(Math.random()*Ie.length)],tasks:p,columns:[{id:"col_name",title:"Item",type:"name",width:"300px"},{id:"col_person",title:"Owner",type:"person",width:"96px"},{id:"col_status",title:"Status",type:"status",width:"128px"},{id:"col_priority",title:"Priority",type:"priority",width:"128px"},{id:"col_date",title:"Due Date",type:"date",width:"110px"}]};d(k=>({...k,groups:[m,...k.groups]})),i("")}v(!1)},handleAnalyzeBoard:async()=>{v(!0),c.groups.map(o=>`Group: ${o.title}. Tasks: ${o.tasks.map(p=>`${p.name} (${p.status})`).join(", ")}`).join(`
`);const h=await tr();N(h),v(!1)}}},rr=({date:r,onSelect:c,onClose:d,darkMode:s})=>{const[i,y]=w.useState(new Date),[v,j]=w.useState(r?new Date(r):null);w.useEffect(()=>{if(r){const g=new Date(r);j(g),y(g)}},[r]);const N=(g,D)=>new Date(g,D+1,0).getDate(),x=(g,D)=>new Date(g,D,1).getDay(),n=()=>{const g=i.getFullYear(),D=i.getMonth(),U=N(g,D),V=x(g,D),E=[];for(let F=0;F<V;F++)E.push(e.jsx("div",{className:"w-8 h-8"},`empty-${F}`));for(let F=1;F<=U;F++){const J=new Date(g,D,F),X=v&&J.toDateString()===v.toDateString(),ae=new Date().toDateString()===J.toDateString();E.push(e.jsx("button",{onClick:()=>{const l=new Date(g,D,F),Z=l.getTimezoneOffset(),Q=new Date(l.getTime()-Z*60*1e3);c(Q.toISOString().split("T")[0]),d()},className:`w-8 h-8 text-xs rounded-full flex items-center justify-center transition-all
                        ${X?"bg-red-500 text-white font-bold shadow-md":s?"text-gray-300 hover:bg-white/10":"text-gray-700 hover:bg-gray-100"}
                        ${ae&&!X?"text-red-500 font-bold":""}
                    `,children:F},F))}return E},z=()=>{y(new Date(i.getFullYear(),i.getMonth()+1,1))},C=()=>{y(new Date(i.getFullYear(),i.getMonth()-1,1))},I=g=>{const D=new Date;D.setDate(D.getDate()+g);const U=D.getTimezoneOffset(),V=new Date(D.getTime()-U*60*1e3);c(V.toISOString().split("T")[0]),d()},L=[{label:"Today",days:0,sub:"Sun"},{label:"Later",days:7,sub:"8:53 pm"},{label:"Tomorrow",days:1,sub:"Mon"},{label:"Next week",days:7,sub:"Mon"},{label:"Next weekend",days:6,sub:"Sat"},{label:"2 weeks",days:14,sub:"14 Dec"},{label:"4 weeks",days:28,sub:"28 Dec"},{label:"8 weeks",days:56,sub:"25 Jan"}];return e.jsxs("div",{className:`rounded-xl shadow-2xl border flex overflow-hidden w-[500px] animate-in fade-in zoom-in-95 duration-200 ${s?"bg-[#1a1d24] border-gray-700":"bg-white border-gray-200"}`,children:[e.jsxs("div",{className:`w-48 border-r p-2 flex flex-col gap-1 ${s?"bg-[#1a1d24] border-gray-700":"bg-gray-50/50 border-gray-100"}`,children:[e.jsxs("div",{className:`px-3 py-2 mb-2 border-b ${s?"border-gray-700":"border-gray-100"}`,children:[e.jsxs("div",{className:`flex items-center text-xs font-medium mb-1 ${s?"text-gray-500":"text-gray-400"}`,children:[e.jsx(Ot,{size:12,className:"mr-2"}),e.jsx("span",{children:"Date"})]}),e.jsx("div",{className:`text-sm font-bold ${s?"text-gray-200":"text-gray-800"}`,children:v?v.toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"}):"Set Date"})]}),e.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar",children:L.map((g,D)=>e.jsxs("button",{onClick:()=>I(g.days),className:`w-full flex items-center justify-between px-3 py-2 rounded-lg transition-colors group text-left ${s?"hover:bg-white/5":"hover:bg-gray-100"}`,children:[e.jsx("span",{className:`text-sm font-medium group-hover:text-gray-900 ${s?"text-gray-300 group-hover:text-white":"text-gray-700"}`,children:g.label}),e.jsx("span",{className:`text-xs group-hover:text-gray-500 ${s?"text-gray-500 group-hover:text-gray-400":"text-gray-400"}`,children:g.sub})]},D))})]}),e.jsxs("div",{className:`flex-1 p-4 ${s?"bg-[#1a1d24]":"bg-white"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`text-sm font-bold ${s?"text-gray-200":"text-gray-900"}`,children:i.toLocaleDateString(void 0,{month:"long",year:"numeric"})}),e.jsx("span",{className:`text-xs font-medium cursor-pointer ${s?"text-gray-500 hover:text-gray-300":"text-gray-400 hover:text-gray-600"}`,children:"Today"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:C,className:`p-1 rounded-full transition-colors ${s?"hover:bg-white/10 text-gray-400 hover:text-gray-200":"hover:bg-gray-100 text-gray-400 hover:text-gray-600"}`,children:e.jsx(Vt,{size:16})}),e.jsx("button",{onClick:z,className:`p-1 rounded-full transition-colors ${s?"hover:bg-white/10 text-gray-400 hover:text-gray-200":"hover:bg-gray-100 text-gray-400 hover:text-gray-600"}`,children:e.jsx(at,{size:16})})]})]}),e.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:["Su","Mo","Tu","We","Th","Fr","Sa"].map(g=>e.jsx("div",{className:`text-center text-xs font-medium py-1 ${s?"text-gray-500":"text-gray-400"}`,children:g},g))}),e.jsx("div",{className:"grid grid-cols-7 gap-1",children:n()}),e.jsxs("div",{className:`mt-4 pt-4 border-t flex justify-between items-center ${s?"border-gray-700":"border-gray-100"}`,children:[e.jsx("button",{onClick:()=>{c(""),d()},className:`text-xs font-medium transition-colors ${s?"text-gray-500 hover:text-red-400":"text-gray-400 hover:text-red-500"}`,children:"Clear"}),e.jsx("button",{onClick:d,className:`px-3 py-1 text-xs font-bold rounded-md transition-colors ${s?"bg-white text-black hover:bg-gray-200":"bg-black text-white hover:bg-gray-800"}`,children:"Done"})]})]})]})},ar=({x:r,y:c,onClose:d,onAction:s,darkMode:i})=>{let j=r,N=c;typeof window<"u"&&(r+256>window.innerWidth&&(j=r-256),c+400>window.innerHeight&&(N=c-400));const x={top:N,left:j},n=z=>{s(z),d()};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-50 bg-transparent",onClick:d,onContextMenu:z=>{z.preventDefault(),d()}}),e.jsx("div",{className:`fixed z-50 rounded-lg shadow-xl border w-64 py-2 animate-in fade-in zoom-in-95 duration-100 ${i?"bg-[#1a1d24] border-gray-700":"bg-white border-gray-200"}`,style:x,onClick:z=>z.stopPropagation(),children:e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("button",{onClick:()=>n("sort_asc"),className:`flex items-center px-4 py-2 text-sm gap-3 ${i?"hover:bg-white/5 text-gray-300":"hover:bg-gray-50 text-gray-700"}`,children:[e.jsx(Ds,{size:16,className:"text-gray-500"}),e.jsx("span",{children:"Sort ascending"})]}),e.jsxs("button",{onClick:()=>n("sort_desc"),className:`flex items-center px-4 py-2 text-sm gap-3 ${i?"hover:bg-white/5 text-gray-300":"hover:bg-gray-50 text-gray-700"}`,children:[e.jsx(_s,{size:16,className:"text-gray-500"}),e.jsx("span",{children:"Sort descending"})]}),e.jsxs("button",{onClick:()=>n("group"),className:`flex items-center px-4 py-2 text-sm gap-3 ${i?"hover:bg-white/5 text-gray-300":"hover:bg-gray-50 text-gray-700"}`,children:[e.jsx(Gt,{size:16,className:"text-gray-500"}),e.jsx("span",{children:"Group by this field"})]}),e.jsx("div",{className:`h-px my-1 ${i?"bg-gray-700":"bg-gray-100"}`}),e.jsxs("button",{onClick:()=>n("rename"),className:`flex items-center px-4 py-2 text-sm gap-3 ${i?"hover:bg-white/5 text-gray-300":"hover:bg-gray-50 text-gray-700"}`,children:[e.jsx(rs,{size:16,className:"text-gray-500"}),e.jsx("span",{children:"Edit field"})]}),e.jsxs("button",{onClick:()=>n("permissions"),className:`flex items-center px-4 py-2 text-sm gap-3 ${i?"hover:bg-white/5 text-gray-300":"hover:bg-gray-50 text-gray-700"}`,children:[e.jsx(Rt,{size:16,className:"text-gray-500"}),e.jsx("span",{children:"Privacy and permissions"})]}),e.jsx("div",{className:`h-px my-1 ${i?"bg-gray-700":"bg-gray-100"}`}),e.jsxs("button",{onClick:()=>n("move_start"),className:`flex items-center px-4 py-2 text-sm gap-3 ${i?"hover:bg-white/5 text-gray-300":"hover:bg-gray-50 text-gray-700"}`,children:[e.jsx(ks,{size:16,className:"text-gray-500"}),e.jsx("span",{children:"Move to start"})]}),e.jsxs("button",{onClick:()=>n("move_end"),className:`flex items-center px-4 py-2 text-sm gap-3 ${i?"hover:bg-white/5 text-gray-300":"hover:bg-gray-50 text-gray-700"}`,children:[e.jsx(Ts,{size:16,className:"text-gray-500"}),e.jsx("span",{children:"Move to end"})]}),e.jsxs("button",{onClick:()=>n("automate"),className:`flex items-center px-4 py-2 text-sm gap-3 ${i?"hover:bg-white/5 text-gray-300":"hover:bg-gray-50 text-gray-700"}`,children:[e.jsx(Bt,{size:16,className:"text-gray-500"}),e.jsx("span",{children:"Automate"})]}),e.jsx("div",{className:`h-px my-1 ${i?"bg-gray-700":"bg-gray-100"}`}),e.jsxs("button",{onClick:()=>n("hide"),className:`flex items-center px-4 py-2 text-sm gap-3 ${i?"hover:bg-white/5 text-gray-300":"hover:bg-gray-50 text-gray-700"}`,children:[e.jsx(Ht,{size:16,className:"text-gray-500"}),e.jsx("span",{children:"Hide column"})]}),e.jsxs("button",{onClick:()=>n("duplicate"),className:`flex items-center px-4 py-2 text-sm gap-3 ${i?"hover:bg-white/5 text-gray-300":"hover:bg-gray-50 text-gray-700"}`,children:[e.jsx(gt,{size:16,className:"text-gray-500"}),e.jsx("span",{children:"Duplicate"})]}),e.jsxs("button",{onClick:()=>n("delete"),className:`flex items-center px-4 py-2 text-sm gap-3 ${i?"hover:bg-white/5 text-red-400":"hover:bg-red-50 text-red-600"}`,children:[e.jsx(Ee,{size:16,className:"text-red-500"}),e.jsx("span",{children:"Delete field"})]})]})})]})},nr=({isOpen:r,onClose:c,group:d,darkMode:s})=>{const[i,y]=w.useState(new Set);if(!r)return null;const v=x=>{const n=new Set(i);n.has(x)?n.delete(x):n.add(x),y(n)},j=()=>{const x=d.tasks.filter(n=>i.has(n.id));x.length!==0&&(xs.addReminder({title:d.title||"Untitled Group",listId:"inbox",priority:"medium",dueDate:void 0,tags:[],completed:!1,subtasks:x.map(n=>({id:se(),title:n.textValues.col_name||n.name||"Untitled Task",completed:n.status==="Done"}))}),c(),y(new Set))},N=()=>{i.size===d.tasks.length?y(new Set):y(new Set(d.tasks.map(x=>x.id)))};return e.jsx("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center bg-black/40 backdrop-blur-sm animate-in fade-in duration-300",children:e.jsxs("div",{className:`backdrop-blur-xl rounded-2xl shadow-2xl w-full max-w-2xl overflow-hidden animate-in zoom-in-95 duration-300 border ring-1 ring-black/5 flex flex-col max-h-[85vh] ${s?"bg-[#1a1d24]/95 border-gray-700":"bg-white/95 border-white/20"}`,children:[e.jsxs("div",{className:`px-6 py-5 border-b flex items-center justify-between ${s?"border-gray-700 bg-gradient-to-r from-gray-800/50 to-[#1a1d24]":"border-gray-100 bg-gradient-to-r from-gray-50/50 to-white"}`,children:[e.jsxs("div",{children:[e.jsx("h2",{className:`text-xl font-bold tracking-tight ${s?"text-gray-100":"text-gray-900"}`,children:"Send to Reminders"}),e.jsxs("p",{className:`text-sm mt-0.5 ${s?"text-gray-400":"text-gray-500"}`,children:["Select tasks from ",e.jsx("span",{className:`font-semibold ${s?"text-gray-300":"text-gray-700"}`,children:d.title})]})]}),e.jsx("button",{onClick:c,className:`p-2 rounded-full transition-all duration-200 active:scale-95 ${s?"hover:bg-white/10 text-gray-400 hover:text-gray-200":"hover:bg-gray-100 text-gray-400 hover:text-gray-600"}`,children:e.jsx(Ne,{size:20})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-0",children:d.tasks.length===0?e.jsxs("div",{className:`text-center py-16 flex flex-col items-center gap-3 ${s?"text-gray-500":"text-gray-400"}`,children:[e.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center ${s?"bg-gray-800":"bg-gray-50"}`,children:e.jsx(je,{size:24,className:`${s?"text-gray-600":"text-gray-300"}`})}),e.jsx("p",{className:"font-medium",children:"No tasks in this group"})]}):e.jsxs("table",{className:"w-full text-left border-collapse",children:[e.jsx("thead",{className:`backdrop-blur-md sticky top-0 z-10 shadow-sm ${s?"bg-gray-800/80":"bg-gray-50/80"}`,children:e.jsxs("tr",{children:[e.jsx("th",{className:`px-6 py-3.5 border-b w-[50px] ${s?"border-gray-700/80":"border-gray-200/80"}`,children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("input",{type:"checkbox",checked:i.size===d.tasks.length&&d.tasks.length>0,onChange:N,className:`rounded-md focus:ring-indigo-500/20 transition-all cursor-pointer ${s?"bg-gray-700 border-gray-600 text-indigo-500":"border-gray-300 text-indigo-600"}`})})}),e.jsx("th",{className:`px-4 py-3.5 text-xs font-bold uppercase tracking-wider border-b ${s?"text-gray-400 border-gray-700/80":"text-gray-500 border-gray-200/80"}`,children:"Task Name"}),e.jsx("th",{className:`px-4 py-3.5 text-xs font-bold uppercase tracking-wider border-b text-center w-[120px] ${s?"text-gray-400 border-gray-700/80":"text-gray-500 border-gray-200/80"}`,children:"Priority"}),e.jsx("th",{className:`px-4 py-3.5 text-xs font-bold uppercase tracking-wider border-b w-[140px] ${s?"text-gray-400 border-gray-700/80":"text-gray-500 border-gray-200/80"}`,children:"Due Date"})]})}),e.jsx("tbody",{className:`divide-y ${s?"divide-gray-800":"divide-gray-100"}`,children:d.tasks.map(x=>{const n=i.has(x.id),z=x.textValues.col_name||x.name||"Untitled Task";return e.jsxs("tr",{onClick:()=>v(x.id),className:`cursor-pointer transition-all duration-200 group ${n?s?"bg-indigo-900/20":"bg-indigo-50/60":s?"hover:bg-white/5":"hover:bg-gray-50/80"}`,children:[e.jsx("td",{className:"px-6 py-3.5 w-[50px]",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("input",{type:"checkbox",checked:n,onChange:()=>v(x.id),onClick:C=>C.stopPropagation(),className:`rounded-md focus:ring-indigo-500/20 transition-all cursor-pointer ${s?"bg-gray-700 border-gray-600 text-indigo-500":"border-gray-300 text-indigo-600"}`})})}),e.jsx("td",{className:"px-4 py-3.5",children:e.jsx("span",{className:`text-sm font-medium truncate block max-w-[320px] transition-colors ${n?s?"text-indigo-300":"text-indigo-900":s?"text-gray-300 group-hover:text-white":"text-gray-700 group-hover:text-gray-900"}`,children:z})}),e.jsx("td",{className:"px-4 py-3.5 text-center w-[120px]",children:e.jsx("div",{className:"flex justify-center transform transition-transform group-hover:scale-105",children:e.jsx("span",{className:`text-[11px] px-2.5 py-1 rounded-full text-white font-semibold shadow-sm tracking-wide ${$e[x.priority]||"bg-gray-400"}`,children:x.priority})})}),e.jsx("td",{className:"px-4 py-3.5 w-[140px]",children:e.jsx("span",{className:`text-sm font-mono transition-colors ${x.dueDate?s?"text-gray-400":"text-gray-600":s?"text-gray-600":"text-gray-300"}`,children:x.dueDate||"-"})})]},x.id)})})]})}),e.jsxs("div",{className:`px-6 py-4 border-t backdrop-blur-sm flex justify-end gap-3 ${s?"bg-gray-800/50 border-gray-700":"bg-gray-50/50 border-gray-100"}`,children:[e.jsx("button",{onClick:c,className:`px-5 py-2.5 text-sm font-medium rounded-xl transition-all duration-200 active:scale-95 ${s?"text-gray-400 hover:text-gray-200 hover:bg-white/10":"text-gray-600 hover:text-gray-900 hover:bg-gray-200/50"}`,children:"Cancel"}),e.jsxs("button",{onClick:j,disabled:i.size===0,className:"px-6 py-2.5 text-sm font-semibold text-white bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 active:scale-95 rounded-xl shadow-lg shadow-blue-500/25 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed disabled:shadow-none flex items-center gap-2",children:[e.jsx(je,{size:16,strokeWidth:2.5}),e.jsx("span",{children:"Send Tasks"}),i.size>0&&e.jsx("span",{className:"bg-white/20 px-1.5 py-0.5 rounded text-xs font-bold ml-1",children:i.size})]})]})]})})},ir=({isOpen:r,onClose:c,group:d,darkMode:s})=>{const[i,y]=w.useState(new Set);if(!r)return null;const v=x=>{const n=new Set(i);n.has(x)?n.delete(x):n.add(x),y(n)},j=()=>{const x=d.tasks.filter(n=>i.has(n.id));x.length!==0&&(gs.addObjective({title:d.title||"Untitled Objective",progress:0,status:"on-track",expanded:!0,keyResults:x.map(n=>({id:se(),title:n.textValues.col_name||n.name||"Untitled Key Result",current:n.status==="Done"?100:0,target:100,unit:"%",confidence:"medium",owner:"Unassigned"}))}),c(),y(new Set))},N=()=>{i.size===d.tasks.length?y(new Set):y(new Set(d.tasks.map(x=>x.id)))};return e.jsx("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center bg-black/40 backdrop-blur-sm animate-in fade-in duration-300",children:e.jsxs("div",{className:`backdrop-blur-xl rounded-2xl shadow-2xl w-full max-w-2xl overflow-hidden animate-in zoom-in-95 duration-300 border ring-1 ring-black/5 flex flex-col max-h-[85vh] ${s?"bg-[#1a1d24]/95 border-gray-700":"bg-white/95 border-white/20"}`,children:[e.jsxs("div",{className:`px-6 py-5 border-b flex items-center justify-between ${s?"border-gray-700 bg-gradient-to-r from-gray-800/50 to-[#1a1d24]":"border-gray-100 bg-gradient-to-r from-gray-50/50 to-white"}`,children:[e.jsxs("div",{children:[e.jsx("h2",{className:`text-xl font-bold tracking-tight ${s?"text-gray-100":"text-gray-900"}`,children:"Send to Goals"}),e.jsxs("p",{className:`text-sm mt-0.5 ${s?"text-gray-400":"text-gray-500"}`,children:["Select tasks from ",e.jsx("span",{className:`font-semibold ${s?"text-gray-300":"text-gray-700"}`,children:d.title})]})]}),e.jsx("button",{onClick:c,className:`p-2 rounded-full transition-all duration-200 active:scale-95 ${s?"hover:bg-white/10 text-gray-400 hover:text-gray-200":"hover:bg-gray-100 text-gray-400 hover:text-gray-600"}`,children:e.jsx(Ne,{size:20})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-0",children:d.tasks.length===0?e.jsxs("div",{className:`text-center py-16 flex flex-col items-center gap-3 ${s?"text-gray-500":"text-gray-400"}`,children:[e.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center ${s?"bg-gray-800":"bg-gray-50"}`,children:e.jsx(je,{size:24,className:`${s?"text-gray-600":"text-gray-300"}`})}),e.jsx("p",{className:"font-medium",children:"No tasks in this group"})]}):e.jsxs("table",{className:"w-full text-left border-collapse",children:[e.jsx("thead",{className:`backdrop-blur-md sticky top-0 z-10 shadow-sm ${s?"bg-gray-800/80":"bg-gray-50/80"}`,children:e.jsxs("tr",{children:[e.jsx("th",{className:`px-6 py-3.5 border-b w-[50px] ${s?"border-gray-700/80":"border-gray-200/80"}`,children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("input",{type:"checkbox",checked:i.size===d.tasks.length&&d.tasks.length>0,onChange:N,className:`rounded-md focus:ring-indigo-500/20 transition-all cursor-pointer ${s?"bg-gray-700 border-gray-600 text-indigo-500":"border-gray-300 text-indigo-600"}`})})}),e.jsx("th",{className:`px-4 py-3.5 text-xs font-bold uppercase tracking-wider border-b ${s?"text-gray-400 border-gray-700/80":"text-gray-500 border-gray-200/80"}`,children:"Task Name"}),e.jsx("th",{className:`px-4 py-3.5 text-xs font-bold uppercase tracking-wider border-b text-center w-[120px] ${s?"text-gray-400 border-gray-700/80":"text-gray-500 border-gray-200/80"}`,children:"Priority"}),e.jsx("th",{className:`px-4 py-3.5 text-xs font-bold uppercase tracking-wider border-b w-[140px] ${s?"text-gray-400 border-gray-700/80":"text-gray-500 border-gray-200/80"}`,children:"Due Date"})]})}),e.jsx("tbody",{className:`divide-y ${s?"divide-gray-800":"divide-gray-100"}`,children:d.tasks.map(x=>{const n=i.has(x.id),z=x.textValues.col_name||x.name||"Untitled Task";return e.jsxs("tr",{onClick:()=>v(x.id),className:`cursor-pointer transition-all duration-200 group ${n?s?"bg-indigo-900/20":"bg-indigo-50/60":s?"hover:bg-white/5":"hover:bg-gray-50/80"}`,children:[e.jsx("td",{className:"px-6 py-3.5 w-[50px]",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("input",{type:"checkbox",checked:n,onChange:()=>v(x.id),onClick:C=>C.stopPropagation(),className:`rounded-md focus:ring-indigo-500/20 transition-all cursor-pointer ${s?"bg-gray-700 border-gray-600 text-indigo-500":"border-gray-300 text-indigo-600"}`})})}),e.jsx("td",{className:"px-4 py-3.5",children:e.jsx("span",{className:`text-sm font-medium truncate block max-w-[320px] transition-colors ${n?s?"text-indigo-300":"text-indigo-900":s?"text-gray-300 group-hover:text-white":"text-gray-700 group-hover:text-gray-900"}`,children:z})}),e.jsx("td",{className:"px-4 py-3.5 text-center w-[120px]",children:e.jsx("div",{className:"flex justify-center transform transition-transform group-hover:scale-105",children:e.jsx("span",{className:`text-[11px] px-2.5 py-1 rounded-full text-white font-semibold shadow-sm tracking-wide ${$e[x.priority]||"bg-gray-400"}`,children:x.priority})})}),e.jsx("td",{className:"px-4 py-3.5 w-[140px]",children:e.jsx("span",{className:`text-sm font-mono transition-colors ${x.dueDate?s?"text-gray-400":"text-gray-600":s?"text-gray-600":"text-gray-300"}`,children:x.dueDate||"-"})})]},x.id)})})]})}),e.jsxs("div",{className:`px-6 py-4 border-t backdrop-blur-sm flex justify-end gap-3 ${s?"bg-gray-800/50 border-gray-700":"bg-gray-50/50 border-gray-100"}`,children:[e.jsx("button",{onClick:c,className:`px-5 py-2.5 text-sm font-medium rounded-xl transition-all duration-200 active:scale-95 ${s?"text-gray-400 hover:text-gray-200 hover:bg-white/10":"text-gray-600 hover:text-gray-900 hover:bg-gray-200/50"}`,children:"Cancel"}),e.jsxs("button",{onClick:j,disabled:i.size===0,className:"px-6 py-2.5 text-sm font-semibold text-white bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 active:scale-95 rounded-xl shadow-lg shadow-blue-500/25 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed disabled:shadow-none flex items-center gap-2",children:[e.jsx(nt,{size:16,strokeWidth:2.5}),e.jsx("span",{children:"Send to Goals"}),i.size>0&&e.jsx("span",{className:"bg-white/20 px-1.5 py-0.5 rounded text-xs font-bold ml-1",children:i.size})]})]})]})})},or=({isOpen:r,onClose:c,group:d,darkMode:s})=>{const[i,y]=w.useState(new Set),v=it.getCurrentUser(),j=v?`taskboard-${v.id}`:"taskboard-default",{showToast:N}=Ut();if(!r)return null;const x=C=>{const I=new Set(i);I.has(C)?I.delete(C):I.add(C),y(I)},n=()=>{const C=d.tasks.filter(I=>i.has(I.id));if(C.length!==0)try{const I=localStorage.getItem(j);let L;I?(L=JSON.parse(I),L.groups||(L={...ve,...L})):L=ve;const g={id:se(),title:d.title||"Imported Group",color:d.color,columns:[...d.columns],tasks:C.map(U=>({...U,id:se()})),isPinned:!1},D={...L,groups:[g,...L.groups||[]]};localStorage.setItem(j,JSON.stringify(D)),N(`Successfully sent ${C.length} tasks to your Tasks Board`,"success"),c(),y(new Set)}catch(I){console.error("Failed to send tasks:",I),N("Failed to send tasks. Please try again.","error")}},z=()=>{i.size===d.tasks.length?y(new Set):y(new Set(d.tasks.map(C=>C.id)))};return e.jsx("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center bg-black/40 backdrop-blur-sm animate-in fade-in duration-300",children:e.jsxs("div",{className:`backdrop-blur-xl rounded-2xl shadow-2xl w-full max-w-2xl overflow-hidden animate-in zoom-in-95 duration-300 border ring-1 ring-black/5 flex flex-col max-h-[85vh] ${s?"bg-[#1a1d24]/95 border-gray-700":"bg-white/95 border-white/20"}`,children:[e.jsxs("div",{className:`px-6 py-5 border-b flex items-center justify-between ${s?"border-gray-700 bg-gradient-to-r from-gray-800/50 to-[#1a1d24]":"border-gray-100 bg-gradient-to-r from-gray-50/50 to-white"}`,children:[e.jsxs("div",{children:[e.jsxs("h2",{className:`text-xl font-bold tracking-tight flex items-center gap-2 ${s?"text-gray-100":"text-gray-900"}`,children:[e.jsx(ot,{className:"text-blue-600",size:24}),"Send to Tasks Board"]}),e.jsxs("p",{className:`text-sm mt-0.5 ${s?"text-gray-400":"text-gray-500"}`,children:["Select tasks from ",e.jsx("span",{className:`font-semibold ${s?"text-gray-300":"text-gray-700"}`,children:d.title})," to copy to your personal Tasks."]})]}),e.jsx("button",{onClick:c,className:`p-2 rounded-full transition-all duration-200 active:scale-95 ${s?"hover:bg-white/10 text-gray-400 hover:text-gray-200":"hover:bg-gray-100 text-gray-400 hover:text-gray-600"}`,children:e.jsx(Ne,{size:20})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-0",children:d.tasks.length===0?e.jsxs("div",{className:`text-center py-16 flex flex-col items-center gap-3 ${s?"text-gray-500":"text-gray-400"}`,children:[e.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center ${s?"bg-gray-800":"bg-gray-50"}`,children:e.jsx(je,{size:24,className:`${s?"text-gray-600":"text-gray-300"}`})}),e.jsx("p",{className:"font-medium",children:"No tasks in this group"})]}):e.jsxs("table",{className:"w-full text-left border-collapse",children:[e.jsx("thead",{className:`backdrop-blur-md sticky top-0 z-10 shadow-sm ${s?"bg-gray-800/80":"bg-gray-50/80"}`,children:e.jsxs("tr",{children:[e.jsx("th",{className:`px-6 py-3.5 border-b w-[50px] ${s?"border-gray-700/80":"border-gray-200/80"}`,children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("input",{type:"checkbox",checked:i.size===d.tasks.length&&d.tasks.length>0,onChange:z,className:`rounded-md focus:ring-indigo-500/20 transition-all cursor-pointer ${s?"bg-gray-700 border-gray-600 text-indigo-500":"border-gray-300 text-indigo-600"}`})})}),e.jsx("th",{className:`px-4 py-3.5 text-xs font-bold uppercase tracking-wider border-b ${s?"text-gray-400 border-gray-700/80":"text-gray-500 border-gray-200/80"}`,children:"Task Name"}),e.jsx("th",{className:`px-4 py-3.5 text-xs font-bold uppercase tracking-wider border-b text-center w-[120px] ${s?"text-gray-400 border-gray-700/80":"text-gray-500 border-gray-200/80"}`,children:"Priority"}),e.jsx("th",{className:`px-4 py-3.5 text-xs font-bold uppercase tracking-wider border-b w-[140px] ${s?"text-gray-400 border-gray-700/80":"text-gray-500 border-gray-200/80"}`,children:"Due Date"})]})}),e.jsx("tbody",{className:`divide-y ${s?"divide-gray-800":"divide-gray-100"}`,children:d.tasks.map(C=>{const I=i.has(C.id),L=C.textValues.col_name||C.name||"Untitled Task";return e.jsxs("tr",{onClick:()=>x(C.id),className:`cursor-pointer transition-all duration-200 group ${I?s?"bg-indigo-900/20":"bg-indigo-50/60":s?"hover:bg-white/5":"hover:bg-gray-50/80"}`,children:[e.jsx("td",{className:"px-6 py-3.5 w-[50px]",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("input",{type:"checkbox",checked:I,onChange:()=>x(C.id),onClick:g=>g.stopPropagation(),className:`rounded-md focus:ring-indigo-500/20 transition-all cursor-pointer ${s?"bg-gray-700 border-gray-600 text-indigo-500":"border-gray-300 text-indigo-600"}`})})}),e.jsx("td",{className:"px-4 py-3.5",children:e.jsx("span",{className:`text-sm font-medium truncate block max-w-[320px] transition-colors ${I?s?"text-indigo-300":"text-indigo-900":s?"text-gray-300 group-hover:text-white":"text-gray-700 group-hover:text-gray-900"}`,children:L})}),e.jsx("td",{className:"px-4 py-3.5 text-center w-[120px]",children:e.jsx("div",{className:"flex justify-center transform transition-transform group-hover:scale-105",children:e.jsx("span",{className:`text-[11px] px-2.5 py-1 rounded-full text-white font-semibold shadow-sm tracking-wide ${$e[C.priority]||"bg-gray-400"}`,children:C.priority})})}),e.jsx("td",{className:"px-4 py-3.5 w-[140px]",children:e.jsx("span",{className:`text-sm font-mono transition-colors ${C.dueDate?s?"text-gray-400":"text-gray-600":s?"text-gray-600":"text-gray-300"}`,children:C.dueDate||"-"})})]},C.id)})})]})}),e.jsxs("div",{className:`px-6 py-4 border-t backdrop-blur-sm flex justify-end gap-3 ${s?"bg-gray-800/50 border-gray-700":"bg-gray-50/50 border-gray-100"}`,children:[e.jsx("button",{onClick:c,className:`px-5 py-2.5 text-sm font-medium rounded-xl transition-all duration-200 active:scale-95 ${s?"text-gray-400 hover:text-gray-200 hover:bg-white/10":"text-gray-600 hover:text-gray-900 hover:bg-gray-200/50"}`,children:"Cancel"}),e.jsxs("button",{onClick:n,disabled:i.size===0,className:"px-6 py-2.5 text-sm font-semibold text-white bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 active:scale-95 rounded-xl shadow-lg shadow-blue-500/25 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed disabled:shadow-none flex items-center gap-2",children:[e.jsx(je,{size:16,strokeWidth:2.5}),e.jsx("span",{children:"Send Tasks"}),i.size>0&&e.jsx("span",{className:"bg-white/20 px-1.5 py-0.5 rounded text-xs font-bold ml-1",children:i.size})]})]})]})})},yt=({status:r,onChange:c,tabIndex:d,darkMode:s})=>{const[i,y]=w.useState(!1),[v,j]=w.useState({top:0,left:0,width:0}),N=n=>{n.stopPropagation();const z=n.currentTarget.getBoundingClientRect(),C=250,L=window.innerHeight-z.bottom<C;j({top:L?z.top+window.scrollY-C-4:z.bottom+window.scrollY+4,left:z.left+window.scrollX,width:z.width}),y(!i)},x=n=>s?Qs[n]||"bg-gray-800 text-gray-400":pt[n]||"bg-gray-100 text-gray-400";return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"relative w-full h-full",children:e.jsxs("div",{onClick:N,onKeyDown:n=>{(n.key==="Enter"||n.key===" ")&&(n.preventDefault(),N(n))},tabIndex:d,className:`w-full h-full flex items-center justify-center cursor-pointer transition-all duration-200 text-xs font-medium relative group focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-inset rounded-sm ${x(r)}`,children:[e.jsx("div",{className:"absolute right-0 bottom-0 w-3 h-3 bg-black/10 opacity-0 group-hover:opacity-100 clip-triangle transition-opacity"}),e.jsx("span",{className:"truncate px-1",children:r||e.jsx("span",{className:"opacity-0 group-hover:opacity-100 text-[10px] uppercase",children:"Set Status"})})]})}),i&&ue.createPortal(e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-40 bg-transparent",onClick:()=>y(!1)}),e.jsx("div",{className:`fixed z-50 shadow-2xl rounded-lg border p-1.5 overflow-hidden animate-in fade-in zoom-in-95 duration-100 flex flex-col gap-1 ${s?"bg-[#1a1d24] border-gray-700":"bg-white border-gray-200"}`,style:{top:v.top+4,left:v.left-(160-v.width)/2,width:"160px"},children:Object.values(O).map(n=>e.jsx("div",{onClick:()=>{c(n),y(!1)},className:`px-3 py-2.5 text-xs cursor-pointer hover:brightness-95 rounded-sm text-center font-medium transition-all shadow-sm ${x(n)}`,children:n||"Empty"},n))})]}),document.body)]})},bt=({priority:r,onChange:c,tabIndex:d,darkMode:s})=>{const[i,y]=w.useState(!1),[v,j]=w.useState({top:0,left:0,width:0}),N=n=>{n.stopPropagation();const z=n.currentTarget.getBoundingClientRect(),C=200,L=window.innerHeight-z.bottom<C;j({top:L?z.top+window.scrollY-C-4:z.bottom+window.scrollY+4,left:z.left+window.scrollX,width:z.width}),y(!i)},x=n=>s?Ms[n]||"bg-gray-800 text-gray-400":$e[n]||"bg-gray-100 text-gray-400";return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"relative w-full h-full",children:e.jsxs("div",{onClick:N,onKeyDown:n=>{(n.key==="Enter"||n.key===" ")&&(n.preventDefault(),N(n))},tabIndex:d,className:`w-full h-full flex items-center justify-center cursor-pointer transition-all duration-200 text-xs font-medium relative group focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-inset rounded-sm ${x(r)}`,children:[e.jsx("div",{className:"absolute right-0 bottom-0 w-3 h-3 bg-black/10 opacity-0 group-hover:opacity-100 clip-triangle transition-opacity"}),e.jsx("span",{className:"truncate px-1",children:r||e.jsx("span",{className:"opacity-0 group-hover:opacity-100 text-[10px] uppercase",children:"Set"})})]})}),i&&ue.createPortal(e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-40 bg-transparent",onClick:()=>y(!1)}),e.jsx("div",{className:`fixed z-50 shadow-2xl rounded-lg border p-1.5 animate-in fade-in zoom-in-95 duration-100 flex flex-col gap-1 ${s?"bg-[#1a1d24] border-gray-700":"bg-white border-gray-200"}`,style:{top:v.top+4,left:v.left-(140-v.width)/2,width:"140px"},children:Object.values(ie).map(n=>e.jsx("div",{onClick:()=>{c(n),y(!1)},className:`px-2 py-2 text-xs cursor-pointer hover:brightness-90 rounded-sm text-center font-medium transition-all shadow-sm ${x(n)}`,children:n||"Empty"},n))})]}),document.body)]})},ft=({personId:r,onChange:c,tabIndex:d,darkMode:s})=>{const[i,y]=w.useState(!1),[v,j]=w.useState({top:0,left:0}),N=st.find(n=>n.id===r),x=n=>{n.stopPropagation();const z=n.currentTarget.getBoundingClientRect(),C=250,L=window.innerHeight-z.bottom<C;j({top:L?z.top+window.scrollY-C-5:z.bottom+window.scrollY+5,left:z.left+window.scrollX-90}),y(!i)};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"relative w-full h-full flex justify-center items-center group",children:e.jsxs("div",{onClick:x,onKeyDown:n=>{(n.key==="Enter"||n.key===" ")&&(n.preventDefault(),x(n))},tabIndex:d,className:"cursor-pointer hover:scale-110 transition-transform duration-200 active:scale-95 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded-full",children:[N?e.jsx("div",{className:"w-6 h-6 rounded-full text-white text-[9px] flex items-center justify-center font-bold ring-2 shadow-md "+N.color+(s?" ring-[#1a1d24]":" ring-white"),title:N.name,children:N.initials}):e.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center border border-dashed transition-all shadow-sm ${s?"bg-gray-800 text-gray-500 border-gray-700 hover:border-gray-500 hover:bg-gray-700":"bg-gray-100 text-gray-400 hover:bg-gray-200 border-gray-300 hover:border-gray-400"}`,children:e.jsx(lt,{size:12,strokeWidth:2.5})}),!N&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 pointer-events-none",children:e.jsx("div",{className:"w-6 h-6 rounded-full bg-black/5 flex items-center justify-center backdrop-blur-[1px]",children:e.jsx(dt,{size:12,className:"text-black/60",strokeWidth:3})})})]})}),i&&ue.createPortal(e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-40 bg-transparent",onClick:()=>y(!1)}),e.jsxs("div",{className:`fixed z-50 shadow-2xl rounded-xl border p-2 animate-in fade-in zoom-in-95 duration-100 flex flex-col gap-1 min-w-[180px] ${s?"bg-[#1a1d24] border-gray-700":"bg-white border-gray-200"}`,style:{top:v.top,left:v.left},children:[e.jsx("div",{className:`text-xs font-semibold mb-1 px-2 uppercase tracking-wider py-1 ${s?"text-gray-500":"text-gray-400"}`,children:"Select Person"}),st.map(n=>e.jsxs("div",{onClick:()=>{c(n.id),y(!1)},className:`flex items-center gap-3 px-3 py-2 rounded-lg cursor-pointer transition-colors ${s?r===n.id?"bg-blue-500/20":"hover:bg-white/5":r===n.id?"bg-blue-50":"hover:bg-blue-50"}`,children:[e.jsx("div",{className:"w-6 h-6 rounded-full text-white text-[10px] flex items-center justify-center font-bold "+n.color,children:n.initials}),e.jsx("span",{className:`text-sm font-medium ${s?"text-gray-200":"text-gray-700"}`,children:n.name}),r===n.id&&e.jsx("span",{className:"ml-auto text-blue-500",children:"âœ“"})]},n.id)),e.jsx("div",{className:`border-t my-1 ${s?"border-gray-700":"border-gray-100"}`}),e.jsxs("div",{onClick:()=>{c(null),y(!1)},className:`px-3 py-2 text-sm rounded-lg cursor-pointer flex items-center gap-2 transition-colors ${s?"hover:bg-red-500/20 text-red-400":"hover:bg-red-50 text-red-500"}`,children:[e.jsx("span",{className:"w-4 h-4 flex items-center justify-center text-xs",children:"âœ•"}),"Clear Selection"]})]})]}),document.body)]})},lr=[{id:"text",label:"Normal text",icon:e.jsx(as,{size:18,className:"text-gray-500"})},{id:"h1",label:"Heading 1",icon:e.jsx(Es,{size:18,className:"text-gray-500"})},{id:"h2",label:"Heading 2",icon:e.jsx(Fs,{size:18,className:"text-gray-500"})},{id:"h3",label:"Heading 3",icon:e.jsx(Vs,{size:18,className:"text-gray-500"})},{id:"h4",label:"Heading 4",icon:e.jsx(Rs,{size:18,className:"text-gray-500"})},{id:"checklist",label:"Checklist",icon:e.jsx(us,{size:18,className:"text-gray-500"})},{id:"bulletList",label:"Bulleted list",icon:e.jsx(hs,{size:18,className:"text-gray-500"})},{id:"orderedList",label:"Numbered list",icon:e.jsx(ms,{size:18,className:"text-gray-500"})},{id:"toggle",label:"Toggle list",icon:e.jsx(Zs,{size:18,className:"text-gray-500"})},{id:"banner",label:"Banners",icon:e.jsx(ut,{size:18,className:"text-gray-500"})},{id:"code",label:"Code block",icon:e.jsx(Wt,{size:18,className:"text-gray-500"})},{id:"quote",label:"Block quote",icon:e.jsx(Js,{size:18,className:"text-gray-500"})},{id:"pullQuote",label:"Pull quote",icon:e.jsx(Us,{size:18,className:"text-gray-500"})}],dr=({search:r,onSelect:c,onClose:d,position:s,darkMode:i})=>{const[y,v]=w.useState(0),j=w.useRef(null),N=lr.filter(x=>x.label.toLowerCase().includes(r.toLowerCase()));return w.useEffect(()=>{v(0)},[r]),w.useEffect(()=>{const x=n=>{n.key==="ArrowDown"?(n.preventDefault(),v(z=>(z+1)%N.length)):n.key==="ArrowUp"?(n.preventDefault(),v(z=>(z-1+N.length)%N.length)):n.key==="Enter"?(n.preventDefault(),N[y]&&c(N[y])):n.key==="Escape"&&d()};return document.addEventListener("keydown",x),()=>document.removeEventListener("keydown",x)},[N,y,c,d]),N.length===0?null:e.jsxs("div",{ref:j,className:`fixed z-[9999] rounded-lg shadow-xl border w-72 max-h-80 overflow-y-auto flex flex-col p-1 animate-in fade-in zoom-in-95 duration-100 ${i?"bg-[#1a1d24] border-gray-700":"bg-white border-gray-200"}`,style:{top:s.top,left:s.left},children:[e.jsx("div",{className:`px-2 py-1.5 text-xs font-semibold uppercase tracking-wider ${i?"text-gray-500":"text-gray-400"}`,children:"Basic blocks"}),N.map((x,n)=>e.jsxs("div",{className:`flex items-center gap-3 px-2 py-1.5 rounded-md cursor-pointer transition-colors ${n===y?i?"bg-white/10":"bg-gray-100":i?"hover:bg-white/5":"hover:bg-gray-50"}`,onClick:()=>c(x),onMouseEnter:()=>v(n),children:[e.jsx("div",{className:`w-10 h-10 rounded border flex items-center justify-center shadow-sm ${i?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:x.icon}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:`text-sm font-medium ${i?"text-gray-200":"text-gray-700"}`,children:x.label}),x.description&&e.jsx("span",{className:"text-xs text-gray-400",children:x.description})]})]},x.id))]})},cr=({value:r,onChange:c,onClose:d,title:s="Edit Text",darkMode:i})=>{const[y,v]=w.useState(r),[j,N]=w.useState(!1),[x,n]=w.useState({top:0,left:0}),[z,C]=w.useState(""),I=w.useRef(null),L=w.useRef(null);w.useEffect(()=>{I.current&&(I.current.focus(),I.current.setSelectionRange(I.current.value.length,I.current.value.length))},[]);const g=V=>{var E;if(j){if(V.key==="ArrowUp"||V.key==="ArrowDown"||V.key==="Enter"){V.key==="Enter"&&V.preventDefault();return}if(V.key==="Escape"){N(!1);return}}else V.key==="Escape"&&d();if(V.key==="/"&&!j){const F=(E=I.current)==null?void 0:E.getBoundingClientRect();F&&(n({top:F.top+40,left:F.left+20}),N(!0),C(""))}},D=V=>{const E=V.target.value;if(v(E),c(E),j){const F=E.lastIndexOf("/");F===-1?N(!1):C(E.slice(F+1))}},U=V=>{var F;let E="";switch(V.id){case"h1":E="# ";break;case"h2":E="## ";break;case"h3":E="### ";break;case"checklist":E="- [ ] ";break;case"bulletList":E="- ";break;case"orderedList":E="1. ";break;case"quote":E="> ";break;case"code":E="```\n\n```";break;default:E=""}if(E){const J=y.lastIndexOf("/"),X=y.substring(0,J)+E+y.substring(J+1+z.length);v(X),c(X)}N(!1),(F=I.current)==null||F.focus()};return ue.createPortal(e.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center bg-black/50 backdrop-blur-sm animate-in fade-in duration-200",children:[e.jsxs("div",{ref:L,className:`rounded-xl shadow-2xl w-[800px] h-[600px] flex flex-col overflow-hidden animate-in zoom-in-95 duration-200 border ${i?"bg-[#1a1d24] border-gray-700":"bg-white border-gray-200"}`,children:[e.jsxs("div",{className:`flex items-center justify-between px-4 py-3 border-b ${i?"border-gray-700 bg-[#1a1d24]":"border-gray-100 bg-gray-50/50"}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(mt,{size:16,className:`${i?"text-gray-500":"text-gray-400"}`}),e.jsx("span",{className:`text-sm font-semibold ${i?"text-gray-200":"text-gray-700"}`,children:s})]}),e.jsx("button",{onClick:d,className:`p-1.5 rounded-md transition-colors ${i?"hover:bg-white/5 text-gray-400 hover:text-gray-200":"hover:bg-gray-200 text-gray-400 hover:text-gray-600"}`,children:e.jsx(Ne,{size:18})})]}),e.jsxs("div",{className:`flex-1 relative ${i?"bg-[#1a1d24]":"bg-white"}`,children:[e.jsx("textarea",{ref:I,value:y,onChange:D,onKeyDown:g,className:`w-full h-full p-6 resize-none focus:outline-none text-base leading-relaxed font-mono ${i?"bg-[#1a1d24] text-gray-200 placeholder-gray-600":"text-gray-800 placeholder-gray-300"}`,placeholder:"Write something... Type '/' for commands"}),e.jsx("div",{className:`absolute bottom-4 right-4 text-xs pointer-events-none ${i?"text-gray-600":"text-gray-400"}`,children:"Markdown supported â€¢ Type '/' for commands"})]})]}),j&&e.jsx("div",{className:"fixed inset-0 z-[10000] pointer-events-none",children:e.jsx("div",{className:"pointer-events-auto",children:e.jsx(dr,{search:z,onSelect:U,onClose:()=>N(!1),position:x,darkMode:i})})})]}),document.body)},xr=({value:r,onChange:c,tabIndex:d,darkMode:s})=>{const[i,y]=w.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:`w-full h-full relative group cursor-pointer transition-colors ${s?"hover:bg-white/5":"hover:bg-gray-50"}`,onClick:()=>y(!0),children:[e.jsx("div",{className:`w-full h-full px-2 py-1.5 text-sm whitespace-nowrap overflow-hidden text-ellipsis focus:outline-none focus:ring-2 focus:ring-blue-500 rounded ${s?"text-gray-300":"text-gray-700"}`,tabIndex:d,children:r||e.jsx("span",{className:`${s?"text-gray-600":"text-gray-400"} italic`,children:"Empty"})}),e.jsx("div",{className:`absolute right-2 top-1/2 -translate-y-1/2 opacity-0 group-hover:opacity-100 transition-opacity ${s?"text-gray-500":"text-gray-400"}`,children:e.jsx(mt,{size:12})})]}),i&&e.jsx(cr,{value:r,onChange:c,onClose:()=>y(!1),darkMode:s})]})},gr=({options:r=[],value:c,onChange:d,onClose:s,tabIndex:i,darkMode:y})=>{const[v,j]=w.useState(!1),[N,x]=w.useState(""),[n,z]=w.useState(null),C=w.useRef(null),I=r.find(D=>D.id===c),L=D=>{if(D.stopPropagation(),C.current){const U=C.current.getBoundingClientRect(),V=Math.max(U.width,220),E=U.left+window.scrollX-(V-U.width)/2;z({top:U.bottom+window.scrollY+4,left:E,width:V})}j(!0)};w.useEffect(()=>{const D=U=>{v&&!U.target.closest(".dropdown-portal")&&(j(!1),s==null||s())};return document.addEventListener("mousedown",D),()=>document.removeEventListener("mousedown",D)},[v,s]);const g=r.filter(D=>D.label.toLowerCase().includes(N.toLowerCase()));return e.jsxs(e.Fragment,{children:[e.jsx("div",{ref:C,onClick:L,onKeyDown:D=>{(D.key==="Enter"||D.key===" ")&&(D.preventDefault(),L(D))},tabIndex:i,className:`w-full h-full flex items-center justify-center cursor-pointer transition-colors px-2 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded ${y?"hover:bg-white/5":"hover:bg-gray-50"}`,children:I?e.jsx("div",{className:"px-3 py-1 rounded-sm text-white text-xs font-medium truncate w-full text-center "+I.color,children:I.label}):e.jsx("span",{className:`${y?"text-gray-500":"text-gray-400"}`,children:"-"})}),v&&n&&ue.createPortal(e.jsxs("div",{className:`dropdown-portal fixed z-[9999] rounded-lg shadow-2xl border animate-in fade-in zoom-in-95 duration-100 ${y?"bg-[#1a1d24] border-gray-700":"bg-white border-gray-100"}`,style:{top:n.top,left:n.left,width:n.width,minWidth:"220px"},onClick:D=>D.stopPropagation(),children:[e.jsx("div",{className:"p-2",children:e.jsx("input",{type:"text",placeholder:"Search or add options...",value:N,onChange:D=>x(D.target.value),className:`w-full px-3 py-2 border-none rounded-md text-sm focus:ring-2 focus:ring-blue-500/20 ${y?"bg-gray-800 text-gray-200 placeholder-gray-500":"bg-gray-50 text-gray-700 placeholder-gray-400"}`,autoFocus:!0})}),e.jsxs("div",{className:"max-h-[240px] overflow-y-auto custom-scrollbar p-2 space-y-1",children:[e.jsx("div",{onClick:()=>{d(""),j(!1)},className:`flex items-center justify-center px-3 py-2 rounded-sm cursor-pointer border border-dashed transition-all ${y?"hover:bg-white/5 border-gray-700 text-gray-500 hover:text-gray-300 hover:border-gray-500":"hover:bg-gray-50 border-gray-200 text-gray-400 hover:text-gray-600 hover:border-gray-300"}`,children:"-"}),g.map(D=>e.jsxs("div",{onClick:()=>{d(D.id),j(!1)},className:"flex items-center justify-center relative gap-2 group cursor-pointer",children:[e.jsx("div",{className:`absolute left-2 opacity-0 group-hover:opacity-100 cursor-grab p-1 rounded ${y?"text-gray-500 hover:bg-white/10":"text-gray-300 hover:bg-gray-100"}`,children:e.jsx(ns,{size:14})}),e.jsx("div",{className:"w-[90%] px-3 py-2 rounded-sm text-white text-sm font-medium shadow-sm transition-transform active:scale-[0.98] text-center "+D.color,children:D.label})]},D.id)),g.length===0&&e.jsx("div",{className:`px-3 py-4 text-center text-xs ${y?"text-gray-500":"text-gray-400"}`,children:"No options found"})]})]}),document.body)]})},rt=({className:r="w-6 h-6"})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:r,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})}),Ae=({className:r="w-6 h-6"})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:r,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.813 15.904 9 18.75l-.813-2.846a4.5 4.5 0 0 0-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 0 0 3.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 0 0 3.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 0 0-3.09 3.09ZM18.259 8.715 18 9.75l-.259-1.035a3.375 3.375 0 0 0-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 0 0 2.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 0 0 2.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 0 0-2.456 2.456ZM16.894 20.567 16.5 21.75l-.394-1.183a2.25 2.25 0 0 0-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 0 0 1.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 0 0 1.423 1.423l1.183.394-1.183.394a2.25 2.25 0 0 0-1.423 1.423Z"})}),ur=({task:r,group:c,selectionColumnWidth:d,actionColumnWidth:s,expandedTaskIds:i,toggleTaskSelection:y,updateTask:v,updateTaskTextValue:j,toggleSubtask:N,setActiveDatePicker:x,handleContextMenu:n,deleteTask:z,handleAddSubtask:C,subtaskInput:I,setSubtaskInput:L,darkMode:g=!1})=>{var ae;const{attributes:D,listeners:U,setNodeRef:V,transform:E,transition:F,isDragging:J}=cs({id:r.id,data:{type:"TASK",task:r,group:c}}),X={transform:vs.Transform.toString(E),transition:F,opacity:J?.5:1,gridTemplateColumns:d+" "+c.columns.map(l=>l.width).join(" ")+" "+s};return e.jsxs(Xt.Fragment,{children:[e.jsxs("div",{ref:V,style:X,...D,...U,className:`grid gap-px group/row text-sm transition-colors relative ${J?"z-50 shadow-xl ring-2 ring-blue-500/20":""} ${g?"bg-[#1a1d24] hover:bg-white/5":"bg-white hover:bg-gray-50/50"}`,children:[e.jsxs("div",{className:`flex items-center justify-center py-1.5 border-r relative transition-colors sticky left-0 z-10 border-r-2 ${g?"bg-[#1a1d24] border-gray-800 border-r-gray-800 group-hover/row:bg-white/5":"bg-white border-gray-100 border-r-gray-200/50 hover:bg-gray-50"}`,children:[e.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-1.5",style:{backgroundColor:c.color}}),e.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded border-gray-300",checked:!!r.selected,onChange:l=>y(c.id,r.id,l.target.checked),onClick:l=>l.stopPropagation(),onMouseDown:l=>l.stopPropagation()})]}),c.columns.map(l=>{var Q;const Z=l.type==="name";return e.jsxs("div",{className:`relative border-r flex items-center ${Z?"justify-start pl-2 sticky left-[50px] z-10 border-r-2":"justify-center"} min-h-[32px] transition-colors ${g?"bg-[#1a1d24] border-gray-800 border-r-gray-800 group-hover/row:bg-white/5 text-gray-300":"bg-white border-gray-100 border-r-gray-200/50 group-hover/row:bg-[#f8f9fa]"}`,children:[Z&&e.jsx("div",{className:"cursor-grab active:cursor-grabbing text-gray-300 mr-2 opacity-0 group-hover/row:opacity-100 hover:text-gray-500 p-1",children:e.jsxs("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"9",cy:"12",r:"1"}),e.jsx("circle",{cx:"9",cy:"5",r:"1"}),e.jsx("circle",{cx:"9",cy:"19",r:"1"}),e.jsx("circle",{cx:"15",cy:"12",r:"1"}),e.jsx("circle",{cx:"15",cy:"5",r:"1"}),e.jsx("circle",{cx:"15",cy:"19",r:"1"})]})}),l.type==="name"&&e.jsxs("div",{className:"flex items-center w-full gap-2",children:[e.jsx("button",{onClick:f=>{f.stopPropagation(),N(r.id)},className:"p-0.5 hover:bg-gray-200 rounded text-gray-400 transition-colors",children:i.has(r.id)?e.jsx(Zt,{size:14}):e.jsx(at,{size:14})}),e.jsx("input",{value:r.name,onChange:f=>v(c.id,r.id,{name:f.target.value}),className:`w-full px-2 py-1.5 bg-transparent focus:outline-none focus:ring-2 focus:ring-blue-500 rounded font-medium truncate ${g?"text-gray-200":"text-gray-700"}`}),e.jsx("div",{className:"text-xs text-gray-400 mr-2",children:(Q=r.subtasks)!=null&&Q.length?`${r.subtasks.length} subtasks`:""})]}),l.type==="status"?e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(yt,{status:l.id==="col_status"?r.status:r.textValues[l.id]||O.New,onChange:f=>{l.id==="col_status"?v(c.id,r.id,{status:f}):j(c.id,r.id,l.id,f)},tabIndex:0,darkMode:g})}):l.type==="priority"?e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(bt,{priority:l.id==="col_priority"?r.priority:r.textValues[l.id]||ie.Normal,onChange:f=>{l.id==="col_priority"?v(c.id,r.id,{priority:f}):j(c.id,r.id,l.id,f)},tabIndex:0,darkMode:g})}):l.type==="person"?e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(ft,{personId:l.id==="col_person"?r.personId:r.textValues[l.id]||null,onChange:f=>{l.id==="col_person"?v(c.id,r.id,{personId:f}):j(c.id,r.id,l.id,f||"")},tabIndex:0,darkMode:g})}):l.type==="date"?e.jsx("div",{className:"w-full h-full relative flex items-center justify-center",children:e.jsx("div",{className:`text-xs font-medium px-2 py-1 rounded transition-colors focus:ring-2 focus:ring-blue-500 focus:outline-none cursor-pointer ${g?"text-gray-300 hover:text-white hover:bg-white/10":"text-gray-500 hover:text-gray-800 hover:bg-gray-100"}`,onClick:f=>{f.stopPropagation();const h=f.currentTarget.getBoundingClientRect(),o=l.id==="col_date",p=o?r.dueDate||"":r.textValues[l.id]||"";x({taskId:r.id,colId:l.id,date:p,rect:h,onSelect:m=>{o?v(c.id,r.id,{dueDate:m}):j(c.id,r.id,l.id,m)}})},tabIndex:0,onKeyDown:f=>{if(f.key==="Enter"||f.key===" "){f.preventDefault();const h=f.currentTarget.getBoundingClientRect(),o=l.id==="col_date",p=o?r.dueDate||"":r.textValues[l.id]||"";x({taskId:r.id,colId:l.id,date:p,rect:h,onSelect:m=>{o?v(c.id,r.id,{dueDate:m}):j(c.id,r.id,l.id,m)}})}},children:(()=>{const h=l.id==="col_date"?r.dueDate:r.textValues[l.id];return h?new Date(h).toLocaleDateString(void 0,{month:"short",day:"numeric"}):e.jsx("span",{className:"text-gray-300",children:"Set Date"})})()})}):null,l.type==="checkbox"&&e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx("input",{type:"checkbox",checked:r.textValues[l.id]==="true",onChange:f=>{j(c.id,r.id,l.id,f.target.checked?"true":"false")},className:`w-4 h-4 rounded text-blue-600 focus:ring-blue-500 cursor-pointer ${g?"border-gray-600 bg-transparent":"border-gray-300"}`})}),l.type==="money"&&e.jsx("div",{className:"w-full h-full px-2 py-1.5 text-sm text-gray-700 flex items-center justify-end font-mono",children:r.textValues[l.id]?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:`mr-1 ${g?"text-gray-500":"text-gray-400"}`,children:l.currency||"$"}),e.jsx("input",{type:"text",value:r.textValues[l.id],onChange:f=>{const h=f.target.value.replace(/[^0-9.]/g,"");j(c.id,r.id,l.id,h)},className:"bg-transparent focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1 w-full text-right",placeholder:"0.00"})]}):e.jsx("input",{type:"text",onChange:f=>{const h=f.target.value.replace(/[^0-9.]/g,"");j(c.id,r.id,l.id,h)},className:`bg-transparent focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1 w-full text-right ${g?"placeholder-gray-600 text-gray-300":"placeholder-gray-300 text-gray-700"}`,placeholder:l.currency||"$"})}),l.type==="website"&&e.jsxs("div",{className:"w-full h-full px-2 py-1.5 flex items-center gap-2",children:[e.jsx("div",{className:`p-1 rounded ${g?"bg-indigo-500/20 text-indigo-400":"bg-indigo-50 text-indigo-500"}`,children:e.jsx(Qt,{size:12})}),e.jsx("input",{type:"text",value:r.textValues[l.id]||"",onChange:f=>j(c.id,r.id,l.id,f.target.value),className:`w-full bg-transparent focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1 text-sm hover:underline cursor-text truncate ${g?"text-blue-400":"text-blue-600"}`,placeholder:"www.example.com"})]}),l.type==="email"&&e.jsxs("div",{className:"w-full h-full px-2 py-1.5 flex items-center gap-2",children:[e.jsx("div",{className:`p-1 rounded ${g?"bg-red-500/20 text-red-400":"bg-red-50 text-red-500"}`,children:e.jsx(Mt,{size:12})}),e.jsx("input",{type:"text",value:r.textValues[l.id]||"",onChange:f=>j(c.id,r.id,l.id,f.target.value),className:`w-full bg-transparent focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1 text-sm truncate ${g?"text-gray-300":"text-gray-700"}`,placeholder:"email@example.com"})]}),l.type==="phone"&&e.jsxs("div",{className:"w-full h-full px-2 py-1.5 flex items-center gap-2",children:[e.jsx("div",{className:`p-1 rounded ${g?"bg-orange-500/20 text-orange-400":"bg-orange-50 text-orange-500"}`,children:e.jsx(js,{size:12})}),e.jsx("input",{type:"text",value:r.textValues[l.id]||"",onChange:f=>j(c.id,r.id,l.id,f.target.value),className:`w-full bg-transparent focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1 text-sm truncate ${g?"text-gray-300":"text-gray-700"}`,placeholder:"+1 234 567 890"})]}),l.type==="location"&&e.jsxs("div",{className:"w-full h-full px-2 py-1.5 flex items-center gap-2",children:[e.jsx("div",{className:`p-1 rounded ${g?"bg-red-500/20 text-red-400":"bg-red-50 text-red-600"}`,children:e.jsx(es,{size:12})}),e.jsx("input",{type:"text",value:r.textValues[l.id]||"",onChange:f=>j(c.id,r.id,l.id,f.target.value),className:`w-full bg-transparent focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1 text-sm truncate ${g?"text-gray-300":"text-gray-700"}`,placeholder:"Add location"})]}),l.type==="rating"&&e.jsx("div",{className:"w-full h-full flex items-center justify-center gap-0.5",children:[1,2,3,4,5].map(f=>e.jsx(ht,{size:14,className:`cursor-pointer transition-colors ${f<=(Number(r.textValues[l.id])||0)?"text-amber-400 fill-amber-400":g?"text-gray-600":"text-gray-300"}`,onClick:()=>j(c.id,r.id,l.id,f.toString())},f))}),l.type==="progress_manual"&&e.jsxs("div",{className:"w-full h-full px-2 py-1.5 flex items-center gap-2",children:[e.jsxs("div",{className:`flex-1 h-2 rounded-full overflow-hidden relative group/progress cursor-pointer ${g?"bg-gray-700":"bg-gray-100"}`,children:[e.jsx("div",{className:"h-full bg-green-500 transition-all duration-300",style:{width:`${Number(r.textValues[l.id])||0}%`}}),e.jsx("input",{type:"range",min:"0",max:"100",value:Number(r.textValues[l.id])||0,onChange:f=>j(c.id,r.id,l.id,f.target.value),className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"})]}),e.jsxs("span",{className:`text-xs w-8 text-right ${g?"text-gray-400":"text-gray-500"}`,children:[Number(r.textValues[l.id])||0,"%"]})]}),l.type==="button"&&e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx("button",{className:"px-3 py-1 bg-blue-500 text-white text-xs font-medium rounded hover:bg-blue-600 transition-colors active:scale-95",onClick:()=>alert(`Action triggered for ${r.name}`),children:"Click Me"})}),l.type==="text"&&e.jsx("input",{type:"text",value:r.textValues[l.id]||"",onChange:f=>j(c.id,r.id,l.id,f.target.value),className:`w-full h-full text-center px-2 bg-transparent focus:outline-none focus:ring-2 focus:ring-blue-500 rounded ${g?"text-gray-300":"text-gray-600"}`,placeholder:"-",tabIndex:0}),l.type==="long_text"&&e.jsx("div",{className:"w-full h-full p-1",children:e.jsx(xr,{value:r.textValues[l.id]||"",onChange:f=>j(c.id,r.id,l.id,f),tabIndex:0,darkMode:g})}),l.type==="dropdown"&&e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(gr,{options:l.options,value:r.textValues[l.id],onChange:f=>j(c.id,r.id,l.id,f),tabIndex:0,darkMode:g})}),l.type==="number"&&e.jsx("input",{type:"text",value:r.textValues[l.id]||"",onChange:f=>{const h=f.target.value;/^[0-9.,]*$/.test(h)&&j(c.id,r.id,l.id,h)},onBlur:f=>{const h=f.target.value.replace(/,/g,"");if(h&&!isNaN(Number(h))){const o=Number(h).toLocaleString();j(c.id,r.id,l.id,o)}},className:"w-full h-full text-center px-2 bg-transparent focus:outline-none focus:ring-2 focus:ring-blue-500 rounded text-gray-600 font-mono text-xs",placeholder:"0",tabIndex:0})]},l.id)}),e.jsx("div",{className:`flex items-center justify-center border-l opacity-0 group-hover/row:opacity-100 transition-opacity ${g?"border-gray-800 bg-[#0f1115]":"border-gray-100 bg-white"}`,children:e.jsx("button",{onClick:()=>z(c.id,r.id),className:"text-gray-300 hover:text-red-500 hover:bg-red-50 p-1.5 rounded transition-all",children:e.jsx("svg",{className:"w-4 h-4",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})})]}),i.has(r.id)&&e.jsxs("div",{className:"contents",children:[(ae=r.subtasks)==null?void 0:ae.map(l=>e.jsxs("div",{className:`grid gap-px group/subrow text-sm transition-colors relative ${g?"bg-[#1a1d24]/50 hover:bg-white/5":"bg-gray-50/30 hover:bg-gray-50"}`,style:{gridTemplateColumns:d+" "+c.columns.map(Z=>Z.width).join(" ")+" "+s},children:[e.jsxs("div",{className:`flex items-center justify-center py-1.5 border-r relative sticky left-0 z-10 border-r-2 ${g?"bg-[#1a1d24]/50 border-gray-800 border-r-gray-800":"bg-gray-50/30 border-gray-100 border-r-gray-200/50"}`,children:[e.jsx("div",{className:"w-4 h-4"})," "]}),c.columns.map(Z=>{const Q=Z.type==="name";return e.jsxs("div",{className:`relative border-r flex items-center ${Q?"justify-start pl-8 sticky left-[50px] z-10 border-r-2":"justify-center"} min-h-[32px] transition-colors ${g?"bg-[#1a1d24]/50 border-gray-800 border-r-gray-800 group-hover/subrow:bg-white/5 text-gray-400":"bg-gray-50/30 border-gray-100 border-r-gray-200/50 group-hover/subrow:bg-gray-100"}`,children:[Q&&e.jsx(et,{size:14,className:"text-gray-400 mr-2"}),Q?e.jsx("input",{value:l.name,onChange:f=>{var o;const h=(o=r.subtasks)==null?void 0:o.map(p=>p.id===l.id?{...p,name:f.target.value}:p);v(c.id,r.id,{subtasks:h})},className:`w-full px-2 py-1.5 bg-transparent focus:outline-none focus:ring-2 focus:ring-blue-500 rounded text-sm truncate ${g?"text-gray-300":"text-gray-600"}`}):e.jsx("div",{className:"text-xs text-gray-400 italic",children:"-"})]},`${l.id}-${Z.id}`)}),e.jsx("div",{className:`border-l ${g?"bg-[#1a1d24]/50 border-gray-800":"bg-white border-gray-100"}`})]},l.id)),e.jsx("div",{className:`grid gap-px relative z-20 shadow-lg my-2 mx-4 rounded-lg border overflow-hidden animate-in slide-in-from-top-2 duration-200 ${g?"bg-[#1a1d24] border-gray-700":"bg-white border-gray-200"}`,style:{gridColumn:"1 / -1"},children:e.jsxs("div",{className:`flex items-center p-2 gap-3 ${g?"bg-[#1a1d24]":"bg-white"}`,children:[e.jsx("div",{className:`w-5 h-5 rounded-full border-2 border-dashed animate-spin-slow ${g?"border-gray-600":"border-gray-300"}`}),e.jsx("input",{autoFocus:!0,value:I[r.id]||"",onChange:l=>L({...I,[r.id]:l.target.value}),onKeyDown:l=>{l.key==="Enter"&&C(c.id,r.id)},placeholder:"Task Name or type '/' for commands",className:`flex-1 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-2 bg-transparent ${g?"text-gray-200 placeholder-gray-500":"text-gray-700 placeholder-gray-400"}`}),e.jsxs("div",{className:`flex items-center gap-1 border-l pl-3 ${g?"border-gray-700":"border-gray-200"}`,children:[e.jsx("button",{className:`p-1.5 rounded transition-colors ${g?"text-gray-400 hover:text-gray-200 hover:bg-white/10":"text-gray-400 hover:text-gray-600 hover:bg-gray-100"}`,children:e.jsx(xt,{size:16})}),e.jsx("button",{className:`p-1.5 rounded transition-colors ${g?"text-gray-400 hover:text-gray-200 hover:bg-white/10":"text-gray-400 hover:text-gray-600 hover:bg-gray-100"}`,children:e.jsx(ts,{size:16})}),e.jsx("div",{className:`w-px h-4 mx-1 ${g?"bg-gray-700":"bg-gray-200"}`}),e.jsx("button",{className:`p-1.5 rounded transition-colors ${g?"text-gray-400 hover:text-gray-200 hover:bg-white/10":"text-gray-400 hover:text-gray-600 hover:bg-gray-100"}`,children:e.jsx(lt,{size:16})}),e.jsx("button",{className:`p-1.5 rounded transition-colors ${g?"text-gray-400 hover:text-gray-200 hover:bg-white/10":"text-gray-400 hover:text-gray-600 hover:bg-gray-100"}`,children:e.jsx(ct,{size:16})}),e.jsx("button",{className:`p-1.5 rounded transition-colors ${g?"text-gray-400 hover:text-gray-200 hover:bg-white/10":"text-gray-400 hover:text-gray-600 hover:bg-gray-100"}`,children:e.jsx(ut,{size:16})}),e.jsx("button",{className:`p-1.5 rounded transition-colors ${g?"text-gray-400 hover:text-gray-200 hover:bg-white/10":"text-gray-400 hover:text-gray-600 hover:bg-gray-100"}`,children:e.jsx(Ns,{size:16})}),e.jsx("button",{className:`p-1.5 rounded transition-colors ${g?"text-gray-400 hover:text-gray-200 hover:bg-white/10":"text-gray-400 hover:text-gray-600 hover:bg-gray-100"}`,children:e.jsx(ss,{size:16})}),e.jsx("div",{className:`w-px h-4 mx-1 ${g?"bg-gray-700":"bg-gray-200"}`}),e.jsx("button",{onClick:()=>N(r.id),className:`px-3 py-1.5 text-sm font-medium rounded border transition-colors ${g?"text-gray-400 hover:bg-white/5 border-gray-700":"text-gray-600 hover:bg-gray-100 border-gray-200"}`,children:"Cancel"}),e.jsxs("button",{onClick:()=>C(c.id,r.id),className:"px-3 py-1.5 text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 rounded shadow-sm transition-colors flex items-center gap-1",children:["Save ",e.jsx(et,{size:12})]})]})]})})]})]})},Pr=({storageKey:r="taskboard-state",tasks:c,onTaskUpdate:d,darkMode:s=!1})=>{const{board:i,setBoard:y,aiPrompt:v,setAiPrompt:j,isAiLoading:N,aiAnalysis:x,setAiAnalysis:n,updateTask:z,toggleTaskSelection:C,toggleGroupSelection:I,updateTaskTextValue:L,addTask:g,deleteTask:D,addGroup:U,deleteGroup:V,updateGroupTitle:E,toggleGroupPin:F,addColumn:J,updateColumnTitle:X,deleteColumn:ae,duplicateColumn:l,reorderColumn:Z,updateColumnWidth:Q,handleGeneratePlan:f,handleAnalyzeBoard:h}=sr(r),[o,p]=w.useState(null),m=(t,u)=>{p({type:"task",id:u,groupId:t})},k=t=>{p({type:"group",groupId:t})},A=()=>{p({type:"selected"})},M=()=>{if(!o)return;const{type:t,id:u,groupId:b}=o;t==="task"&&u&&b?D(b,u):t==="group"&&b?V(b):t==="selected"?Lt():t==="column"&&u&&b&&ae(b,u),p(null)};w.useEffect(()=>{c&&c.length>0&&y(t=>{const u=[...t.groups];u.length===0&&u.push({id:"g1",title:"Tasks",color:"#3b82f6",tasks:[],columns:[],isPinned:!1});const b=u[0],T=c.map(P=>{let a=O.New;return P.status==="To do"?a=O.New:P.status==="In Progress"?a=O.Working:P.status==="Review"?a=O.AlmostFinish:P.status==="Complete"&&(a=O.Done),{id:P.id,name:P.title,status:a,priority:P.priority,personId:P.assigneeId||null,dueDate:P.dueDate?new Date(P.dueDate).toISOString():"",textValues:{},selected:!1}});return u[0]={...b,tasks:T},{...t,groups:u}})},[c,y]);const Y=(t,u,b)=>{if(z(t,u,b),d){const T={};b.name&&(T.title=b.name),b.status&&(b.status===O.New||b.status===O.Pending?T.status="To do":b.status===O.Working||b.status===O.Stuck?T.status="In Progress":b.status===O.AlmostFinish?T.status="Review":b.status===O.Done&&(T.status="Complete")),b.priority&&(T.priority=b.priority),b.personId!==void 0&&(T.assigneeId=b.personId||void 0),b.dueDate&&(T.dueDate=new Date(b.dueDate)),d(u,T)}},[de,Le]=w.useState(!1),[hr,mr]=w.useState(null),[he,me]=w.useState(null),[ee,pe]=w.useState(null),[Fe,wt]=w.useState(new Set),[Oe,Ve]=w.useState({}),[Te,Ge]=w.useState(null),[Re,Be]=w.useState(null),[He,Ue]=w.useState(null),We=it.getCurrentUser(),vt=We&&r===`taskboard-${We.id}`,[ye,Pe]=w.useState(null),[R,qe]=w.useState({}),[pr,jt]=w.useState(null),Nt=w.useRef(null),$t=w.useRef(i.groups.length),[oe,Ye]=w.useState(null);w.useEffect(()=>{const t=b=>{if(!oe)return;const T=b.clientX-oe.startX,P=Math.max(50,oe.startWidth+T);Q(oe.groupId,oe.colId,P)},u=()=>{oe&&(Ye(null),document.body.style.cursor="")};return oe&&(document.addEventListener("mousemove",t),document.addEventListener("mouseup",u),document.body.style.cursor="col-resize"),()=>{document.removeEventListener("mousemove",t),document.removeEventListener("mouseup",u),document.body.style.cursor=""}},[oe,Q]),w.useEffect(()=>{$t.current=i.groups.length},[i.groups.length]);const Ct=t=>{const u=new Set(Fe);u.has(t)?u.delete(t):u.add(t),wt(u)},St=(t,u)=>{var P;const b=(P=Oe[u])==null?void 0:P.trim();if(!b)return;const T={id:`subtask-${se()}`,name:b,status:O.New,priority:ie.Normal,dueDate:"",personId:null,textValues:{},selected:!1};y(a=>({...a,groups:a.groups.map(S=>S.id===t?{...S,tasks:S.tasks.map($=>$.id===u?{...$,subtasks:[...$.subtasks||[],T]}:$)}:S)})),Ve(a=>({...a,[u]:""}))},K=(t,u)=>{qe(b=>({...b,[t]:{...b[t],...u}}))},_e=t=>{const u=R[t]||{},b=u.name||"";b.trim()&&(g(t,b,u),qe(T=>{const P={...T};return delete P[t],P}))},Ke=(t,u,b)=>{t.preventDefault(),Pe({x:t.clientX,y:t.clientY,groupId:u,colId:b})},Dt=(t,u,b)=>{if(t==="delete")ae(u,b);else if(t==="duplicate")l(u,b);else if(t!=="move_left"){if(t!=="move_right"){if(t==="rename"){const T=prompt("Enter new column name:");T&&X(u,b,T)}}}Pe(null)},zt=ps(ys(bs,{activationConstraint:{distance:5}})),kt=t=>{const{active:u}=t;Le(!0)},It=t=>{const{active:u,over:b}=t;if(Le(!1),jt(null),!b)return;const T=u.id,P=b.id;T!==P&&y(a=>{const S=a.groups.find(B=>B.tasks.some(re=>re.id===T)),$=a.groups.find(B=>B.tasks.some(re=>re.id===P));if(!S||!$)return a;const _=S.tasks.findIndex(B=>B.id===T),W=$.tasks.findIndex(B=>B.id===P);if(S.id===$.id){const B=ds(S.tasks,_,W),re=a.groups.map(ne=>ne.id===S.id?{...ne,tasks:B}:ne);return{...a,groups:re}}else{const B=[...S.tasks],[re]=B.splice(_,1),ne=[...$.tasks];ne.splice(W,0,re);const ze=a.groups.map(le=>le.id===S.id?{...le,tasks:B}:le.id===$.id?{...le,tasks:ne}:le);return{...a,groups:ze}}})},Tt=(t,u,b,T)=>{if(T===0){t.preventDefault();return}t.dataTransfer.setData("application/json",JSON.stringify({type:"COLUMN",groupId:u,colId:b,index:T})),t.dataTransfer.effectAllowed="move"},Pt=(t,u)=>{t.preventDefault(),u===0?t.dataTransfer.dropEffect="none":t.dataTransfer.dropEffect="move"},_t=(t,u,b)=>{t.preventDefault();const T=t.dataTransfer.getData("application/json");if(T)try{const{type:P,groupId:a,index:S}=JSON.parse(T);P==="COLUMN"&&a===u&&S!==b&&b!==0&&Z(u,S,b)}catch{}},At=t=>{if(t.length===0)return{done:0,working:0,stuck:0,pending:0,almostFinish:0,new:0};const u=t.length,b=t.filter(_=>_.status===O.Done).length,T=t.filter(_=>_.status===O.Working).length,P=t.filter(_=>_.status===O.Stuck).length,a=t.filter(_=>_.status===O.Pending).length,S=t.filter(_=>_.status===O.AlmostFinish).length,$=t.filter(_=>_.status===O.New).length;return{done:b/u*100,working:T/u*100,stuck:P/u*100,pending:a/u*100,almostFinish:S/u*100,new:$/u*100}},Ce="50px",Se="50px",De=i.groups.flatMap(t=>t.tasks.filter(u=>u.selected).map(u=>({groupId:t.id,task:u}))).length,Et=()=>{I("all",!1)},Lt=()=>{De!==0&&y(t=>({...t,groups:t.groups.map(u=>({...u,tasks:u.tasks.filter(b=>!b.selected)}))}))},Ft=()=>{De!==0&&y(t=>({...t,groups:t.groups.map(u=>{const b=u.tasks.filter(P=>P.selected);if(b.length===0)return u;const T=b.map(P=>({...P,id:crypto.randomUUID(),name:P.name+" (Copy)",selected:!0}));return{...u,tasks:[...u.tasks,...T]}})}))};return e.jsx(fs,{sensors:zt,collisionDetection:ws,onDragStart:kt,onDragEnd:It,children:e.jsxs("div",{className:`flex w-full h-screen overflow-hidden font-sans transition-colors ${s?"bg-[#0f1115] text-gray-200":"bg-white text-gray-800"}`,children:[e.jsxs("main",{className:`flex-1 flex flex-col h-screen overflow-hidden relative transition-colors ${s?"bg-[#0f1115]":"bg-white"}`,children:[e.jsxs("header",{className:`h-16 flex items-center justify-between px-8 flex-shrink-0 transition-colors ${s?"bg-[#0f1115] border-b border-white/5":"bg-white"}`,children:[e.jsx("div",{children:e.jsx("h1",{className:`text-2xl font-bold tracking-tight ${s?"text-white":"text-gray-800"}`,children:i.name})}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("button",{onClick:h,disabled:N,className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-indigo-50 to-purple-50 text-indigo-600 rounded-full hover:shadow-md hover:scale-105 transition-all text-sm font-semibold border border-indigo-100",children:[e.jsx(Ae,{className:"w-4 h-4"}),N?"Thinking...":"Analyze Board"]}),e.jsxs("button",{onClick:U,className:"flex items-center gap-2 px-4 py-2 bg-[#1e2126] text-white rounded-md hover:bg-[#2c3036] transition text-sm font-medium shadow-sm",children:[e.jsx(rt,{className:"w-4 h-4"})," New Group"]})]})]}),e.jsxs("div",{ref:Nt,className:"flex-1 overflow-y-auto overflow-x-hidden custom-scroll p-6 pb-96",children:[x&&e.jsxs("div",{className:"mb-8 p-6 bg-white border border-indigo-100 rounded-2xl shadow-xl relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-indigo-400 via-purple-400 to-pink-400"}),e.jsxs("h3",{className:"text-indigo-900 font-bold text-lg mb-3 flex items-center gap-2",children:[e.jsx(Ae,{className:"w-5 h-5 text-indigo-500"})," AI Assistant Insights"]}),e.jsx("p",{className:"text-gray-700 whitespace-pre-line text-sm leading-relaxed",children:x}),e.jsx("button",{onClick:()=>n(null),className:"mt-4 text-xs font-semibold text-gray-400 hover:text-gray-600 uppercase tracking-wider",children:"Dismiss"})]}),e.jsx("div",{className:"space-y-8 w-full",children:[...i.groups].sort((t,u)=>(u.isPinned?1:0)-(t.isPinned?1:0)).map(t=>{var P;const u=At(t.tasks),b=t.tasks.length>0&&t.tasks.every(a=>a.selected),T=t.tasks.some(a=>a.selected);return e.jsxs("div",{id:`group-${t.id}`,className:`relative flex flex-col w-full mb-10 shadow-sm border rounded-xl overflow-hidden transition-colors ${s?"border-gray-800 bg-[#1a1d24]":"border-gray-200/60"}`,children:[e.jsxs("div",{className:`flex items-center px-4 py-3 relative w-full border-b transition-colors ${s?"bg-[#1a1d24] border-gray-800":"bg-white border-gray-200"}`,children:[e.jsxs("div",{className:"flex items-center gap-3 pr-4",children:[e.jsx("div",{className:"cursor-pointer hover:bg-gray-100 p-1.5 rounded transition-colors group/menu relative",children:e.jsx("svg",{className:"w-4 h-4 text-gray-400 group-hover/menu:text-blue-500",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})}),e.jsx("input",{value:t.title,onChange:a=>E(t.id,a.target.value),className:`text-xl font-bold bg-transparent border border-transparent rounded px-2 py-0.5 focus:outline-none focus:border-blue-500 w-full max-w-md transition-all ${s?"hover:border-gray-700 focus:bg-[#0f1115]":"hover:border-gray-300 focus:bg-white"}`,style:{color:t.color}}),e.jsxs("div",{className:"ml-4 flex items-center gap-2",children:[e.jsxs("div",{className:"flex h-1.5 w-24 overflow-hidden rounded-full bg-gray-100",children:[e.jsx("div",{className:"h-full bg-[#33D995]",style:{width:`${u.done}%`}}),e.jsx("div",{className:"h-full bg-[#FFBE66]",style:{width:`${u.working}%`}}),e.jsx("div",{className:"h-full bg-[#FF7085]",style:{width:`${u.stuck}%`}})]}),e.jsxs("span",{className:"text-xs text-gray-400 font-medium",children:[Math.round(u.done),"%"]})]})]}),e.jsx("div",{className:"flex-1"}),e.jsxs("div",{className:"flex items-center gap-1 px-2",children:[e.jsx("button",{onClick:()=>F(t.id),className:"p-2 transition-colors rounded-md "+(t.isPinned?"text-blue-500 bg-blue-50":"text-gray-300 hover:text-gray-500 hover:bg-gray-100"),title:t.isPinned?"Unpin Group":"Pin Group",children:e.jsx(Ys,{className:"w-4 h-4 "+(t.isPinned?"fill-current":"")})}),e.jsx("button",{onClick:a=>{a.stopPropagation(),Ge(t.id)},className:"p-2 transition-colors rounded-md text-gray-300 hover:text-gray-500 hover:bg-gray-100",title:"Send to Reminders",children:e.jsx(ct,{className:"w-4 h-4"})}),e.jsx("button",{onClick:a=>{a.stopPropagation(),Be(t.id)},className:"p-2 transition-colors rounded-md text-gray-300 hover:text-gray-500 hover:bg-gray-100",title:"Send to Goals",children:e.jsx(nt,{className:"w-4 h-4"})}),!vt&&e.jsx("button",{onClick:a=>{a.stopPropagation(),Ue(t.id)},className:"p-2 transition-colors rounded-md text-gray-300 hover:text-gray-500 hover:bg-gray-100",title:"Send to Tasks Board",children:e.jsx(ot,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>k(t.id),className:"text-gray-400 hover:text-red-500 p-2 transition-colors hover:bg-red-50 rounded-md",title:"Delete Group",children:e.jsx(Ee,{size:14})})]})]}),e.jsxs("div",{className:"overflow-x-auto w-full [&::-webkit-scrollbar]:hidden",children:[e.jsx("div",{className:`sticky top-0 z-[1] min-w-full w-fit transition-colors ${s?"bg-[#1a1d24]":"bg-white"}`,style:{boxShadow:"0 2px 5px -2px rgba(0,0,0,0.05)"},children:e.jsxs("div",{className:`grid gap-px border-y text-xs font-semibold uppercase tracking-wide transition-colors ${s?"bg-gray-800 border-gray-800 text-gray-400":"bg-gray-200 border-gray-200 text-gray-500"}`,style:{gridTemplateColumns:Ce+" "+t.columns.map(a=>a.width).join(" ")+" "+Se},children:[e.jsx("div",{className:`flex items-center justify-center sticky left-0 z-20 border-r-2 transition-colors ${s?"bg-[#1a1d24]/95 border-r-gray-800":"bg-gray-50/80 border-r-gray-200/50"}`,children:e.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded border-gray-300",checked:b,ref:a=>{a&&(a.indeterminate=T&&!b)},onChange:a=>I(t.id,a.target.checked)})}),t.columns.map((a,S)=>e.jsx("div",{className:`relative group backdrop-blur-sm transition-colors ${a.type==="name"?`sticky left-[50px] z-20 border-r-2 ${s?"border-r-gray-800":"border-r-gray-200/50"}`:"cursor-grab active:cursor-grabbing"} ${s?"bg-[#1a1d24]/95 hover:bg-white/5":"bg-gray-50/80 hover:bg-gray-100"}`,onContextMenu:$=>Ke($,t.id,a.id),draggable:a.type!=="name",onDragStart:$=>Tt($,t.id,a.id,S),onDragOver:$=>Pt($,S),onDrop:$=>_t($,t.id,S),children:e.jsxs("div",{className:"flex items-center justify-between h-full",children:[e.jsx("input",{value:a.title,onChange:$=>X(t.id,a.id,$.target.value),className:`w-full h-full bg-transparent px-3 py-2 text-center text-[11px] focus:outline-none border-b-2 border-transparent focus:border-blue-500 ${s?"focus:bg-[#0f1115] focus:text-white text-gray-300":"focus:bg-white focus:text-gray-800"}`,style:{textAlign:a.type==="name"||a.type==="long_text"?"left":"center"}}),e.jsx("div",{className:"absolute right-1 top-1/2 transform -translate-y-1/2 opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer p-1 hover:bg-gray-200 rounded",onClick:$=>{$.stopPropagation();const _=$.currentTarget.getBoundingClientRect();pe((ee==null?void 0:ee.groupId)===t.id?null:{groupId:t.id,rect:_})},children:e.jsx(qt,{size:14,className:"text-gray-400"})}),e.jsx("div",{className:"absolute right-0 top-0 bottom-0 w-1 cursor-col-resize hover:bg-blue-400/50 z-30",onMouseDown:$=>{$.stopPropagation(),$.preventDefault();const _=parseInt(a.width.replace("px",""))||140;Ye({groupId:t.id,colId:a.id,startX:$.clientX,startWidth:_})},onClick:$=>$.stopPropagation()})]})},a.id)),e.jsx("div",{className:`flex items-center justify-center relative group ${s?"bg-[#1a1d24]/95":"bg-gray-50/80"}`,children:e.jsx("div",{className:"cursor-pointer w-6 h-6 rounded flex items-center justify-center transition-all duration-200 "+((ee==null?void 0:ee.groupId)===t.id?"bg-gray-200 text-gray-900":"text-gray-400 hover:text-gray-700 hover:bg-gray-200/50"),onClick:a=>{a.stopPropagation();const S=a.currentTarget.getBoundingClientRect();pe((ee==null?void 0:ee.groupId)===t.id?null:{groupId:t.id,rect:S})},title:"Add Column",children:e.jsx(rt,{className:"w-4 h-4"})})})]})}),e.jsx("div",{className:`divide-y relative z-0 min-w-full w-fit ${s?"divide-gray-800":"divide-gray-100"}`,children:e.jsx(is,{items:t.tasks.map(a=>a.id),strategy:os,children:t.tasks.map(a=>e.jsx(ur,{task:a,group:t,selectionColumnWidth:Ce,actionColumnWidth:Se,expandedTaskIds:Fe,toggleTaskSelection:C,updateTask:Y,deleteTask:()=>m(t.id,a.id),updateTaskTextValue:L,toggleSubtask:Ct,setActiveDatePicker:me,handleContextMenu:Ke,handleAddSubtask:St,subtaskInput:Oe,setSubtaskInput:Ve,darkMode:s},a.id))})}),e.jsxs("div",{className:`grid gap-px border-t group/add-row transition-colors min-w-full w-fit ${s?"bg-[#1a1d24] border-gray-800 hover:bg-white/5":"bg-white border-gray-200 hover:bg-gray-50"}`,style:{gridTemplateColumns:Ce+" "+t.columns.map(a=>a.width).join(" ")+" "+Se},children:[e.jsxs("div",{className:`flex items-center justify-center border-r sticky left-0 z-10 border-r-2 transition-colors relative ${s?"bg-[#1a1d24] border-gray-800 border-r-gray-800 group-hover/add-row:bg-white/5":"bg-white border-gray-100 border-r-gray-200/50 group-hover/add-row:bg-gray-50"}`,children:[e.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-1.5",style:{backgroundColor:t.color}}),e.jsx("div",{className:"w-4 h-4 rounded border border-gray-200 flex items-center justify-center text-gray-300",children:e.jsx(dt,{size:10})})]}),e.jsx("div",{className:`flex items-center pl-2 py-2 border-r sticky left-[50px] z-10 border-r-2 transition-colors ${s?"bg-[#1a1d24] border-gray-800 border-r-gray-800 group-hover/add-row:bg-white/5":"bg-white border-gray-100 border-r-gray-200/50 group-hover/add-row:bg-gray-50"}`,children:e.jsx("input",{type:"text",placeholder:"+ Add task",value:((P=R[t.id])==null?void 0:P.name)||"",onChange:a=>K(t.id,{name:a.target.value}),className:`w-full bg-transparent text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-2 ${s?"placeholder-gray-600 text-gray-200":"placeholder-gray-400 text-gray-700"}`,onKeyDown:a=>{a.key==="Enter"&&_e(t.id)}})}),t.columns.slice(1).map(a=>{var S,$,_,W,B,re,ne,ze,le,Je,Xe,Ze,Qe;return e.jsx("div",{className:`border-r min-h-[32px] flex items-center justify-center ${s?"bg-[#1a1d24] border-gray-800":"bg-white border-gray-100"}`,children:a.type==="status"?e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(yt,{status:a.id==="col_status"?((S=R[t.id])==null?void 0:S.status)||O.New:((_=($=R[t.id])==null?void 0:$.textValues)==null?void 0:_[a.id])||O.New,onChange:G=>{var H;a.id==="col_status"?K(t.id,{status:G}):K(t.id,{textValues:{...(H=R[t.id])==null?void 0:H.textValues,[a.id]:G}})},tabIndex:0,darkMode:s})}):a.type==="priority"?e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(bt,{priority:a.id==="col_priority"?((W=R[t.id])==null?void 0:W.priority)||ie.Normal:((re=(B=R[t.id])==null?void 0:B.textValues)==null?void 0:re[a.id])||ie.Normal,onChange:G=>{var H;a.id==="col_priority"?K(t.id,{priority:G}):K(t.id,{textValues:{...(H=R[t.id])==null?void 0:H.textValues,[a.id]:G}})},tabIndex:0,darkMode:s})}):a.type==="person"?e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(ft,{personId:a.id==="col_person"?((ne=R[t.id])==null?void 0:ne.personId)||null:((le=(ze=R[t.id])==null?void 0:ze.textValues)==null?void 0:le[a.id])||null,onChange:G=>{var H;a.id==="col_person"?K(t.id,{personId:G}):K(t.id,{textValues:{...(H=R[t.id])==null?void 0:H.textValues,[a.id]:G||""}})},tabIndex:0,darkMode:s})}):a.type==="date"?e.jsx("div",{className:"w-full h-full relative flex items-center justify-center",children:e.jsx("div",{className:`text-xs cursor-pointer font-medium px-2 py-1 rounded transition-colors focus:ring-2 focus:ring-blue-500 focus:outline-none ${s?"text-gray-400 hover:text-gray-200 hover:bg-white/10":"text-gray-500 hover:text-gray-800 hover:bg-gray-100"}`,onClick:G=>{var xe,be,ke;G.stopPropagation();const H=G.currentTarget.getBoundingClientRect(),te=a.id==="col_date",ce=te?((xe=R[t.id])==null?void 0:xe.dueDate)||"":((ke=(be=R[t.id])==null?void 0:be.textValues)==null?void 0:ke[a.id])||"";me({taskId:"draft-"+t.id,colId:a.id,date:ce,rect:H,onSelect:fe=>{var we;te?K(t.id,{dueDate:fe}):K(t.id,{textValues:{...(we=R[t.id])==null?void 0:we.textValues,[a.id]:fe}})}})},tabIndex:0,onKeyDown:G=>{var H,te,ce;if(G.key==="Enter"||G.key===" "){G.preventDefault();const xe=G.currentTarget.getBoundingClientRect(),be=a.id==="col_date",ke=be?((H=R[t.id])==null?void 0:H.dueDate)||"":((ce=(te=R[t.id])==null?void 0:te.textValues)==null?void 0:ce[a.id])||"";me({taskId:"draft-"+t.id,colId:a.id,date:ke,rect:xe,onSelect:fe=>{var we;be?K(t.id,{dueDate:fe}):K(t.id,{textValues:{...(we=R[t.id])==null?void 0:we.textValues,[a.id]:fe}})}})}},children:(()=>{var te,ce,xe;const H=a.id==="col_date"?(te=R[t.id])==null?void 0:te.dueDate:(xe=(ce=R[t.id])==null?void 0:ce.textValues)==null?void 0:xe[a.id];return H?new Date(H).toLocaleDateString(void 0,{month:"short",day:"numeric"}):e.jsx("span",{className:"text-gray-300",children:"Set Date"})})()})}):a.type==="text"?e.jsx("input",{type:"text",value:((Xe=(Je=R[t.id])==null?void 0:Je.textValues)==null?void 0:Xe[a.id])||"",onChange:G=>{var H;return K(t.id,{textValues:{...(H=R[t.id])==null?void 0:H.textValues,[a.id]:G.target.value}})},className:"w-full h-full text-center px-2 bg-transparent focus:outline-none focus:ring-2 focus:ring-blue-500 rounded text-gray-600",placeholder:"-",tabIndex:0,onKeyDown:G=>G.key==="Enter"&&_e(t.id)}):a.type==="number"?e.jsx("input",{type:"text",value:((Qe=(Ze=R[t.id])==null?void 0:Ze.textValues)==null?void 0:Qe[a.id])||"",onChange:G=>{var te;const H=G.target.value;/^[0-9.,]*$/.test(H)&&K(t.id,{textValues:{...(te=R[t.id])==null?void 0:te.textValues,[a.id]:H}})},className:"w-full h-full text-center px-2 bg-transparent focus:outline-none focus:ring-2 focus:ring-blue-500 rounded text-gray-600 font-mono text-xs",placeholder:"0",tabIndex:0,onKeyDown:G=>G.key==="Enter"&&_e(t.id)}):e.jsx("div",{className:"w-full h-full"})},a.id)}),e.jsx("div",{className:`transition-colors ${s?"bg-[#1a1d24] group-hover/add-row:bg-white/5":"bg-white group-hover/add-row:bg-gray-50"}`})]}),e.jsxs("div",{className:`grid gap-px border-t rounded-b-xl min-w-full w-fit ${s?"bg-[#1a1d24] border-gray-800":"bg-white border-gray-200"}`,style:{gridTemplateColumns:Ce+" "+t.columns.map(a=>a.width).join(" ")+" "+Se},children:[e.jsx("div",{className:`flex items-center justify-center border-r sticky left-0 z-10 border-r-2 ${s?"bg-[#1a1d24] border-gray-800 border-r-gray-800":"bg-white border-gray-100 border-r-gray-200/50"}`}),e.jsx("div",{className:`flex items-center justify-center sticky left-[50px] z-10 border-t ${s?"bg-[#1a1d24] border-gray-800":"bg-white border-gray-200"}`,children:e.jsx("span",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-wider"})}),t.columns.slice(1).map(a=>e.jsxs("div",{className:`border-r min-h-[32px] flex items-center justify-center px-2 ${s?"bg-[#1a1d24] border-gray-800":"bg-white border-gray-100"}`,children:[a.type==="status"&&e.jsx("div",{className:"w-full h-4 flex rounded-sm overflow-hidden",children:Object.values(O).map(S=>{const $=t.tasks.filter(W=>(a.id==="col_status"?W.status:W.textValues[a.id])===S).length;if($===0)return null;const _=$/t.tasks.length*100;return e.jsx("div",{style:{width:_+"%"},title:S+": "+$,className:pt[S]+" h-full hover:opacity-80 transition-opacity"},S)})}),a.type==="priority"&&e.jsx("div",{className:"w-full h-4 flex rounded-sm overflow-hidden",children:Object.values(ie).map(S=>{const $=t.tasks.filter(W=>(a.id==="col_priority"?W.priority:W.textValues[a.id])===S).length;if($===0)return null;const _=$/t.tasks.length*100;return e.jsx("div",{style:{width:_+"%"},title:S+": "+$,className:$e[S]+" h-full hover:opacity-80 transition-opacity"},S)})}),a.type==="person"&&(()=>{const S=t.tasks.filter($=>{const _=a.id==="col_owner"?$.personId:$.textValues[a.id];return _&&_.length>0}).length;return S===0?null:e.jsxs("div",{className:"flex flex-col items-center justify-center leading-none",children:[e.jsx("span",{className:"text-sm text-gray-500 font-medium",children:S}),e.jsx("span",{className:"text-[10px] text-gray-400",children:"owners"})]})})(),a.type==="money"&&(()=>{const S=t.tasks.reduce(($,_)=>{var B;const W=(B=_.textValues[a.id])==null?void 0:B.replace(/,/g,"");return $+(Number(W)||0)},0);return e.jsxs("div",{className:"flex flex-col items-center justify-center leading-none",children:[e.jsxs("span",{className:"text-xs text-gray-700 font-bold font-mono",children:[a.currency||"$"," ",S.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]}),e.jsx("span",{className:"text-[10px] text-gray-400",children:"sum"})]})})(),a.type==="checkbox"&&(()=>{const S=t.tasks.filter($=>$.textValues[a.id]==="true").length;return S===0?null:e.jsxs("div",{className:"flex flex-col items-center justify-center leading-none",children:[e.jsx("span",{className:"text-xs text-gray-700 font-bold font-mono",children:S}),e.jsx("span",{className:"text-[10px] text-gray-400",children:"checked"})]})})(),a.type==="number"&&(()=>{const S=t.tasks.reduce(($,_)=>{var B;const W=(B=_.textValues[a.id])==null?void 0:B.replace(/,/g,"");return $+(Number(W)||0)},0);return e.jsxs("div",{className:"flex flex-col items-center justify-center leading-none",children:[e.jsx("span",{className:"text-xs text-gray-700 font-bold font-mono",children:S.toLocaleString()}),e.jsx("span",{className:"text-[10px] text-gray-400",children:"sum"})]})})(),(a.type==="text"||a.type==="long_text"||a.type==="date"||a.type==="dropdown"||a.type==="name")&&(()=>{const S=t.tasks.filter($=>{if(a.type==="name")return!0;const _=$.textValues[a.id];return _&&_.trim().length>0}).length;return S===0?null:e.jsxs("div",{className:"flex flex-col items-center justify-center leading-none",children:[e.jsx("span",{className:"text-xs text-gray-700 font-bold font-mono",children:S}),e.jsx("span",{className:"text-[10px] text-gray-400",children:"count"})]})})()]},a.id)),e.jsx("div",{className:`${s?"bg-[#1a1d24]":"bg-white"}`})]})]})]},t.id)})})]}),e.jsx(Yt,{children:De>0&&e.jsx(Me.div,{className:"fixed bottom-16 md:bottom-20 left-0 right-0 px-4 z-50 pointer-events-none",initial:{opacity:0,y:16,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:16,scale:.98},transition:{duration:.18,ease:"easeOut"},children:e.jsx(Me.div,{className:`mx-auto max-w-5xl shadow-2xl border rounded-2xl px-6 py-3 flex items-center gap-6 pointer-events-auto justify-center ${s?"bg-[#1a1d24] border-gray-800":"bg-white border-gray-200"}`,initial:{opacity:0,y:8},animate:{opacity:1,y:0},exit:{opacity:0,y:8},transition:{duration:.18,ease:"easeOut",delay:.02},children:e.jsx("div",{className:"flex items-center gap-5 text-sm text-gray-600 flex-wrap md:flex-nowrap justify-center w-full",children:e.jsxs("div",{className:"flex items-center gap-5 flex-wrap md:flex-nowrap justify-center",children:[e.jsxs("button",{className:"flex items-center gap-2 hover:text-gray-900 whitespace-nowrap text-gray-700",onClick:Ft,children:[e.jsx(gt,{size:18,className:"text-gray-700"})," ",e.jsx("span",{children:"Duplicate"})]}),e.jsxs("button",{className:"flex items-center gap-2 hover:text-gray-900 whitespace-nowrap text-gray-700",children:[e.jsx(Kt,{size:18,className:"text-gray-700"})," ",e.jsx("span",{children:"Export"})]}),e.jsxs("button",{className:"flex items-center gap-2 hover:text-gray-900 whitespace-nowrap text-gray-700",children:[e.jsx(Cs,{size:18,className:"text-gray-700"})," ",e.jsx("span",{children:"Archive"})]}),e.jsxs("button",{className:"flex items-center gap-2 hover:text-gray-900 whitespace-nowrap text-gray-700",onClick:A,children:[e.jsx(Ee,{size:18,className:"text-gray-700"})," ",e.jsx("span",{children:"Delete"})]}),e.jsxs("button",{className:"flex items-center gap-2 text-gray-400 cursor-not-allowed whitespace-nowrap",disabled:!0,children:[e.jsx(tt,{size:18,className:"text-gray-400"})," ",e.jsx("span",{children:"Convert"})]}),e.jsxs("button",{className:"flex items-center gap-2 hover:text-gray-900 whitespace-nowrap text-gray-700",children:[e.jsx(tt,{size:18,className:"text-gray-700"})," ",e.jsx("span",{children:"Move to"})]}),e.jsxs("button",{className:"flex items-center gap-2 hover:text-gray-900 whitespace-nowrap text-gray-700",children:[e.jsx(ht,{size:18,className:"text-gray-700"})," ",e.jsx("span",{children:"Sidekick"})]}),e.jsxs("button",{className:"flex items-center gap-2 hover:text-gray-900 whitespace-nowrap text-gray-700",children:[e.jsx(xt,{size:18,className:"text-gray-700"})," ",e.jsx("span",{children:"Apps"})]}),e.jsxs("button",{className:"flex items-center gap-2 hover:text-gray-900 whitespace-nowrap text-gray-700",onClick:Et,children:[e.jsx(Ne,{size:18,className:"text-gray-700"})," ",e.jsx("span",{children:"Clear"})]})]})})})})}),e.jsx("div",{className:"absolute bottom-6 left-1/2 transform -translate-x-1/2 w-full max-w-2xl px-4",children:e.jsxs("div",{className:`backdrop-blur-md rounded-full shadow-2xl border p-2 flex items-center gap-3 pl-5 transition-all focus-within:ring-4 ring-indigo-500/10 ${s?"bg-[#1a1d24]/90 border-white/10":"bg-white/90 border-white/50"}`,children:[e.jsx(Ae,{className:"text-indigo-500 w-5 h-5 animate-pulse"}),e.jsx("input",{type:"text",value:v,onChange:t=>j(t.target.value),onKeyDown:t=>t.key==="Enter"&&f(),placeholder:"Ask AI to build a plan (e.g. 'Plan a product launch for next month')",className:"flex-1 bg-transparent focus:outline-none text-sm text-gray-800 py-2 placeholder-gray-500"}),e.jsx("button",{onClick:f,disabled:N||!v,className:"bg-indigo-600 text-white rounded-full px-6 py-2.5 text-sm font-medium hover:bg-indigo-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-all hover:shadow-lg flex items-center gap-2",children:N?e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):e.jsx("span",{children:"Generate"})})]})})]}),ye&&e.jsx(ar,{x:ye.x,y:ye.y,onClose:()=>Pe(null),onAction:t=>Dt(t,ye.groupId,ye.colId)}),he&&ue.createPortal(e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-[9998] bg-transparent",onClick:t=>{t.stopPropagation(),me(null)}}),e.jsx("div",{className:"fixed z-[9999]",style:{top:he.rect.bottom+8,left:he.rect.left+he.rect.width/2,transform:"translateX(-50%)"},onClick:t=>t.stopPropagation(),children:e.jsx(rr,{date:he.date,onSelect:t=>{he.onSelect(t)},onClose:()=>me(null)})})]}),document.body),ee&&ue.createPortal(e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-[9998] bg-transparent",onClick:t=>{t.stopPropagation(),pe(null)}}),e.jsx("div",{className:"fixed top-[100px] bottom-0 right-0 z-[9999]",onClick:t=>t.stopPropagation(),children:e.jsx(ls,{onClose:()=>pe(null),onSelect:(t,u,b,T)=>{ee&&J(ee.groupId,t,u,b,T),pe(null)},darkMode:s})})]}),document.body),Te&&e.jsx(nr,{isOpen:!!Te,onClose:()=>Ge(null),group:i.groups.find(t=>t.id===Te)}),Re&&e.jsx(ir,{isOpen:!0,onClose:()=>Be(null),group:i.groups.find(t=>t.id===Re)}),He&&e.jsx(or,{isOpen:!0,onClose:()=>Ue(null),group:i.groups.find(t=>t.id===He)}),e.jsx(Jt,{isOpen:!!o,onClose:()=>p(null),onConfirm:M,title:(o==null?void 0:o.type)==="task"?"Delete Task":(o==null?void 0:o.type)==="group"?"Delete Group":(o==null?void 0:o.type)==="column"?"Delete Column":"Delete Selected Tasks",message:(o==null?void 0:o.type)==="task"?"Are you sure you want to delete this task? This action cannot be undone.":(o==null?void 0:o.type)==="group"?"Are you sure you want to delete this group and all its tasks? This action cannot be undone.":(o==null?void 0:o.type)==="column"?"Are you sure you want to delete this column? This action cannot be undone.":`Are you sure you want to delete ${De} tasks? This action cannot be undone.`,confirmText:"Delete",variant:"danger"})]})})};export{Ys as P,O as S,Pr as T,pt as a,sr as u};
