import{c as m,r as d,j as t,ad as w,Z as p,ae as g,i as f,a7 as x}from"./index-B2SFjcJL.js";/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"22",x2:"18",y1:"12",y2:"12",key:"l9bcsi"}],["line",{x1:"6",x2:"2",y1:"12",y2:"12",key:"13hhkx"}],["line",{x1:"12",x2:"12",y1:"6",y2:"2",key:"10w3f3"}],["line",{x1:"12",x2:"12",y1:"22",y2:"18",key:"15g9kq"}]],u=m("crosshair",v);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y=[["path",{d:"M16.247 7.761a6 6 0 0 1 0 8.478",key:"1fwjs5"}],["path",{d:"M19.075 4.933a10 10 0 0 1 0 14.134",key:"ehdyv1"}],["path",{d:"M4.925 19.067a10 10 0 0 1 0-14.134",key:"1q22gi"}],["path",{d:"M7.753 16.239a6 6 0 0 1 0-8.478",key:"r2q7qm"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],j=m("radio",y);class M{constructor(e,s){this.range=150,this.damage=10,this.fireRate=60,this.cooldown=0,this.color="#3b82f6",this.target=null,this.rotation=0,this.scanAngle=0,this.x=e,this.y=s}update(e,s){this.cooldown>0&&this.cooldown--,this.scanAngle+=.02,this.target=null;let a=this.range;for(const i of e){const r=Math.hypot(i.x-this.x,i.y-this.y);r<=this.range&&r<a&&(a=r,this.target=i)}if(this.target){const i=Math.atan2(this.target.y-this.y,this.target.x-this.x);this.rotation=i,this.cooldown<=0&&(this.shoot(s),this.cooldown=this.fireRate)}}draw(e){e.save(),e.translate(this.x,this.y),e.strokeStyle="rgba(59, 130, 246, 0.3)",e.lineWidth=1,e.beginPath(),e.arc(0,0,this.range,0,Math.PI*2),e.stroke();const s=e.createConicGradient(this.scanAngle,0,0);s.addColorStop(0,"rgba(59, 130, 246, 0)"),s.addColorStop(.1,"rgba(59, 130, 246, 0.1)"),s.addColorStop(.2,"rgba(59, 130, 246, 0)"),e.fillStyle=s,e.beginPath(),e.arc(0,0,this.range,0,Math.PI*2),e.fill(),e.strokeStyle="rgba(59, 130, 246, 0.1)",e.beginPath(),e.arc(0,0,this.range*.6,0,Math.PI*2),e.stroke(),e.restore();const a=e.createRadialGradient(this.x-10,this.y-10,5,this.x,this.y,30);a.addColorStop(0,"#60a5fa"),a.addColorStop(.5,"#2563eb"),a.addColorStop(1,"#1e3a8a"),e.shadowBlur=20,e.shadowColor="#3b82f6",e.fillStyle=a,e.beginPath(),e.arc(this.x,this.y,25,0,Math.PI*2),e.fill(),e.shadowBlur=0,e.save(),e.translate(this.x,this.y),e.rotate(this.rotation),e.fillStyle="#93c5fd",e.fillRect(10,-8,20,6),e.fillRect(10,2,20,6),e.fillStyle="#1d4ed8",e.beginPath(),e.arc(0,0,15,0,Math.PI*2),e.fill(),e.fillStyle="#ffffff",e.beginPath(),e.arc(0,0,5,0,Math.PI*2),e.fill(),e.restore(),this.target&&this.cooldown>this.fireRate-5&&(e.shadowBlur=15,e.shadowColor="#60a5fa",e.strokeStyle="#60a5fa",e.lineWidth=3,e.beginPath(),e.moveTo(this.x,this.y),e.lineTo(this.target.x,this.target.y),e.stroke(),e.shadowBlur=0,e.lineWidth=1)}shoot(e){this.target&&this.target.takeDamage(this.damage)}}class N{constructor(e,s,a,i){this.speed=1,this.health=20,this.maxHealth=20,this.radius=12,this.color="#ef4444",this.active=!0,this.rotation=0,this.x=e,this.y=s,this.targetX=a,this.targetY=i,this.rotationSpeed=(Math.random()-.5)*.1}update(){const e=Math.atan2(this.targetY-this.y,this.targetX-this.x);this.x+=Math.cos(e)*this.speed,this.y+=Math.sin(e)*this.speed,this.rotation+=this.rotationSpeed}draw(e){e.save(),e.translate(this.x,this.y),e.rotate(this.rotation);const s=e.createRadialGradient(-5,-5,2,0,0,this.radius);s.addColorStop(0,"#ff8888"),s.addColorStop(.5,this.color),s.addColorStop(1,"#550000"),e.fillStyle=s,e.beginPath(),e.arc(0,0,this.radius,0,Math.PI*2),e.fill(),e.shadowBlur=10,e.shadowColor=this.color,e.strokeStyle="rgba(255, 100, 100, 0.5)",e.lineWidth=1,e.stroke(),e.shadowBlur=0,e.restore();const a=this.health/this.maxHealth;a<1&&(e.fillStyle="rgba(0, 0, 0, 0.5)",e.fillRect(this.x-12,this.y-20,24,4),e.fillStyle=a>.5?"#00ff00":"#ff0000",e.fillRect(this.x-12,this.y-20,24*a,4))}takeDamage(e){this.health-=e}}class C{constructor(e,s,a=300){this.stars=[],this.width=e,this.height=s,this.initStars(a)}initStars(e){for(let s=0;s<e;s++)this.stars.push({x:Math.random()*this.width,y:Math.random()*this.height,size:Math.random()*1.5+.5,speed:Math.random()*.2+.05,brightness:Math.random()*.8})}resize(e,s){this.width=e,this.height=s}update(){this.stars.forEach(e=>{e.y+=e.speed,e.y>this.height&&(e.y=0,e.x=Math.random()*this.width),e.brightness+=(Math.random()-.5)*.05,e.brightness>.8&&(e.brightness=.8),e.brightness<.2&&(e.brightness=.2)})}draw(e){e.fillStyle="#000000",e.fillRect(0,0,this.width,this.height),this.stars.forEach(s=>{e.fillStyle=`rgba(255, 255, 255, ${s.brightness})`,e.beginPath(),e.arc(s.x,s.y,s.size,0,Math.PI*2),e.fill()})}}class _{constructor(e,s,a,i,r){this.x=e,this.y=s;const h=Math.random()*Math.PI*2;this.vx=Math.cos(h)*i,this.vy=Math.sin(h)*i,this.life=1,this.maxLife=1,this.color=a,this.size=r}update(){this.x+=this.vx,this.y+=this.vy,this.life-=.02,this.size*=.95}draw(e){e.globalAlpha=this.life,e.fillStyle=this.color,e.beginPath(),e.arc(this.x,this.y,this.size,0,Math.PI*2),e.fill(),e.globalAlpha=1}}class k{constructor(e,s){this.isRunning=!1,this.animationId=0,this.tower=null,this.enemies=[],this.particles=[],this.frameCount=0,this.wave=1,this.cash=100,this.health=100,this.maxHealth=100,this.critChance=.1,this.critMult=2,this.onStatsUpdate=null,this.canvas=e,this.ctx=e.getContext("2d"),this.onStatsUpdate=s||null,this.starfield=new C(this.canvas.width,this.canvas.height),this.resize(),window.addEventListener("resize",this.resize.bind(this)),this.tower=new M(this.canvas.width/2,this.canvas.height/2)}resize(){var e,s;this.canvas.width=((e=this.canvas.parentElement)==null?void 0:e.clientWidth)||800,this.canvas.height=((s=this.canvas.parentElement)==null?void 0:s.clientHeight)||600,this.starfield.resize(this.canvas.width,this.canvas.height),this.tower&&(this.tower.x=this.canvas.width/2,this.tower.y=this.canvas.height/2)}start(){this.isRunning||(this.isRunning=!0,this.loop())}stop(){this.isRunning=!1,cancelAnimationFrame(this.animationId),window.removeEventListener("resize",this.resize.bind(this))}loop(){this.isRunning&&(this.update(),this.draw(),this.frameCount%10===0&&this.onStatsUpdate&&this.tower&&this.onStatsUpdate({cash:this.cash,wave:this.wave,health:this.health,maxHealth:this.maxHealth,damage:this.tower.damage,range:this.tower.range,fireRate:this.tower.fireRate,critChance:this.critChance,critMult:this.critMult,enemiesAlive:this.enemies.length}),this.animationId=requestAnimationFrame(this.loop.bind(this)))}update(){this.frameCount++,this.starfield.update(),this.frameCount%100===0&&this.spawnEnemy(),this.tower&&this.tower.update(this.enemies,this.spawnProjectile.bind(this)),this.enemies.forEach(e=>{e.update(),Math.hypot(this.tower.x-e.x,this.tower.y-e.y)<30+e.radius&&(e.active=!1,this.takeDamage(10),this.spawnExplosion(e.x,e.y,"#ff4444"))}),this.particles.forEach(e=>e.update()),this.particles=this.particles.filter(e=>e.life>0),this.enemies=this.enemies.filter(e=>e.health<=0?(this.cash+=10,this.spawnExplosion(e.x,e.y,e.color),!1):!!e.active)}takeDamage(e){this.health-=e,this.spawnExplosion(this.tower.x,this.tower.y,"#3b82f6",20),this.health<=0&&(this.health=0)}spawnEnemy(){if(!this.tower)return;let e,s;Math.random()<.5?(e=Math.random()<.5?-50:this.canvas.width+50,s=Math.random()*this.canvas.height):(e=Math.random()*this.canvas.width,s=Math.random()<.5?-50:this.canvas.height+50),this.enemies.push(new N(e,s,this.tower.x,this.tower.y))}spawnExplosion(e,s,a,i=10){for(let r=0;r<i;r++)this.particles.push(new _(e,s,a,Math.random()*3+1,Math.random()*3+1))}spawnProjectile(e,s,a){if(this.tower){let i=this.tower.damage,r=Math.random()<this.critChance,h="#60a5fa";r&&(i*=this.critMult,h="#facc15",this.spawnExplosion(a.x,a.y,h,5)),a.takeDamage(i)}}draw(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.starfield.draw(this.ctx),this.tower&&this.tower.draw(this.ctx),this.enemies.forEach(e=>e.draw(this.ctx)),this.particles.forEach(e=>e.draw(this.ctx))}upgradeDamage(){this.cash>=50&&this.tower&&(this.cash-=50,this.tower.damage+=5)}upgradeSpeed(){this.cash>=50&&this.tower&&(this.cash-=50,this.tower.fireRate=Math.max(5,this.tower.fireRate-5))}upgradeRange(){this.cash>=50&&this.tower&&(this.cash-=50,this.tower.range+=20)}upgradeCritChance(){this.cash>=100&&(this.cash-=100,this.critChance=Math.min(1,this.critChance+.05))}upgradeCritMult(){this.cash>=100&&(this.cash-=100,this.critMult+=.5)}}const R=()=>{const l=d.useRef(null),[e,s]=d.useState(null),[a,i]=d.useState({cash:0,wave:1,health:100,maxHealth:100,damage:0,range:0,fireRate:0,critChance:0,critMult:0,enemiesAlive:0});d.useEffect(()=>{if(l.current&&!e){const h=new k(l.current,c=>{i(c)});return s(h),h.start(),()=>{h.stop()}}},[l]);const r=h=>{e&&(h==="damage"&&e.upgradeDamage(),h==="speed"&&e.upgradeSpeed(),h==="range"&&e.upgradeRange(),h==="critChance"&&e.upgradeCritChance(),h==="critMult"&&e.upgradeCritMult())};return t.jsxs("div",{className:"h-full w-full bg-black relative overflow-hidden flex flex-col font-mono select-none",children:[t.jsx("div",{className:"absolute inset-0 pointer-events-none bg-[radial-gradient(circle_at_center,transparent_0%,rgba(0,0,0,0.8)_100%)] z-10"}),t.jsxs("div",{className:"absolute top-0 left-0 right-0 h-20 flex items-start justify-between px-8 pt-6 z-20 pointer-events-none",children:[t.jsxs("div",{className:"flex items-center space-x-8 pointer-events-auto",children:[t.jsxs("div",{className:"flex flex-col",children:[t.jsx("span",{className:"text-[10px] text-green-500/80 uppercase tracking-widest mb-1",children:"Credits"}),t.jsxs("div",{className:"text-4xl font-bold text-green-400 drop-shadow-[0_0_15px_rgba(74,222,128,0.6)] font-mono tracking-tighter",children:["$",a.cash.toLocaleString()]})]}),t.jsx("div",{className:"h-10 w-[1px] bg-gradient-to-b from-transparent via-gray-700 to-transparent"}),t.jsxs("div",{className:"flex flex-col",children:[t.jsx("span",{className:"text-[10px] text-blue-500/80 uppercase tracking-widest mb-1",children:"Wave"}),t.jsx("div",{className:"text-4xl font-bold text-blue-400 drop-shadow-[0_0_15px_rgba(96,165,250,0.6)] font-mono tracking-tighter",children:a.wave.toString().padStart(2,"0")})]})]}),t.jsxs("div",{className:"flex flex-col items-end w-96 pointer-events-auto",children:[t.jsxs("div",{className:"flex items-center justify-between w-full mb-1",children:[t.jsx("span",{className:"text-[10px] text-red-500/80 uppercase tracking-widest",children:"Hull Integrity"}),t.jsxs("span",{className:"text-sm font-bold text-red-400 drop-shadow-[0_0_8px_rgba(248,113,113,0.5)]",children:[Math.ceil(a.health),"/",a.maxHealth]})]}),t.jsx("div",{className:"w-full h-1.5 bg-gray-900/50 rounded-full overflow-hidden backdrop-blur-sm border border-gray-800/50",children:t.jsx("div",{className:"h-full bg-gradient-to-r from-red-600 to-red-400 shadow-[0_0_15px_rgba(248,113,113,0.6)]",style:{width:`${a.health/a.maxHealth*100}%`}})})]})]}),t.jsxs("div",{className:"absolute left-8 top-32 bottom-32 w-64 flex flex-col space-y-6 z-20 pointer-events-none",children:[t.jsxs("div",{className:"flex items-center space-x-2 border-b border-gray-800/50 pb-2",children:[t.jsx(w,{size:16,className:"text-cyan-400"}),t.jsx("span",{className:"text-xs font-bold text-cyan-400 uppercase tracking-widest drop-shadow-[0_0_5px_rgba(34,211,238,0.5)]",children:"System Status"})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsx(n,{label:"Damage Output",value:a.damage,icon:t.jsx(p,{size:14,className:"text-yellow-500"})}),t.jsx(n,{label:"Target Range",value:a.range,icon:t.jsx(u,{size:14,className:"text-green-500"})}),t.jsx(n,{label:"Cycle Rate",value:`${(60/a.fireRate).toFixed(1)}/s`,icon:t.jsx(g,{size:14,className:"text-blue-500"})}),t.jsx("div",{className:"h-[1px] w-full bg-gradient-to-r from-gray-800/50 to-transparent"}),t.jsx(n,{label:"Crit Probability",value:`${(a.critChance*100).toFixed(0)}%`,icon:t.jsx(f,{size:14,className:"text-purple-500"})}),t.jsx(n,{label:"Crit Amplifier",value:`${a.critMult}x`,icon:t.jsx(x,{size:14,className:"text-red-500"})})]})]}),t.jsxs("div",{className:"absolute right-8 top-32 bottom-32 w-64 flex flex-col space-y-6 z-20 pointer-events-none",children:[t.jsxs("div",{className:"flex items-center justify-end space-x-2 border-b border-gray-800/50 pb-2",children:[t.jsx("span",{className:"text-xs font-bold text-cyan-400 uppercase tracking-widest drop-shadow-[0_0_5px_rgba(34,211,238,0.5)]",children:"Scanner Feed"}),t.jsx(j,{size:16,className:"text-cyan-400 animate-pulse"})]}),t.jsxs("div",{className:"flex flex-col items-end space-y-1",children:[t.jsx("span",{className:"text-[10px] text-gray-500 uppercase tracking-widest",children:"Hostiles Detected"}),t.jsx("span",{className:"text-4xl font-bold text-red-500 drop-shadow-[0_0_10px_rgba(239,68,68,0.5)] font-mono",children:a.enemiesAlive})]}),t.jsxs("div",{className:"flex-1 border border-gray-800/30 rounded-lg relative overflow-hidden flex items-center justify-center",children:[t.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(transparent_1px,rgba(0,255,255,0.05)_1px),linear-gradient(90deg,transparent_1px,rgba(0,255,255,0.05)_1px)] bg-[size:20px_20px]"}),t.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_center,rgba(0,255,255,0.1)_0%,transparent_70%)] animate-pulse"}),t.jsx("span",{className:"text-[10px] text-cyan-500/50 uppercase tracking-widest z-10",children:"Sector Scan Active"})]})]}),t.jsx("div",{className:"flex-1 relative z-0",children:t.jsx("canvas",{ref:l,className:"absolute inset-0 w-full h-full block"})}),t.jsx("div",{className:"absolute bottom-8 left-0 right-0 flex items-center justify-center space-x-6 z-20 pointer-events-none",children:t.jsxs("div",{className:"flex items-center space-x-4 pointer-events-auto p-4 rounded-2xl bg-gradient-to-t from-black/80 to-transparent backdrop-blur-[2px]",children:[t.jsx(o,{icon:t.jsx(p,{size:20}),label:"Damage",cost:50,onClick:()=>r("damage"),canAfford:a.cash>=50,level:a.damage/5}),t.jsx(o,{icon:t.jsx(g,{size:20}),label:"Speed",cost:50,onClick:()=>r("speed"),canAfford:a.cash>=50,level:Math.max(1,12-a.fireRate/5)}),t.jsx(o,{icon:t.jsx(u,{size:20}),label:"Range",cost:50,onClick:()=>r("range"),canAfford:a.cash>=50,level:a.range/20}),t.jsx("div",{className:"w-[1px] h-12 bg-gray-800/50 mx-2"}),t.jsx(o,{icon:t.jsx(f,{size:20}),label:"Crit %",cost:100,onClick:()=>r("critChance"),canAfford:a.cash>=100,level:a.critChance*20,color:"purple"}),t.jsx(o,{icon:t.jsx(x,{size:20}),label:"Crit Dmg",cost:100,onClick:()=>r("critMult"),canAfford:a.cash>=100,level:a.critMult*2,color:"red"})]})})]})},n=({label:l,value:e,icon:s})=>t.jsxs("div",{className:"flex items-center justify-between group",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"opacity-70 group-hover:opacity-100 transition-opacity",children:s}),t.jsx("span",{className:"text-[10px] text-gray-500 uppercase tracking-widest group-hover:text-gray-300 transition-colors",children:l})]}),t.jsx("span",{className:"text-sm font-bold text-gray-300 font-mono group-hover:text-white transition-colors group-hover:drop-shadow-[0_0_5px_rgba(255,255,255,0.3)]",children:e})]}),o=({icon:l,label:e,cost:s,onClick:a,canAfford:i,level:r,color:h="blue"})=>{const c={blue:"text-blue-400 group-hover:text-blue-300 border-blue-500/30 group-hover:border-blue-400/60 group-hover:shadow-[0_0_15px_rgba(59,130,246,0.3)]",purple:"text-purple-400 group-hover:text-purple-300 border-purple-500/30 group-hover:border-purple-400/60 group-hover:shadow-[0_0_15px_rgba(168,85,247,0.3)]",red:"text-red-400 group-hover:text-red-300 border-red-500/30 group-hover:border-red-400/60 group-hover:shadow-[0_0_15px_rgba(239,68,68,0.3)]"};return t.jsxs("button",{onClick:a,disabled:!i,className:`
                group relative flex flex-col items-center justify-center w-20 h-20 rounded-xl border backdrop-blur-sm transition-all duration-300
                ${i?`bg-gray-900/40 hover:bg-gray-800/60 hover:-translate-y-1 cursor-pointer ${c[h]}`:"bg-black/20 border-gray-800/30 text-gray-700 cursor-not-allowed opacity-40 grayscale"}
            `,children:[t.jsx("div",{className:"mb-1 transition-transform group-hover:scale-110 duration-300",children:l}),t.jsx("span",{className:"text-[9px] font-bold uppercase tracking-wider opacity-80",children:e}),t.jsxs("span",{className:`text-[10px] font-mono mt-1 ${i?"text-green-400":"text-gray-600"}`,children:["$",s]}),t.jsx("div",{className:"absolute top-1 right-1 flex space-x-[1px]",children:[...Array(Math.min(3,Math.floor(r)))].map((S,b)=>t.jsx("div",{className:`w-0.5 h-0.5 rounded-full ${i?"bg-current opacity-50":"bg-gray-700"}`},b))})]})};export{R as default};
