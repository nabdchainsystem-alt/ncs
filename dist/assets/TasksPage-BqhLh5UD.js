import{c as K,r as m,a8 as ee,j as e,P as te,ag as se,ah as re}from"./index-sqQsKImc.js";import{u as ae,T as ne,P as h,S as c}from"./TaskBoard-DC-l2SVj.js";import{u as oe,a as le,D as ie,c as de,P as ce,e as ue,C as me}from"./core.esm-TRimKU_7.js";import{S as xe,v as pe,u as be}from"./sortable.esm-BXA-dmXh.js";import{L as ge}from"./list-Dm11EKlK.js";import{S as fe}from"./square-kanban-DGFt-Phx.js";import{A as he}from"./arrow-up-down-Cf4uiBIA.js";import"./index-Ca_DMGSD.js";import"./DropdownCell-CSE_WS_c.js";import"./smile-CQ81lmMB.js";import"./phone-7-BcSGjI.js";import"./type-L4PgBd7E.js";import"./tag-Dqtpp501.js";import"./paperclip-BPOrNbhc.js";import"./minus-CDGUDZnw.js";import"./star-hYvHy8aM.js";import"./DatePicker-pXxBGZdI.js";import"./copy-BQSRc9CV.js";import"./remindersService-Dlo5WC4R.js";import"./goalsService-XSbMoi0L.js";import"./list-ordered-5Rzf6Kqc.js";import"./flag-DM0neTDo.js";import"./corner-down-right-Dl5DQQhO.js";import"./pin-DjGnB7tA.js";/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye=[["path",{d:"m7 20 5-5 5 5",key:"13a0gw"}],["path",{d:"m7 4 5 5 5-5",key:"1kwcof"}]],ke=K("chevrons-down-up",ye);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const we=[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]],ve=K("chevrons-up-down",we),a={pageBg:"bg-stone-50",container:"w-full",sectionPadding:"py-10",fontMain:"font-serif antialiased",h1:"text-5xl font-medium tracking-tight text-gray-900 font-serif",subline:"text-lg text-gray-500 font-serif italic mt-2",btnGroup:"flex items-stretch border border-gray-900 rounded-sm bg-white shadow-sm hover:shadow-md transition-shadow",btnLeft:"px-6 py-2.5 flex items-center gap-2 text-sm font-bold border-r border-gray-900 hover:bg-gray-50 text-gray-900",btnRight:"px-6 py-2.5 flex items-center gap-2 text-sm font-bold hover:bg-gray-50 text-gray-900",toolbar:"flex flex-wrap items-center gap-4 mb-8 pb-6 border-b border-gray-200",toolBtn:"flex items-center px-4 py-2 text-xs font-bold uppercase tracking-widest text-gray-600 hover:text-black hover:bg-white border border-transparent hover:border-gray-200 rounded-sm transition-all",searchInput:"bg-transparent border-b border-gray-200 focus:border-black outline-none py-2 w-64 text-sm font-serif placeholder:italic"},Ye=()=>{const[r,x]=m.useState("table"),[g,p]=m.useState(""),[b,N]=m.useState("all"),[i,S]=m.useState("none"),[y,C]=m.useState(!1),[z,D]=m.useState(!1),[_,M]=m.useState(0),[U,V]=m.useState(0),P=ee.getCurrentUser(),T=P?`taskboard-${P.id}`:"taskboard-default",W=m.useMemo(()=>[{label:"Expand all",icon:ke,onClick:()=>M(t=>t+1)},{label:"Collapse all",icon:ve,onClick:()=>V(t=>t+1)}],[]),{board:B,setBoard:H}=ae(T),k=g.trim().toLowerCase(),I=k.length>0||b!=="all",O=t=>{if(!t)return c.New;const s=t.toLowerCase();return s.includes("done")||s.includes("complete")?c.Done:s.includes("work")||s.includes("progress")||s.includes("doing")?c.Working:s.includes("stuck")||s.includes("block")?c.Stuck:s.includes("pending")||s.includes("todo")||s.includes("to do")||s.includes("backlog")?c.Pending:s.includes("almost")||s.includes("review")?c.AlmostFinish:c.New},F=t=>!k||(t.name||"").toLowerCase().includes(k)?!0:Object.values(t.textValues||{}).some(s=>(s||"").toLowerCase().includes(k)),G=(t,s)=>{var u,l,f;if(b==="all")return!0;const n=(l=(u=s.columns)==null?void 0:u.find(w=>w.type==="status"))==null?void 0:l.id,o=O(t.status||(n?(f=t.textValues)==null?void 0:f[n]:void 0));return b==="done"?o===c.Done:b==="new"?o===c.New||o===c.Pending:o!==c.Done},$=t=>{if(i==="none")return t;const s=[...t];if(i==="name")s.sort((n,o)=>(n.name||"").localeCompare(o.name||""));else if(i==="dueAsc"||i==="dueDesc")s.sort((n,o)=>{const u=n.dueDate?new Date(n.dueDate).getTime():1/0,l=o.dueDate?new Date(o.dueDate).getTime():1/0;return i==="dueAsc"?u-l:l-u});else if(i==="priority"){const n={[h.Urgent]:1,[h.High]:2,[h.Medium]:3,[h.Normal]:4,[h.Low]:5};s.sort((o,u)=>(n[o.priority]||99)-(n[u.priority]||99))}return s},Q=m.useMemo(()=>(B.groups||[]).map(t=>{const s=$((t.tasks||[]).filter(n=>F(n)&&G(n,t)));return{...t,tasks:s}}).filter(t=>!I||t.tasks.length>0),[B.groups,I,$,F,G]),q=oe(le(ce,{activationConstraint:{distance:5}})),Y=t=>{const{active:s,over:n}=t;if(!n||!s.data.current)return;const{taskId:o,fromGroupId:u}=s.data.current,l=n.data.current,f=(l==null?void 0:l.groupId)||u,w=l==null?void 0:l.taskId;!o||!f||H(v=>{const L=v.groups.map(d=>({...d,tasks:[...d.tasks]})),A=L.find(d=>d.id===u),j=L.find(d=>d.id===f);if(!A||!j)return v;const R=A.tasks.findIndex(d=>d.id===o);if(R===-1)return v;const[J]=A.tasks.splice(R,1);let E=j.tasks.length;if(w){const d=j.tasks.findIndex(X=>X.id===w);d>=0&&(E=d)}return j.tasks.splice(E,0,J),{...v,groups:L}})},Z=Q;return e.jsxs("div",{className:`h-screen w-full ${a.pageBg} ${a.fontMain} relative overflow-hidden flex flex-col`,children:[e.jsx("div",{className:"fixed inset-0 pointer-events-none opacity-[0.02]",style:{backgroundImage:"radial-gradient(#000 0.5px, transparent 0.5px)",backgroundSize:"24px 24px"}}),e.jsx("div",{className:"flex-1 overflow-y-auto overflow-x-hidden relative",children:e.jsxs("div",{className:`${a.container} px-8 md:px-16 pb-64 relative z-10`,children:[e.jsxs("header",{className:`${a.sectionPadding} pt-20 pb-12 flex flex-col md:flex-row justify-between items-end gap-8`,children:[e.jsxs("div",{children:[e.jsx("h1",{className:a.h1,children:"Your Tasks"}),e.jsx("p",{className:a.subline,children:"Manage, track, and complete."})]}),e.jsxs("div",{className:a.btnGroup,children:[e.jsxs("button",{onClick:()=>x("table"),className:r==="table"?a.btnLeft+" bg-gray-50":a.btnLeft,children:[e.jsx(ge,{size:16,strokeWidth:2}),"List"]}),e.jsxs("button",{onClick:()=>x("kanban"),className:r==="kanban"?a.btnRight+" border-l border-gray-900 bg-gray-50":a.btnRight+" border-l border-gray-900",children:[e.jsx(fe,{size:16,strokeWidth:2}),"Kanban"]}),e.jsx("button",{className:a.btnRight+" border-l border-gray-900 !px-4 text-emerald-600",onClick:()=>M(t=>t+1),children:e.jsx(te,{size:16,strokeWidth:2})})]})]}),e.jsxs("div",{className:a.toolbar,children:[e.jsxs("div",{className:"relative mr-4",children:[e.jsx(se,{className:"absolute left-0 top-1/2 transform -translate-y-1/2 text-gray-400",size:14}),e.jsx("input",{type:"text",placeholder:"Search tasks...",value:g,onChange:t=>p(t.target.value),className:a.searchInput+" pl-6"})]}),e.jsx("div",{className:"h-6 w-px bg-gray-200 mx-2"}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>{C(!y),D(!1)},className:a.toolBtn+(I?" text-blue-600":""),children:[e.jsx(re,{size:14,className:"mr-2"})," Filter"]}),y&&e.jsxs("div",{className:"absolute top-full left-0 mt-2 w-48 bg-white border border-gray-200 rounded-sm shadow-xl z-20 py-2",children:[e.jsx("span",{className:"block px-4 py-2 text-[10px] font-bold uppercase tracking-widest text-gray-400",children:"Status"}),[{key:"all",label:"All"},{key:"active",label:"Active"},{key:"done",label:"Done"},{key:"new",label:"New"}].map(t=>e.jsx("button",{onClick:()=>{N(t.key),C(!1)},className:`w-full text-left px-4 py-2 text-sm font-serif hover:bg-gray-50 ${b===t.key?"text-black font-bold":"text-gray-600"}`,children:t.label},t.key))]})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>{D(!z),C(!1)},className:a.toolBtn+(i!=="none"?" text-blue-600":""),children:[e.jsx(he,{size:14,className:"mr-2"})," Sort"]}),z&&e.jsxs("div",{className:"absolute top-full left-0 mt-2 w-56 bg-white border border-gray-200 rounded-sm shadow-xl z-20 py-2",children:[e.jsx("span",{className:"block px-4 py-2 text-[10px] font-bold uppercase tracking-widest text-gray-400",children:"Order By"}),[{key:"none",label:"Default"},{key:"name",label:"Name (A-Z)"},{key:"dueAsc",label:"Due Date (Earliest)"},{key:"dueDesc",label:"Due Date (Latest)"},{key:"priority",label:"Priority (High)"}].map(t=>e.jsx("button",{onClick:()=>{S(t.key),D(!1)},className:`w-full text-left px-4 py-2 text-sm font-serif hover:bg-gray-50 ${i===t.key?"text-black font-bold":"text-gray-600"}`,children:t.label},t.key))]})]}),e.jsx("div",{className:"h-6 w-px bg-gray-200 mx-2"}),W.map(t=>e.jsxs("button",{onClick:t.onClick,className:a.toolBtn,title:t.label,children:[e.jsx(t.icon,{size:14,className:"mr-2"})," ",t.label]},t.label))]}),e.jsxs("div",{className:"w-full",children:[r==="table"&&e.jsx(ne,{storageKey:T,expandAllSignal:_,collapseAllSignal:U,searchQuery:g,statusFilter:b,sortKey:i,autoHeight:!0}),r==="kanban"&&e.jsx("div",{className:"w-full overflow-x-auto pb-12",children:e.jsx(ie,{sensors:q,collisionDetection:de,onDragEnd:Y,children:e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 items-start",children:Z.map(t=>e.jsx(je,{group:t},t.id))})})})]})]})})]})},je=({group:r})=>{const{setNodeRef:x,isOver:g}=Se(r.id);return e.jsxs("div",{ref:x,className:`w-full min-w-[300px] bg-white rounded-xl shadow-[0_2px_8px_rgba(0,0,0,0.04)] border border-gray-100 flex flex-col transition-all ${g?"ring-2 ring-black":""}`,children:[e.jsxs("div",{className:"p-4 border-b border-gray-100 flex items-center justify-between",children:[e.jsx("h3",{className:"font-serif font-bold text-gray-900",children:r.title}),e.jsx("span",{className:"text-[10px] font-bold px-2 py-1 rounded-full bg-gray-100 text-gray-500",children:r.tasks.length})]}),e.jsx(xe,{items:r.tasks.map(p=>p.id),strategy:pe,children:e.jsxs("div",{className:"flex-1 max-h-[500px] overflow-y-auto p-4 space-y-4 no-scrollbar",children:[r.tasks.length===0&&e.jsx("div",{className:"text-sm font-serif italic text-gray-400 text-center py-8",children:"No tasks"}),r.tasks.map(p=>e.jsx(Ne,{task:p,groupId:r.id},p.id))]})})]})},Ne=({task:r,groupId:x})=>{const{attributes:g,listeners:p,setNodeRef:b,transform:N,transition:i,isDragging:S}=be({id:r.id,data:{taskId:r.id,fromGroupId:x,groupId:x}}),y={transform:me.Transform.toString(N),transition:i,opacity:S?.3:1};return e.jsxs("div",{ref:b,style:y,...g,...p,className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm hover:shadow-md transition-all cursor-grab active:cursor-grabbing group",children:[e.jsx("p",{className:"text-base font-serif text-gray-900 mb-3 group-hover:text-amber-700 transition-colors",children:r.name}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-[10px] font-bold uppercase tracking-wider px-2 py-1 rounded-sm bg-gray-50 text-gray-500 border border-gray-100",children:r.status||"New"}),e.jsx("span",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-wider",children:r.dueDate?new Date(r.dueDate).toLocaleDateString():""})]})]})},Se=r=>ue({id:r,data:{groupId:r}});export{Ye as default};
