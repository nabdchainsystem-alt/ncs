import{u as S,r as C,S as k,j as e,P as p,i as O,h as f,g as u,b as z,E as b,C as E}from"./index-D-msRKty.js";import{u as P,a as T,D as R,b as $,d as F,P as I,e as A,f as B}from"./core.esm-D-My7s9e.js";import{S as V}from"./square-kanban-C1NYCpZ4.js";import{F as y}from"./flag-hcacTIoY.js";const _=({task:r,onClick:n})=>{const{attributes:l,listeners:c,setNodeRef:a,isDragging:s}=B({id:r.id,data:{task:r}});return s?e.jsx("div",{ref:a,className:"bg-gray-50 p-3 rounded-lg border-2 border-dashed border-gray-200 h-24 opacity-50"}):e.jsxs("div",{ref:a,...c,...l,className:"bg-white p-3 rounded-lg border border-gray-200 shadow-sm hover:shadow-md hover:border-gray-300 transition-all cursor-grab active:cursor-grabbing group relative select-none touch-none",onClick:n,children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{className:"text-xs font-medium text-gray-400 hover:underline",children:["#",r.id.substring(5)]}),e.jsx("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity p-1 hover:bg-gray-100 rounded",children:e.jsx(b,{size:14,className:"text-gray-400"})})]}),e.jsx("h3",{className:"text-sm text-gray-800 font-medium mb-3 leading-snug group-hover:text-clickup-purple transition-colors",children:r.title}),e.jsxs("div",{className:"flex items-center justify-between mt-auto",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[r.priority!==f.None&&e.jsx("div",{className:"p-0.5 rounded hover:bg-gray-100 transition-colors",title:`Priority: ${r.priority}`,children:e.jsx(y,{size:12,fill:u[r.priority],color:u[r.priority]})}),r.dueDate&&e.jsxs("div",{className:`flex items-center text-[10px] px-1.5 py-0.5 bg-gray-50 rounded border border-gray-100 ${new Date(r.dueDate)<new Date?"text-red-500 border-red-100 bg-red-50":"text-gray-400"}`,children:[e.jsx(E,{size:10,className:"mr-1"}),new Date(r.dueDate).toLocaleDateString(void 0,{month:"short",day:"numeric"})]})]}),e.jsx("div",{className:"flex -space-x-1",children:r.assignees.map(t=>e.jsx("div",{className:"w-5 h-5 rounded-full border border-white flex items-center justify-center text-[9px] text-white font-bold shadow-sm",style:{backgroundColor:t.color},title:t.name,children:t.avatar},t.id))})]})]})},q=({status:r,tasks:n,isLoading:l,onAddTask:c,showToast:a})=>{const{setNodeRef:s,isOver:t}=A({id:r});return e.jsxs("div",{ref:s,className:`flex-shrink-0 w-72 flex flex-col h-full animate-in fade-in duration-500 rounded-xl transition-colors ${t?"bg-indigo-50/50 ring-2 ring-indigo-100":""}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-3 px-1 group",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-[10px] uppercase font-bold px-1.5 py-0.5 rounded text-white shadow-sm cursor-pointer hover:opacity-90",style:{backgroundColor:z[r]},onClick:()=>a(`Status: ${r}`,"info"),children:r}),e.jsx("span",{className:"text-xs text-gray-500 font-medium",children:l?"...":n.length})]}),e.jsxs("div",{className:"flex space-x-1 text-gray-400 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx(p,{size:14,className:"cursor-pointer hover:text-gray-600",onClick:c}),e.jsx(b,{size:14,className:"cursor-pointer hover:text-gray-600",onClick:()=>a("Column Settings","info")})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto pr-2 space-y-2.5 pb-10 custom-scrollbar",children:l?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-white p-3 rounded-lg border border-gray-200 shadow-sm h-28 animate-pulse"}),e.jsx("div",{className:"bg-white p-3 rounded-lg border border-gray-200 shadow-sm h-28 animate-pulse"})]}):e.jsxs(e.Fragment,{children:[n.map(x=>e.jsx(_,{task:x,onClick:()=>a(`Opening ${x.title}`,"info")},x.id)),e.jsxs("button",{className:"w-full py-2 rounded-md border border-transparent hover:bg-gray-200/50 hover:border-gray-300 text-gray-400 text-sm flex items-center justify-center transition-all group",onClick:c,children:[e.jsx(p,{size:14,className:"mr-1 group-hover:text-clickup-purple transition-colors"}),e.jsx("span",{className:"group-hover:text-clickup-purple transition-colors",children:"New Task"})]})]})})]})},G=({tasks:r,isLoading:n,onAddTask:l,onStatusChange:c})=>{const{showToast:a}=S(),[s,t]=C.useState(null),x=P(T(I,{activationConstraint:{distance:5}})),j=Object.values(k).reduce((i,o)=>(i[o]=r.filter(d=>d.status===o),i),{}),v=i=>{const{active:o}=i,d=r.find(m=>m.id===o.id);d&&t(d)},N=i=>{const{active:o,over:d}=i;if(t(null),!d)return;const m=o.id,g=d.id,h=r.find(D=>D.id===m);h&&h.status!==g&&c(m,g)},w={sideEffects:F({styles:{active:{opacity:"0.5"}}})};return!n&&r.length===0?e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center bg-clickup-light p-8 animate-in fade-in duration-500",children:[e.jsx("div",{className:"w-20 h-20 bg-white rounded-full flex items-center justify-center mb-6 border border-dashed border-gray-300 shadow-sm",children:e.jsx(V,{size:40,className:"text-gray-300"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:"Board is empty"}),e.jsx("p",{className:"text-gray-500 max-w-sm mb-8 text-center",children:"Visualise your workflow here. Start by creating a new task."}),e.jsxs("button",{onClick:l,className:"px-6 py-2 bg-clickup-purple text-white rounded-lg font-medium hover:bg-indigo-600 transition-colors shadow-lg shadow-purple-200 flex items-center",children:[e.jsx(p,{size:18,className:"mr-2"}),"Create Task"]})]}):e.jsxs(R,{sensors:x,onDragStart:v,onDragEnd:N,children:[e.jsx("div",{className:"flex-1 overflow-x-auto overflow-y-hidden bg-clickup-light p-6 custom-scrollbar h-full",children:e.jsxs("div",{className:"flex h-full space-x-4",children:[Object.entries(j).map(([i,o])=>e.jsx(q,{status:i,tasks:o,isLoading:n,onAddTask:l,showToast:a},i)),e.jsx("div",{className:"w-8 flex-shrink-0"})]})}),O.createPortal(e.jsx($,{dropAnimation:w,children:s?e.jsxs("div",{className:"bg-white p-3 rounded-lg border border-gray-200 shadow-xl w-72 cursor-grabbing rotate-2 opacity-90",children:[e.jsx("div",{className:"flex justify-between items-start mb-2",children:e.jsxs("div",{className:"text-xs font-medium text-gray-400",children:["#",s.id.substring(5)]})}),e.jsx("h3",{className:"text-sm text-gray-800 font-medium mb-3 leading-snug",children:s.title}),e.jsx("div",{className:"flex items-center justify-between mt-auto",children:e.jsx("div",{className:"flex items-center space-x-2",children:s.priority!==f.None&&e.jsx("div",{className:"p-0.5 rounded",title:`Priority: ${s.priority}`,children:e.jsx(y,{size:12,fill:u[s.priority],color:u[s.priority]})})})})]}):null}),document.body)]})};export{G as default};
