import{c as M,aI as z,r as c,u as T,aX as g,j as e,Y as P,aK as b,U as A}from"./index-BpRJKc9c.js";import{S as E}from"./save-DNkjmYdB.js";/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]],F=M("circle-user",$),D=({onUpdateUser:f})=>{var N;const s=z.getCurrentUser(),d=(s==null?void 0:s.email)==="master@nabdchain.com"||(s==null?void 0:s.email)==="master.smt@nabdchain-smt.com",[m,y]=c.useState(d?"authorizations":"profile"),[i,v]=c.useState(null),[t,h]=c.useState({}),[w,k]=c.useState([]),{showToast:p}=T();c.useEffect(()=>{(async()=>{const r=await g.getAllUsers();k(r)})()},[]),c.useEffect(()=>{if(i){const l=g.getPermissions(i);h(l)}},[i]);const S=()=>{i&&(g.savePermissions(i,t),p("Permissions saved successfully","success"))},x=l=>{h(r=>({...r,[l]:!r[l]}))},j=(l,r)=>{h(o=>{const a={...o};return l.forEach(u=>a[u]=r),a})},n=({title:l,items:r,prefix:o})=>(r.every(a=>t[a.id]),r.some(a=>t[a.id]),e.jsxs("div",{className:"mb-6 bg-white rounded-lg border border-gray-200 overflow-hidden",children:[e.jsxs("div",{className:"px-4 py-3 bg-gray-50 border-b border-gray-200 flex items-center justify-between",children:[e.jsx("h4",{className:"font-semibold text-gray-700",children:l}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>j(r.map(a=>a.id),!0),className:"text-xs text-black hover:text-gray-800 font-medium",children:"Select All"}),e.jsx("span",{className:"text-gray-300",children:"|"}),e.jsx("button",{onClick:()=>j(r.map(a=>a.id),!1),className:"text-xs text-gray-500 hover:text-gray-700 font-medium",children:"Clear All"})]})]}),e.jsx("div",{className:"p-4 grid grid-cols-2 gap-4",children:r.map(a=>e.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer group",children:[e.jsx("div",{className:`w-5 h-5 rounded border flex items-center justify-center transition-colors ${t[a.id]?"bg-black border-black":"border-gray-300 group-hover:border-black"}`,children:t[a.id]&&e.jsx(b,{size:12,className:"text-white"})}),e.jsx("input",{type:"checkbox",className:"hidden",checked:t[a.id]||!1,onChange:()=>x(a.id)}),e.jsx("span",{className:`text-sm ${t[a.id]?"text-gray-900 font-medium":"text-gray-600"}`,children:a.label})]},a.id))})]})),C=l=>{var o;const r=(o=l.target.files)==null?void 0:o[0];if(r){if(r.size>5*1024*1024){p("Image size should be less than 5MB","error");return}const a=new FileReader;a.onloadend=()=>{const u=a.result;f&&(f({avatarUrl:u}),p("Profile picture updated","success"))},a.readAsDataURL(r)}};return e.jsxs("div",{className:"flex h-full bg-gray-50 overflow-hidden",children:[e.jsxs("div",{className:"w-64 bg-white border-r border-gray-200 flex flex-col flex-shrink-0",children:[e.jsx("div",{className:"p-6 border-b border-gray-100",children:e.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Settings"})}),e.jsxs("div",{className:"flex-1 py-4",children:[e.jsxs("button",{onClick:()=>y("profile"),className:`w-full flex items-center px-6 py-3 text-sm font-medium transition-colors ${m==="profile"?"bg-gray-100 text-black border-r-2 border-black":"text-gray-600 hover:bg-gray-50"}`,children:[e.jsx(F,{size:18,className:"mr-3"}),"My Profile"]}),d&&e.jsxs("button",{onClick:()=>y("authorizations"),className:`w-full flex items-center px-6 py-3 text-sm font-medium transition-colors ${m==="authorizations"?"bg-gray-100 text-black border-r-2 border-black":"text-gray-600 hover:bg-gray-50"}`,children:[e.jsx(P,{size:18,className:"mr-3"}),"Authorizations"]})]})]}),e.jsxs("div",{className:"flex-1 flex flex-col min-w-0 bg-gray-50",children:[m==="profile"&&e.jsxs("div",{className:"flex-1 p-8",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-6",children:"My Profile"}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6 max-w-2xl",children:[e.jsxs("div",{className:"flex items-center space-x-6 mb-8",children:[e.jsxs("div",{className:"relative group cursor-pointer",children:[e.jsx("div",{className:"w-24 h-24 rounded-full bg-gradient-to-br from-blue-400 to-blue-600 flex items-center justify-center text-white text-3xl font-bold overflow-hidden border-4 border-white shadow-lg",children:s!=null&&s.avatarUrl?e.jsx("img",{src:s.avatarUrl,alt:"Profile",className:"w-full h-full object-cover"}):((N=s==null?void 0:s.name)==null?void 0:N.charAt(0))||"U"}),e.jsxs("label",{className:"absolute inset-0 flex items-center justify-center bg-black/50 text-white opacity-0 group-hover:opacity-100 rounded-full transition-opacity cursor-pointer",children:[e.jsx("span",{className:"text-xs font-medium",children:"Change"}),e.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:C})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:s==null?void 0:s.name}),e.jsx("p",{className:"text-gray-500",children:s==null?void 0:s.email}),e.jsx("span",{className:"inline-block mt-2 px-3 py-1 bg-gray-100 text-black text-xs font-medium rounded-full",children:d?"Master Account":"Team Member"})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name"}),e.jsx("input",{type:"text",value:(s==null?void 0:s.name)||"",disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50 text-gray-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address"}),e.jsx("input",{type:"email",value:(s==null?void 0:s.email)||"",disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50 text-gray-500"})]})]})]})]}),m==="authorizations"&&d&&e.jsxs("div",{className:"flex-1 flex flex-col h-full",children:[e.jsxs("div",{className:"px-8 py-6 bg-white border-b border-gray-200 flex justify-between items-center flex-shrink-0",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"User Authorizations"}),e.jsx("p",{className:"text-gray-500 mt-1",children:"Manage granular access permissions for team members."})]}),i&&e.jsxs("button",{onClick:S,className:"flex items-center px-6 py-2.5 bg-black text-white rounded-md hover:bg-gray-800 transition-colors font-medium shadow-sm",children:[e.jsx(E,{size:18,className:"mr-2"}),"Save Changes"]})]}),e.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[e.jsxs("div",{className:"w-72 bg-white border-r border-gray-200 overflow-y-auto flex-shrink-0",children:[e.jsx("div",{className:"p-4 bg-gray-50 border-b border-gray-200 font-semibold text-gray-700 text-sm uppercase tracking-wide",children:"Team Members"}),e.jsx("div",{className:"divide-y divide-gray-100",children:w.filter(l=>l.email!==(s==null?void 0:s.email)).map(l=>e.jsxs("button",{onClick:()=>v(l.email),className:`w-full flex items-center p-4 hover:bg-gray-50 transition-colors text-left ${i===l.email?"bg-gray-100 border-l-4 border-black":"border-l-4 border-transparent"}`,children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-blue-400 to-blue-600 flex items-center justify-center text-white font-bold text-sm mr-3 shadow-sm",children:l.name.charAt(0)}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:`font-medium truncate ${i===l.email?"text-black":"text-gray-900"}`,children:l.name}),e.jsx("p",{className:"text-xs text-gray-500 truncate",children:l.email})]})]},l.email))})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-8",children:i?e.jsxs("div",{className:"space-y-8 max-w-5xl mx-auto",children:[e.jsx(n,{title:"General Access",items:[{id:"inbox",label:"Inbox"},{id:"discussion",label:"Discussion"},{id:"overview",label:"Overview"},{id:"goals",label:"Goals"},{id:"reminders",label:"Reminders"},{id:"tasks",label:"Tasks"},{id:"vault",label:"Vault"},{id:"teams",label:"Teams"}]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 flex items-center",children:[e.jsx("span",{className:"w-1 h-6 bg-blue-500 rounded mr-3"}),"Departments"]}),e.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[e.jsx("div",{className:`w-5 h-5 rounded border flex items-center justify-center transition-colors ${t.departments?"bg-blue-500 border-blue-500":"border-gray-300"}`,children:t.departments&&e.jsx(b,{size:12,className:"text-white"})}),e.jsx("input",{type:"checkbox",className:"hidden",checked:t.departments||!1,onChange:()=>x("departments")}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Enable Section"})]})]}),e.jsx(n,{title:"Supply Chain",items:[{id:"supply-chain",label:"Supply Chain (Section)"},{id:"supply-chain/procurement",label:"Procurement"},{id:"supply-chain/warehouse",label:"Warehouse"},{id:"supply-chain/shipping",label:"Shipping"},{id:"supply-chain/planning",label:"Planning"},{id:"supply-chain/fleet",label:"Fleet"},{id:"supply-chain/vendors",label:"Vendors"}]}),e.jsx(n,{title:"Operations",items:[{id:"operations",label:"Operations (Section)"},{id:"operations/maintenance",label:"Maintenance"},{id:"operations/production",label:"Production"},{id:"operations/quality",label:"Quality"}]}),e.jsx(n,{title:"Business",items:[{id:"business",label:"Business (Section)"},{id:"business/sales",label:"Sales"},{id:"business/finance",label:"Finance"}]}),e.jsx(n,{title:"Support",items:[{id:"support",label:"Support (Section)"},{id:"support/it",label:"IT"},{id:"support/hr",label:"HR"},{id:"support/marketing",label:"Marketing"}]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 flex items-center",children:[e.jsx("span",{className:"w-1 h-6 bg-purple-500 rounded mr-3"}),"Smart Tools"]}),e.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[e.jsx("div",{className:`w-4 h-4 rounded border flex items-center justify-center transition-colors ${t.smartTools?"bg-purple-500 border-purple-500":"border-gray-300"}`,children:t.smartTools&&e.jsx(b,{size:10,className:"text-white"})}),e.jsx("input",{type:"checkbox",className:"hidden",checked:t.smartTools||!1,onChange:()=>x("smartTools")}),e.jsx("span",{className:"text-xs font-medium text-gray-600",children:"Enable"})]})]}),e.jsx(n,{title:"Tools",items:[{id:"smart-tools/mind-map",label:"Mind Mapping"},{id:"smart-tools/dashboard",label:"Smart Dashboard"}]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 flex items-center",children:[e.jsx("span",{className:"w-1 h-6 bg-green-500 rounded mr-3"}),"Marketplace"]}),e.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[e.jsx("div",{className:`w-4 h-4 rounded border flex items-center justify-center transition-colors ${t.marketplace?"bg-green-500 border-green-500":"border-gray-300"}`,children:t.marketplace&&e.jsx(b,{size:10,className:"text-white"})}),e.jsx("input",{type:"checkbox",className:"hidden",checked:t.marketplace||!1,onChange:()=>x("marketplace")}),e.jsx("span",{className:"text-xs font-medium text-gray-600",children:"Enable"})]})]}),e.jsx(n,{title:"Markets",items:[{id:"marketplace/local",label:"Local Marketplace"},{id:"marketplace/foreign",label:"Foreign Marketplace"}]})]})]})]}):e.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-gray-400",children:[e.jsx("div",{className:"w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mb-6",children:e.jsx(A,{size:48,className:"opacity-50"})}),e.jsx("p",{className:"text-xl font-medium text-gray-600",children:"Select a user to configure permissions"}),e.jsx("p",{className:"text-sm mt-2",children:"Choose a team member from the list to manage their access."})]})})]})]})]})]})};export{D as default};
