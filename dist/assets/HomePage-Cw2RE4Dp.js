import{c as G,r as p,K as Y,N as K,j as e,O as V,k as P,e as q,h as z,P as Z,Q as W,R,V as X,B as O,T as ee,C as B,J as H,E as te,w as se,g as re,W as oe,Z as ae,u as ne,D as le,Y as ie}from"./index-BaRn3IWj.js";import{C as ce,d as de}from"./discussionService-D2kt6-U6.js";import{I as $,T as xe,A as me,D as he}from"./TaskBoard-BwtGGyZN.js";import{S as ue}from"./square-check-big-BOoFgSp7.js";import{S as pe}from"./square-Bj23inUF.js";import{P as fe}from"./sortable.esm-CF4rajHW.js";import"./constants-DIz9rW5w.js";import"./index-Ca_DMGSD.js";import"./copy-Js1b8Mpk.js";import"./remindersService-CkphtGlV.js";import"./goalsService-DtrjEL37.js";import"./list-B6IbW7Ji.js";import"./list-ordered-NTzaGspy.js";import"./flag-7G_sRA4i.js";import"./core.esm-DZw859Vw.js";import"./star-DjOLFkds.js";import"./phone-1J_Lfyvk.js";import"./tag-C232WDvR.js";import"./smile-D8ED8Fch.js";import"./type-RMmUzjJx.js";import"./paperclip-Bq1xUkZq.js";import"./minus-BlqgYl96.js";import"./arrow-up-right-BV-z3Hwt.js";/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const be=[["path",{d:"M2 9V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H20a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-1",key:"fm4g5t"}],["path",{d:"M2 13h10",key:"pgb2dq"}],["path",{d:"m9 16 3-3-3-3",key:"6m91ic"}]],M=G("folder-input",be);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ge=[["path",{d:"M13 5h8",key:"a7qcls"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 19h8",key:"c3s6r1"}],["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}]],J=G("list-checks",ge),I="taskboard-quick-draft",ve=({isOpen:n,onClose:v,onSend:j,rooms:c=[],darkMode:a=!1})=>{const[s,r]=p.useState(!1),[i,o]=p.useState({type:"main",name:"My Tasks"}),[f,g]=p.useState(!1),N=p.useRef(null),S=()=>{v()},{ref:C,setIsActive:k}=Y({onCancel:S,initialActive:n});if(p.useEffect(()=>{k(n)},[n,k]),p.useEffect(()=>{if(n){if(r(!0),o({type:"main",name:"My Tasks"}),g(!1),!localStorage.getItem(I)){const l={...$,id:"draft-board",name:"Draft Task",groups:[{...$.groups[0],id:K(),title:"New Group",tasks:[]}]};localStorage.setItem(I,JSON.stringify(l))}}else{const l=setTimeout(()=>r(!1),300);return()=>clearTimeout(l)}},[n]),!s&&!n)return null;const b=()=>{var l;try{const w=(l=N.current)==null?void 0:l.exportBoardWithDrafts();if(!w){const t=localStorage.getItem(I);if(!t)return;j(JSON.parse(t),{type:i.type,roomId:i.roomId}),localStorage.removeItem(I);return}localStorage.setItem(I,JSON.stringify(w)),j(w,{type:i.type,roomId:i.roomId}),localStorage.removeItem(I)}catch(w){console.error("Failed to read draft board",w)}};return e.jsx("div",{className:`fixed inset-0 z-[9999] flex items-center justify-center transition-all duration-300 ${n?"bg-black/60 backdrop-blur-md opacity-100":"bg-transparent backdrop-blur-none opacity-0 pointer-events-none"}`,children:e.jsx("div",{ref:C,className:`w-full max-w-[95vw] h-auto max-h-[85vh] transform transition-all duration-300 ${n?"scale-100 translate-y-0 opacity-100":"scale-95 translate-y-4 opacity-0"}`,children:e.jsxs("div",{className:`relative w-full max-h-full flex flex-col rounded-3xl shadow-2xl overflow-hidden backdrop-blur-xl border ${a?"bg-gray-900/95 border-gray-700":"bg-white/95 border-white/40"}`,children:[e.jsx("div",{className:"flex-1 overflow-y-auto overflow-x-hidden relative min-h-[300px]",children:s&&e.jsx("div",{className:"min-w-full h-full",children:e.jsx(xe,{ref:N,storageKey:I,darkMode:a,minimal:!0,showGroupHeader:!0})})}),e.jsxs("div",{className:`px-6 py-4 flex items-center justify-between border-t border-gray-100/10 shrink-0 ${a?"bg-black/20":"bg-white/40"}`,children:[e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>g(!f),className:`flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${a?"text-gray-300 hover:bg-white/5":"text-gray-600 hover:bg-gray-100"}`,children:[e.jsx("span",{className:"opacity-60",children:"Save As:"}),e.jsxs("span",{className:`font-bold flex items-center gap-2 ${a?"text-white":"text-gray-900"}`,children:[i.type==="room"&&e.jsx(V,{size:12,className:"text-indigo-400"}),i.type==="main"&&e.jsx(P,{size:12,className:"text-blue-400"}),i.name]}),e.jsx(q,{size:14,className:`opacity-50 transition-transform ${f?"rotate-180":""}`})]}),f&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>g(!1)}),e.jsxs("div",{className:`absolute bottom-full left-0 mb-2 w-64 rounded-xl shadow-xl border overflow-hidden p-1 z-20 animate-in slide-in-from-bottom-2 fade-in duration-200 ${a?"bg-[#1a1d24] border-gray-700":"bg-white border-gray-200"}`,children:[e.jsxs("button",{onClick:()=>{o({type:"main",name:"My Tasks"}),g(!1)},className:`w-full flex items-center justify-between px-3 py-2.5 rounded-lg text-sm font-medium transition-colors ${a?"hover:bg-white/5 text-gray-200":"hover:bg-gray-50 text-gray-700"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-1.5 rounded-md ${a?"bg-blue-500/20 text-blue-400":"bg-blue-50 text-blue-600"}`,children:e.jsx(P,{size:14})}),e.jsx("span",{children:"My Tasks"})]}),i.type==="main"&&e.jsx(z,{size:16,className:"text-blue-500"})]}),e.jsx("div",{className:`my-1 mx-2 border-t ${a?"border-gray-700":"border-gray-100"}`}),e.jsx("div",{className:`px-3 py-1 text-xs font-semibold uppercase tracking-wider mb-1 ${a?"text-gray-500":"text-gray-400"}`,children:"Private Rooms"}),e.jsx("div",{className:"max-h-48 overflow-y-auto custom-scrollbar space-y-0.5",children:c.length===0?e.jsx("div",{className:`px-3 py-2 text-xs italic ${a?"text-gray-500":"text-gray-400"}`,children:"No rooms found"}):c.map(l=>e.jsxs("button",{onClick:()=>{o({type:"room",roomId:l.id,name:l.name}),g(!1)},className:`w-full flex items-center justify-between px-3 py-2 rounded-lg text-sm font-medium transition-colors ${a?"hover:bg-white/5 text-gray-200":"hover:bg-gray-50 text-gray-700"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-6 h-6 rounded-md flex items-center justify-center text-[10px] font-bold text-white shadow-sm",style:{backgroundColor:l.color||"#3b82f6"},children:l.name.charAt(0).toUpperCase()}),e.jsx("span",{className:"truncate max-w-[140px]",children:l.name})]}),i.roomId===l.id&&e.jsx(z,{size:16,className:"text-indigo-500"})]},l.id))})]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:S,className:`px-5 py-2.5 rounded-xl font-semibold text-sm transition-all ${a?"text-gray-400 hover:bg-white/10 hover:text-white":"text-gray-600 hover:bg-black/5 hover:text-gray-900"}`,children:"Cancel"}),e.jsx("button",{onClick:b,className:"px-6 py-2.5 rounded-xl font-semibold text-sm text-white shadow-lg active:scale-95 transition-all bg-[#2a2e35] hover:bg-[#32363e] border border-gray-700",children:e.jsx("span",{children:"Send Task"})})]})]})]})})})},je=({inbox:n,onCapture:v,onSelect:j})=>{const[c,a]=p.useState(""),s=r=>{r.preventDefault(),c.trim()&&(v(c),a(""))};return e.jsxs("div",{className:"h-full flex flex-col font-serif",children:[e.jsxs("div",{className:"flex-none mb-8",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("span",{className:"text-xs font-bold text-stone-400 uppercase tracking-widest mb-2 block font-sans",children:"Step 1"}),e.jsx("h3",{className:"text-4xl font-serif text-stone-900 mb-2 tracking-tight italic",children:"Capture"}),e.jsx("p",{className:"text-sm text-stone-500 font-sans",children:"Get it all out of your head."})]}),e.jsxs("form",{onSubmit:s,className:"relative max-w-xl mx-auto",children:[e.jsx("input",{type:"text",value:c,onChange:r=>a(r.target.value),placeholder:"What's on your mind?...",className:"w-full bg-white border-b-2 border-stone-200 px-6 py-4 text-xl placeholder:text-stone-300 focus:outline-none focus:border-stone-800 transition-colors font-serif italic text-stone-700 bg-transparent",autoFocus:!0}),e.jsx("button",{type:"submit",disabled:!c.trim(),className:"absolute right-2 top-1/2 -translate-y-1/2 p-2 text-stone-400 hover:text-stone-900 disabled:opacity-30 transition-colors",children:e.jsx(Z,{size:24})})]})]}),e.jsxs("div",{className:"flex-1 overflow-hidden flex flex-col max-w-2xl mx-auto w-full",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4 px-2",children:[e.jsx(W,{size:16,className:"text-stone-400"}),e.jsxs("span",{className:"text-xs font-bold text-stone-400 uppercase tracking-wider font-sans",children:["In your inbox (",n.length,")"]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto pr-2 space-y-2",children:n.length===0?e.jsx("div",{className:"text-center py-12 text-stone-300 italic border-2 border-dashed border-stone-100 rounded-2xl",children:"Your inbox is empty. Clear mind!"}):n.map(r=>e.jsxs("div",{onClick:()=>j(r.id),className:"group bg-white p-4 rounded-xl border border-stone-100 shadow-sm hover:shadow-md hover:border-stone-300 transition-all cursor-pointer flex items-center justify-between animate-fade-in-up",children:[e.jsx("span",{className:"text-lg text-stone-700 italic group-hover:text-stone-900 line-clamp-1",children:r.text}),e.jsx("span",{className:"text-xs font-bold text-stone-300 group-hover:text-stone-500 font-sans bg-stone-50 px-2 py-1 rounded-md opacity-0 group-hover:opacity-100 transition-all",children:"PROCESS"})]},r.id))})]})]})},we=({item:n,onProcess:v,onCreateProject:j,onNavigate:c,projects:a,hasMore:s})=>{const[r,i]=p.useState("identify_type"),[o,f]=p.useState(""),[g,N]=p.useState(""),[S,C]=p.useState(""),[k,b]=p.useState(!1);if(R.useEffect(()=>{i("identify_type"),f(""),N(""),C(""),b(!1)},[n==null?void 0:n.id]),!n)return e.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-stone-300 animate-fade-in-up",children:[e.jsx(z,{size:64,strokeWidth:1,className:"mb-6 opacity-30"}),e.jsx("p",{className:"text-2xl font-serif italic mb-2",children:"Inbox Zero!"}),e.jsx("p",{className:"text-sm font-sans",children:"You've processed everything. Time to engage."})]});const l=(h,T={})=>{v(n.id,{status:h,...T})},w=h=>{switch(h){case"task":l("actionable",{dueDate:void 0}),c("organize");break;case"reminder":i("reminder_details");break;case"project":i("project_details");break;case"reference":l("reference");break;case"trash":l("trash");break}},t=()=>{o.trim()&&(j(o,[n.text]),v(n.id,{status:"trash"}),f(""))},y=()=>{const h=g||new Date().toISOString().split("T")[0],T=S||"09:00",u=new Date(h+"T"+T).getTime();l("actionable",{dueDate:u,time:"5m"}),c("organize")},d=()=>e.jsxs("div",{className:"text-center mb-8 max-w-lg z-10 w-full animate-fade-in-down",children:[e.jsx("span",{className:"text-xs font-bold text-stone-400 uppercase tracking-widest mb-2 block font-sans",children:"Step 2"}),e.jsx("h3",{className:"text-5xl font-serif text-stone-900 mb-6 tracking-tight italic",children:"Clarify"}),e.jsxs("div",{className:"bg-white px-8 py-6 rounded-2xl shadow-xl border border-stone-100 transform -rotate-1 relative mx-auto max-w-md hover:rotate-0 transition-transform duration-500",children:[e.jsx("div",{className:"absolute -top-3 left-1/2 -translate-x-1/2 bg-stone-900 text-white p-2 rounded-full shadow-lg border-4 border-stone-50",children:e.jsx(X,{size:20})}),e.jsxs("p",{className:"text-2xl text-stone-800 italic leading-snug font-serif",children:['"',n.text,'"']})]})]}),x=()=>e.jsxs("div",{className:"w-full max-w-4xl animate-fade-in-up",children:[e.jsx("p",{className:"text-center text-stone-500 font-serif italic text-xl mb-8",children:"What is this?"}),e.jsxs("div",{className:"grid grid-cols-5 gap-4",children:[e.jsxs("button",{onClick:()=>w("task"),className:"flex flex-col items-center p-6 bg-white border-2 border-stone-100 rounded-2xl hover:border-emerald-500 hover:bg-emerald-50 hover:-translate-y-1 transition-all group",children:[e.jsx("div",{className:"p-4 bg-stone-100 rounded-full mb-4 group-hover:bg-emerald-200 text-stone-400 group-hover:text-emerald-700 transition-colors",children:e.jsx(z,{size:24})}),e.jsx("span",{className:"font-bold text-sm uppercase tracking-widest text-stone-600 group-hover:text-emerald-800",children:"Task"})]}),e.jsxs("button",{onClick:()=>w("reminder"),className:"flex flex-col items-center p-6 bg-white border-2 border-stone-100 rounded-2xl hover:border-amber-500 hover:bg-amber-50 hover:-translate-y-1 transition-all group",children:[e.jsx("div",{className:"p-4 bg-stone-100 rounded-full mb-4 group-hover:bg-amber-200 text-stone-400 group-hover:text-amber-700 transition-colors",children:e.jsx(O,{size:24})}),e.jsx("span",{className:"font-bold text-sm uppercase tracking-widest text-stone-600 group-hover:text-amber-800",children:"Reminder"})]}),e.jsxs("button",{onClick:()=>w("project"),className:"flex flex-col items-center p-6 bg-white border-2 border-stone-100 rounded-2xl hover:border-indigo-500 hover:bg-indigo-50 hover:-translate-y-1 transition-all group",children:[e.jsx("div",{className:"p-4 bg-stone-100 rounded-full mb-4 group-hover:bg-indigo-200 text-stone-400 group-hover:text-indigo-700 transition-colors",children:e.jsx(M,{size:24})}),e.jsx("span",{className:"font-bold text-sm uppercase tracking-widest text-stone-600 group-hover:text-indigo-800",children:"Project"})]}),e.jsxs("button",{onClick:()=>w("reference"),className:"flex flex-col items-center p-6 bg-white border-2 border-stone-100 rounded-2xl hover:border-blue-500 hover:bg-blue-50 hover:-translate-y-1 transition-all group",children:[e.jsx("div",{className:"p-4 bg-stone-100 rounded-full mb-4 group-hover:bg-blue-200 text-stone-400 group-hover:text-blue-700 transition-colors",children:e.jsx(me,{size:24})}),e.jsx("span",{className:"font-bold text-sm uppercase tracking-widest text-stone-600 group-hover:text-blue-800",children:"Reference"})]}),e.jsxs("button",{onClick:()=>w("trash"),className:"flex flex-col items-center p-6 bg-white border-2 border-stone-100 rounded-2xl hover:border-red-500 hover:bg-red-50 hover:-translate-y-1 transition-all group",children:[e.jsx("div",{className:"p-4 bg-stone-100 rounded-full mb-4 group-hover:bg-red-200 text-stone-400 group-hover:text-red-700 transition-colors",children:e.jsx(ee,{size:24})}),e.jsx("span",{className:"font-bold text-sm uppercase tracking-widest text-stone-600 group-hover:text-red-800",children:"Trash"})]})]})]}),m=()=>e.jsxs("div",{className:"w-full max-w-md animate-fade-in-up",children:[e.jsx("p",{className:"text-center text-stone-500 font-serif italic text-xl mb-6",children:"When should I remind you?"}),e.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-stone-200 shadow-xl space-y-4",children:[e.jsx("div",{children:e.jsxs("div",{className:"relative",children:[e.jsx("label",{className:"block text-xs font-bold uppercase text-stone-400 mb-1",children:"Date"}),e.jsxs("button",{onClick:()=>b(!0),className:"w-full p-3 bg-stone-50 rounded-xl border border-stone-200 focus:border-stone-900 outline-none font-sans text-left flex items-center gap-2 hover:bg-stone-100 transition-colors",children:[e.jsx(B,{size:16,className:"text-stone-400"}),e.jsx("span",{className:g?"text-stone-900":"text-stone-400 italic",children:g?new Date(g).toLocaleDateString(void 0,{weekday:"long",month:"long",day:"numeric"}):"Select a date..."})]}),k&&e.jsx("div",{className:"absolute top-full left-0 mt-2 z-50",children:e.jsx(he,{date:g,onSelect:h=>N(h),onClose:()=>b(!1),className:"border-stone-200 shadow-xl"})})]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold uppercase text-stone-400 mb-1",children:"Time"}),e.jsx("input",{type:"time",value:S,onChange:h=>C(h.target.value),className:"w-full p-3 bg-stone-50 rounded-xl border border-stone-200 focus:border-stone-900 outline-none font-sans"})]}),e.jsxs("button",{onClick:y,className:"w-full py-4 bg-stone-900 text-white rounded-xl font-bold tracking-wide hover:bg-black mt-4 flex items-center justify-center gap-2",children:[e.jsx(O,{size:18}),"Set Reminder"]})]}),e.jsx("button",{onClick:()=>i("identify_type"),className:"w-full mt-6 text-stone-400 text-sm hover:text-stone-900",children:"Back"})]}),D=()=>e.jsxs("div",{className:"w-full max-w-lg animate-fade-in-up",children:[e.jsx("p",{className:"text-center text-stone-500 font-serif italic text-xl mb-6",children:"Name your project"}),e.jsxs("div",{className:"bg-white p-2 rounded-2xl border-2 border-stone-900 shadow-xl flex items-center",children:[e.jsx("input",{type:"text",value:o,onChange:h=>f(h.target.value),placeholder:"e.g. Plan Summer Vacation",className:"flex-1 px-4 py-3 text-lg font-serif outline-none bg-transparent placeholder:italic",autoFocus:!0}),e.jsx("button",{onClick:t,disabled:!o.trim(),className:"bg-stone-900 text-white px-6 py-3 rounded-xl font-bold text-sm uppercase tracking-wider hover:bg-black disabled:opacity-50 transition-colors",children:"Create"})]}),e.jsx("button",{onClick:()=>i("identify_type"),className:"w-full mt-8 text-stone-400 text-sm hover:text-stone-900",children:"Back"})]});return e.jsxs("div",{className:"h-full flex flex-col items-center justify-center p-4 font-serif relative overflow-y-auto",children:[d(),r==="identify_type"&&x(),r==="reminder_details"&&m(),r==="project_details"&&D()]})},Ne=({projects:n,items:v,onUpdateItem:j})=>{const c=v.filter(o=>o.status==="actionable"&&!o.dueDate),a=v.filter(o=>(o.status==="actionable"||o.status==="waiting")&&o.dueDate).sort((o,f)=>(o.dueDate||0)-(f.dueDate||0)),[s,r]=p.useState(new Date),i=()=>{const o=s.getFullYear(),f=s.getMonth(),g=new Date(o,f,1),N=new Date(o,f+1,0),S=g.getDay(),C=N.getDate(),k=[];for(let b=0;b<S;b++)k.push(e.jsx("div",{className:"h-10"},`pad-${b}`));for(let b=1;b<=C;b++){const l=new Date(o,f,b).setHours(0,0,0,0),w=a.some(y=>new Date(y.dueDate).setHours(0,0,0,0)===l),t=new Date().setHours(0,0,0,0)===l;k.push(e.jsxs("div",{className:`h-10 flex items-center justify-center relative rounded-lg text-sm font-serif group cursor-pointer hover:bg-stone-100 transition-colors ${t?"font-bold bg-stone-100 text-stone-900 border border-stone-200":"text-stone-600"}`,children:[b,w&&e.jsx("div",{className:"absolute bottom-1.5 w-1 h-1 bg-amber-500 rounded-full"})]},b))}return e.jsxs("div",{className:"bg-white rounded-2xl border border-stone-200 p-4 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("button",{onClick:()=>r(new Date(o,f-1)),className:"p-1 hover:bg-stone-100 rounded-lg text-stone-400 hover:text-stone-900",children:e.jsx(se,{size:16})}),e.jsx("span",{className:"font-serif font-bold text-stone-800",children:s.toLocaleDateString("default",{month:"long",year:"numeric"})}),e.jsx("button",{onClick:()=>r(new Date(o,f+1)),className:"p-1 hover:bg-stone-100 rounded-lg text-stone-400 hover:text-stone-900",children:e.jsx(re,{size:16})})]}),e.jsx("div",{className:"grid grid-cols-7 gap-1 text-center mb-2",children:["S","M","T","W","T","F","S"].map((b,l)=>e.jsx("div",{className:"text-[10px] font-bold text-stone-400 uppercase",children:b},l))}),e.jsx("div",{className:"grid grid-cols-7 gap-1",children:k})]})};return e.jsxs("div",{className:"h-full flex flex-col font-serif",children:[e.jsxs("div",{className:"flex-none text-center mb-6",children:[e.jsx("span",{className:"text-xs font-bold text-stone-400 uppercase tracking-widest mb-1 block font-sans",children:"Step 3"}),e.jsx("h3",{className:"text-3xl font-serif text-stone-900 mb-1 tracking-tight italic",children:"Organize"})]}),e.jsxs("div",{className:"flex-1 grid grid-cols-3 gap-6 overflow-hidden pr-2",children:[e.jsxs("div",{className:"flex flex-col bg-stone-50/50 rounded-2xl border border-stone-100 p-4 overflow-hidden relative",children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-emerald-400/50 to-emerald-400/0"}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h4",{className:"flex items-center gap-2 font-bold text-xs uppercase tracking-wider text-stone-900 font-sans",children:[e.jsx(z,{size:14,className:"text-emerald-600"})," Tasks"]}),e.jsx("span",{className:"bg-emerald-100 text-emerald-800 text-[10px] font-bold px-2 py-0.5 rounded-full",children:c.length})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto space-y-2 pr-1 scrollbar-hide",children:[c.map(o=>e.jsxs("div",{className:"group p-3 bg-white border border-stone-100 rounded-xl hover:border-emerald-200 hover:shadow-md transition-all cursor-pointer flex items-start gap-3",children:[e.jsx("div",{className:"mt-1 w-4 h-4 rounded-full border-2 border-stone-200 group-hover:border-emerald-500 transition-colors"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"font-serif text-stone-800 text-sm leading-snug block",children:o.text}),o.projectId&&e.jsxs("span",{className:"text-[10px] text-stone-400 font-sans uppercase tracking-wider",children:["Project #",o.projectId]})]})]},o.id)),c.length===0&&e.jsx("div",{className:"h-32 flex flex-col items-center justify-center text-stone-300 border-2 border-dashed border-stone-200 rounded-xl",children:e.jsx("span",{className:"text-sm italic",children:"No next actions"})}),e.jsx("button",{className:"w-full py-3 border border-dashed border-emerald-200 text-emerald-600 text-xs font-bold uppercase tracking-wider rounded-xl hover:bg-emerald-50 transition-colors mt-2",children:"+ Add Task"})]})]}),e.jsxs("div",{className:"flex flex-col bg-stone-50/50 rounded-2xl border border-stone-100 p-4 overflow-hidden relative",children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-amber-400/50 to-amber-400/0"}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h4",{className:"flex items-center gap-2 font-bold text-xs uppercase tracking-wider text-stone-900 font-sans",children:[e.jsx(O,{size:14,className:"text-amber-600"})," Reminders"]}),e.jsx("span",{className:"bg-amber-100 text-amber-800 text-[10px] font-bold px-2 py-0.5 rounded-full",children:a.length})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto space-y-2 pr-1 scrollbar-hide",children:[a.map(o=>e.jsxs("div",{className:"group p-3 bg-white border border-stone-100 rounded-xl hover:border-amber-200 hover:shadow-md transition-all cursor-pointer",children:[e.jsxs("div",{className:"flex justify-between items-start mb-1",children:[e.jsx("span",{className:"font-serif font-bold text-stone-800 text-sm line-clamp-1",children:o.text}),e.jsx("span",{className:"text-[10px] font-bold text-amber-600 bg-amber-50 px-1.5 py-0.5 rounded-md border border-amber-100",children:new Date(o.dueDate).toLocaleDateString(void 0,{month:"short",day:"numeric"})})]}),e.jsxs("div",{className:"flex items-center gap-1 mt-1 text-stone-400",children:[e.jsx(H,{size:12}),e.jsx("span",{className:"text-[10px] font-sans uppercase tracking-wider",children:o.time||"All Day"})]})]},o.id)),a.length===0&&e.jsx("div",{className:"h-32 flex flex-col items-center justify-center text-stone-300 border-2 border-dashed border-stone-200 rounded-xl",children:e.jsx("span",{className:"text-sm italic",children:"No reminders"})}),e.jsx("button",{className:"w-full py-3 border border-dashed border-amber-200 text-amber-600 text-xs font-bold uppercase tracking-wider rounded-xl hover:bg-amber-50 transition-colors mt-2",children:"+ Add Reminder"})]})]}),e.jsxs("div",{className:"flex flex-col bg-stone-50/50 rounded-2xl border border-stone-100 p-4 overflow-hidden relative",children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-indigo-400/50 to-indigo-400/0"}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h4",{className:"flex items-center gap-2 font-bold text-xs uppercase tracking-wider text-stone-900 font-sans",children:[e.jsx(B,{size:14,className:"text-indigo-600"})," Calendar"]}),e.jsx("button",{className:"text-stone-400 hover:text-stone-900",children:e.jsx(te,{size:16})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto pr-1 scrollbar-hide",children:[i(),e.jsxs("div",{className:"mt-4 space-y-2",children:[e.jsx("h5",{className:"font-sans font-bold text-[10px] uppercase text-stone-400 tracking-wider pl-1",children:"Today's Agenda"}),a.filter(o=>new Date(o.dueDate).setHours(0,0,0,0)===new Date().setHours(0,0,0,0)).length>0?a.filter(o=>new Date(o.dueDate).setHours(0,0,0,0)===new Date().setHours(0,0,0,0)).map(o=>e.jsxs("div",{className:"flex items-center gap-3 p-2 bg-indigo-50/50 rounded-lg border border-indigo-100",children:[e.jsx("div",{className:"text-xs font-bold text-indigo-600 w-12 text-center",children:o.time||"All Day"}),e.jsx("div",{className:"h-4 w-[1px] bg-indigo-200"}),e.jsx("div",{className:"text-sm font-serif text-stone-700 truncate",children:o.text})]},o.id)):e.jsx("p",{className:"text-xs text-stone-400 italic pl-1",children:"Nothing scheduled for today."})]})]})]})]})]})},ye=({items:n})=>{const[v,j]=p.useState([{id:1,text:"Collect Loose Papers and Materials",checked:!1},{id:2,text:'Get "In" to Zero',checked:!1},{id:3,text:"Empty Your Head",checked:!1},{id:4,text:'Review "Next Actions" Lists',checked:!1},{id:5,text:'Review "Waiting For" List',checked:!1},{id:6,text:'Review "Projects" (and Larger Outcomes)',checked:!1},{id:7,text:'Review "Someday/Maybe" List',checked:!1}]),c=s=>{j(v.map(r=>r.id===s?{...r,checked:!r.checked}:r))},a=Math.round(v.filter(s=>s.checked).length/v.length*100);return e.jsxs("div",{className:"h-full flex flex-col font-serif",children:[e.jsxs("div",{className:"flex-none text-center mb-8",children:[e.jsx("span",{className:"text-xs font-bold text-stone-400 uppercase tracking-widest mb-2 block font-sans",children:"Step 4"}),e.jsx("h3",{className:"text-4xl font-serif text-stone-900 mb-2 tracking-tight italic",children:"Reflect"}),e.jsx("p",{className:"text-sm text-stone-500 font-sans max-w-xl mx-auto",children:"Weekly Review: Clear the decks."})]}),e.jsx("div",{className:"flex-1 overflow-y-auto px-4 pb-4",children:e.jsxs("div",{className:"max-w-xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6 px-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(J,{size:18,className:"text-stone-400"}),e.jsx("h4",{className:"font-bold text-xs uppercase tracking-wider text-stone-500 font-sans",children:"Weekly Review Checklist"})]}),e.jsxs("span",{className:"text-xs font-bold font-sans text-stone-400 bg-stone-100 px-2 py-1 rounded-full",children:[a,"% Complete"]})]}),e.jsx("div",{className:"space-y-2",children:v.map(s=>e.jsxs("div",{onClick:()=>c(s.id),className:`flex items-start p-4 cursor-pointer group transition-all rounded-xl border ${s.checked?"bg-stone-50 border-stone-100":"bg-white border-stone-200 hover:border-stone-400 shadow-sm hover:shadow-md"}`,children:[e.jsx("div",{className:`mr-4 pt-1 transition-colors ${s.checked?"text-stone-300":"text-stone-800"}`,children:s.checked?e.jsx(ue,{size:22,strokeWidth:1.5}):e.jsx(pe,{size:22,strokeWidth:1.5})}),e.jsx("div",{children:e.jsx("span",{className:`text-lg transition-all font-serif italic ${s.checked?"text-stone-400 line-through decoration-stone-300":"text-stone-800"}`,children:s.text})})]},s.id))}),a===100&&e.jsx("div",{className:"mt-8 text-center animate-fade-in-up",children:e.jsxs("button",{onClick:()=>j(v.map(s=>({...s,checked:!1}))),className:"inline-flex items-center gap-2 px-6 py-3 bg-stone-900 text-white rounded-xl shadow-lg hover:bg-black transition-colors",children:[e.jsx(oe,{size:16}),e.jsx("span",{className:"font-bold text-sm",children:"Start New Week"})]})})]})}),e.jsx("p",{className:"mt-6 text-sm text-stone-300 italic text-center pt-4 mb-2",children:'"Your mind is for having ideas, not holding them."'})]})},ke=({actions:n,projects:v})=>{const[j,c]=p.useState("all"),a=Array.from(new Set(n.map(r=>r.contextId||"uncategorized"))),s=j==="all"?n:n.filter(r=>(r.contextId||"uncategorized")===j);return e.jsxs("div",{className:"h-full flex flex-col font-serif",children:[e.jsxs("div",{className:"flex-none text-center mb-6",children:[e.jsx("span",{className:"text-xs font-bold text-stone-400 uppercase tracking-widest mb-2 block font-sans",children:"Step 5"}),e.jsx("h3",{className:"text-4xl font-serif text-stone-900 mb-2 tracking-tight italic",children:"Engage"}),e.jsx("p",{className:"text-sm text-stone-500 font-sans max-w-xl mx-auto",children:"Trust your system and execute with confidence."})]}),e.jsx("div",{className:"flex-none mb-6 px-4",children:e.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-2",children:[e.jsx("button",{onClick:()=>c("all"),className:`px-4 py-1.5 rounded-full text-xs font-bold uppercase tracking-wider transition-all font-sans border ${j==="all"?"bg-stone-800 text-white border-stone-800":"bg-white text-stone-400 border-stone-200 hover:border-stone-400 hover:text-stone-600"}`,children:"All"}),a.map(r=>e.jsx("button",{onClick:()=>c(r),className:`px-4 py-1.5 rounded-full text-xs font-bold uppercase tracking-wider transition-all font-sans border ${j===r?"bg-stone-800 text-white border-stone-800":"bg-white text-stone-400 border-stone-200 hover:border-stone-400 hover:text-stone-600"}`,children:r},r))]})}),e.jsx("div",{className:"flex-1 overflow-y-auto px-4 pb-4",children:e.jsx("div",{className:"max-w-2xl mx-auto space-y-3",children:s.length===0?e.jsxs("div",{className:"text-center py-12 text-stone-300",children:[e.jsx("span",{className:"block text-4xl mb-4",children:"â˜•ï¸"}),e.jsx("p",{className:"italic font-serif text-lg",children:"Nothing to do here."}),e.jsx("p",{className:"text-sm font-sans",children:"Check other contexts or enjoy your break."})]}):s.map(r=>e.jsx("div",{className:"group bg-white p-4 rounded-xl border border-stone-200 hover:border-stone-400 shadow-sm hover:shadow-md transition-all cursor-pointer",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("button",{className:"pt-1 text-stone-300 hover:text-green-600 transition-colors",children:e.jsx(z,{size:24,strokeWidth:1.5})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-xl font-serif italic text-stone-800 mb-1 group-hover:text-black transition-colors",children:r.text}),e.jsxs("div",{className:"flex items-center gap-3 text-[10px] font-sans font-bold text-stone-400 uppercase tracking-widest",children:[r.project&&e.jsxs("span",{className:"text-stone-500",children:["ðŸ“‚ ",r.project]}),r.contextId&&e.jsx("span",{className:"bg-stone-100 px-1.5 py-0.5 rounded text-stone-500",children:r.contextId}),r.time&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(H,{size:10})," ",r.time]}),r.energy&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ae,{size:10})," ",r.energy]})]})]})]}),r.dueDate&&e.jsxs("span",{className:"text-xs font-serif italic text-red-500 bg-red-50 px-2 py-1 rounded-md",children:["Due ",new Date(r.dueDate).toLocaleDateString(void 0,{month:"short",day:"numeric"})]})]})},r.id))})})]})},F="gtd-system-items",L="gtd-system-projects",Se=({userName:n="User",onOpenQuickTask:v,onOpenDiscussion:j})=>{const[c,a]=p.useState("capture"),[s,r]=p.useState(()=>{try{const t=localStorage.getItem(F);if(t)return JSON.parse(t)}catch(t){console.error("Failed to load GTD items",t)}return[{id:1,text:"Call insurance company",status:"inbox",createdAt:Date.now()},{id:2,text:"Brainstorm marketing ideas",status:"inbox",createdAt:Date.now()-1e3},{id:3,text:"Buy printer ink",status:"actionable",contextId:"errands",energy:"Low",time:"30m",createdAt:Date.now()-2e3},{id:4,text:"Review Q3 Financials",status:"waiting",delegatedTo:"Alice",createdAt:Date.now()-5e3},{id:5,text:"Learn Spanish",status:"someday",createdAt:Date.now()-1e4}]}),[i,o]=p.useState(()=>{try{const t=localStorage.getItem(L);if(t)return JSON.parse(t)}catch(t){console.error("Failed to load GTD projects",t)}return[{id:101,name:"Q4 Marketing Strategy",status:"active",items:[]},{id:102,name:"Office Renovation",status:"planning",items:[]}]});R.useEffect(()=>{localStorage.setItem(F,JSON.stringify(s))},[s]),R.useEffect(()=>{localStorage.setItem(L,JSON.stringify(i))},[i]);const[f,g]=p.useState(null),N=s.filter(t=>t.status==="inbox").sort((t,y)=>y.createdAt-t.createdAt),S=s.filter(t=>t.status==="actionable");s.filter(t=>t.status==="waiting"),s.filter(t=>t.status==="someday"),s.filter(t=>t.status==="reference");const C=t=>{const y={id:Date.now(),text:t,status:"inbox",createdAt:Date.now()};r([y,...s])},k=(t,y)=>{r(s.map(d=>d.id===t?{...d,...y}:d)),t===f&&(s.filter(d=>d.status==="inbox"&&d.id!==t),N.findIndex(d=>d.id===t)+1,g(null))},b=(t,y=[])=>{const d={id:Date.now(),name:t,status:"active",items:[]},x=y.map((m,D)=>({id:Date.now()+D+1,text:m,status:"actionable",projectId:d.id,createdAt:Date.now()}));o([...i,d]),r([...s,...x])},l=()=>{switch(c){case"capture":return e.jsx(je,{inbox:N,onCapture:C,onSelect:t=>{g(t),a("clarify")}});case"clarify":return e.jsx(we,{item:s.find(t=>t.id===f)||N[0],onProcess:k,onCreateProject:b,onNavigate:t=>a(t),projects:i,hasMore:N.length>0});case"organize":return e.jsx(Ne,{projects:i,items:s,onUpdateItem:k});case"review":return e.jsx(ye,{items:s});case"engage":return e.jsx(ke,{actions:S,projects:i});default:return null}},w=[{id:"capture",label:"Capture",icon:W,color:"text-blue-600",count:N.length},{id:"clarify",label:"Clarify",icon:z,color:"text-amber-600",count:f?1:0},{id:"organize",label:"Organize",icon:M,color:"text-indigo-600"},{id:"review",label:"Reflect",icon:J,color:"text-green-600"},{id:"engage",label:"Engage",icon:fe,color:"text-rose-600"}];return e.jsxs("div",{className:"h-full w-full bg-stone-50 rounded-[2.5rem] p-6 shadow-inner ring-1 ring-stone-900/5 flex flex-col font-serif relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 opacity-[0.03] pointer-events-none bg-[url('https://www.transparenttextures.com/patterns/notebook.png')]"}),e.jsxs("div",{className:"flex-1 relative z-10 overflow-hidden bg-white/60 backdrop-blur-sm rounded-3xl border border-stone-100 shadow-sm flex flex-col",children:[e.jsxs("div",{className:"flex-none flex flex-col items-center justify-center pt-8 pb-4 z-10 relative border-b border-stone-100/50 bg-white/40",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsxs("h1",{className:"text-5xl font-serif text-stone-900 mb-3 tracking-tight italic",children:[(()=>{const t=new Date().getHours();return t<12?"Good morning":t<17?"Good afternoon":"Good evening"})(),", ",n]}),e.jsx("p",{className:"text-stone-500 font-sans tracking-wide uppercase text-xs font-bold",children:"What would you like to focus on today?"})]}),e.jsxs("div",{className:"flex items-center gap-3 flex-wrap justify-center mb-6",children:[e.jsx("button",{onClick:v,className:"group relative px-6 py-3 bg-stone-900 text-stone-50 rounded-xl overflow-hidden shadow-lg hover:shadow-xl transition-all hover:-translate-y-0.5",children:e.jsxs("span",{className:"relative z-10 flex items-center gap-2 font-bold text-sm tracking-wide",children:[e.jsx("span",{className:"text-stone-400 group-hover:text-white transition-colors",children:"+"})," New Task"]})}),e.jsx("button",{onClick:j,className:"group relative px-6 py-3 bg-white text-stone-900 border border-stone-200 rounded-xl overflow-hidden shadow-sm hover:shadow-md transition-all hover:border-stone-300 hover:-translate-y-0.5",children:e.jsx("span",{className:"relative z-10 flex items-center gap-2 font-bold text-sm tracking-wide",children:"Discussion"})}),e.jsx("button",{className:"group relative px-6 py-3 bg-white text-stone-900 border border-stone-200 rounded-xl overflow-hidden shadow-sm hover:shadow-md transition-all hover:border-stone-300 hover:-translate-y-0.5",children:e.jsx("span",{className:"relative z-10 flex items-center gap-2 font-bold text-sm tracking-wide",children:"New Goal"})}),e.jsx("button",{className:"group relative px-6 py-3 bg-white text-stone-900 border border-stone-200 rounded-xl overflow-hidden shadow-sm hover:shadow-md transition-all hover:border-stone-300 hover:-translate-y-0.5",children:e.jsx("span",{className:"relative z-10 flex items-center gap-2 font-bold text-sm tracking-wide",children:"New Reminder"})}),e.jsx("button",{className:"group relative px-6 py-3 bg-white text-stone-900 border border-stone-200 rounded-xl overflow-hidden shadow-sm hover:shadow-md transition-all hover:border-stone-300 hover:-translate-y-0.5",children:e.jsx("span",{className:"relative z-10 flex items-center gap-2 font-bold text-sm tracking-wide",children:"Add File"})})]})]}),e.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[e.jsx("div",{className:"flex-1 overflow-y-auto scrollbar-thin scrollbar-thumb-stone-200 p-6",children:l()}),e.jsx("div",{className:"w-16 flex flex-col items-center py-6 gap-4 border-l border-stone-100 bg-stone-50/50",children:w.map(t=>e.jsxs("button",{onClick:()=>a(t.id),className:`group relative p-3 rounded-xl transition-all duration-300 flex items-center justify-center ${c===t.id?"bg-stone-900 text-white shadow-md":"hover:bg-white hover:shadow-sm text-stone-400 hover:text-stone-800"}`,children:[e.jsx(t.icon,{size:20,strokeWidth:c===t.id?2.5:2}),e.jsx("div",{className:"absolute right-full mr-2 top-1/2 -translate-y-1/2 overflow-hidden pointer-events-none",children:e.jsx("div",{className:"bg-stone-900 text-white text-xs font-bold px-3 py-1.5 rounded-lg whitespace-nowrap opacity-0 translate-x-2 group-hover:opacity-100 group-hover:translate-x-0 transition-all duration-300 shadow-xl",children:t.label})}),t.id==="capture"&&t.count>0&&e.jsx("span",{className:`absolute -top-1 -right-1 flex h-4 w-4 items-center justify-center rounded-full text-[9px] font-bold ${c===t.id?"bg-white text-black":"bg-red-500 text-white"}`,children:t.count})]},t.id))})]})]})]})},De="available_rooms",Ve=({cards:n=[],onUpdateCard:v=s=>{},onRemoveCard:j=s=>{},onOpenCustomize:c=()=>{},userName:a="User"})=>{var y;const{showToast:s}=ne(),{setActivePage:r}=le(),[i,o]=p.useState(!1),[f,g]=p.useState(!1),[N,S]=p.useState([]);R.useEffect(()=>{(()=>{try{const x=localStorage.getItem(De);x&&S(JSON.parse(x))}catch(x){console.error("Failed to load rooms for QuickTask",x)}})()},[]);const C=((y=$.groups[0])==null?void 0:y.columns)||[],k=d=>{console.log("Debug: Handle Send",d);try{const x=ie.getCurrentUser(),m=x?`taskboard-${x.id}`:"taskboard-default";console.log("Debug: Sending tasks to",m);const D=localStorage.getItem(m);let h=D?JSON.parse(D):{id:"main",name:"My Tasks",groups:[],columns:[],users:[],version:1};console.log("Debug: Main board before merge",h),(d.groups||[]).map(u=>({...u,id:u.id||crypto.randomUUID(),title:u.title||"Quick Tasks",color:u.color||"#579bfc",columns:Array.isArray(u.columns)&&u.columns.length?u.columns:C,tasks:Array.isArray(u.tasks)?u.tasks:[]})).forEach(u=>{if(u.tasks.length>0){const A=u.title||"Quick Tasks";let E=A,_=1;for(;h.groups.some(Q=>Q.title===E);)E=`${A} (${_})`,_+=1;const U={...u,id:crypto.randomUUID(),title:E,tasks:[...u.tasks]};h.groups=[U,...h.groups]}}),localStorage.setItem(m,JSON.stringify(h)),console.log("Debug: Saved to localStorage",m,h),s("Tasks sent to My Tasks successfully","success"),r("tasks"),window.dispatchEvent(new CustomEvent("local-storage-update",{detail:{key:m}})),window.dispatchEvent(new Event("storage"))}catch(x){console.error("Failed to merge to main tasks",x),s("Failed to send tasks","error")}},b=(d,x)=>{try{const m=`room_board_${x.id}`,D=localStorage.getItem(m);let h=D?JSON.parse(D):{id:x.id,name:x.name,groups:[],columns:[],users:[],version:1};d.groups.forEach(T=>{if(T.tasks.length>0){let u=h.groups.find(A=>A.title===T.title);u||(u={...T,id:crypto.randomUUID(),tasks:[]},h.groups.push(u)),u.tasks=[...u.tasks,...T.tasks]}}),localStorage.setItem(m,JSON.stringify(h)),s(`Tasks sent to ${x.name}`,"success"),window.dispatchEvent(new CustomEvent("local-storage-update",{detail:{key:m}})),window.dispatchEvent(new Event("storage"))}catch(m){console.error("Failed to send to room",m),s("Failed to send to room","error")}},l=(d,x)=>{if(g(!1),x.type==="main")k(d);else if(x.type==="room"&&x.roomId){const m=N.find(D=>D.id===x.roomId);m?b(d,m):s("Room not found","error")}},w=()=>{o(!0)},t=async(d,x)=>{try{const m=await de.createChannel(d,x);s("Discussion created successfully!","success"),localStorage.setItem("autoOpenChannelId",m.id),o(!1),r("discussion")}catch(m){console.error("Failed to create discussion:",m),s("Failed to create discussion","error")}};return e.jsxs("div",{className:"flex-1 bg-brand-surface flex flex-col h-full overflow-hidden relative",children:[e.jsx("div",{className:"flex-1 overflow-y-auto scrollbar-hide w-full h-full bg-white relative",children:e.jsx("div",{className:"w-full mx-auto p-4 pb-24 flex flex-col h-full min-h-[800px]",children:e.jsx("div",{className:"flex-1 w-full animate-fade-in-up",children:e.jsx(Se,{userName:a,onOpenQuickTask:()=>g(!0),onOpenDiscussion:w})})})}),e.jsx(ve,{isOpen:f,onClose:()=>g(!1),onSend:l,rooms:N,darkMode:!1}),e.jsx(ce,{isOpen:i,onClose:()=>o(!1),onCreate:t})]})};export{Ve as default};
