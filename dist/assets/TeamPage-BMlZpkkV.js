import{c as U,r as d,u as F,a1 as R,j as e,F as b,I,ag as j,$ as L,aY as $,aZ as D,V as B,P as E,O as V,al as _,B as O,aA as Z,Z as H,Y,E as q,a_ as G,e as Q}from"./index-BlVqsW8p.js";import{S as W}from"./star-DYj3Qkqt.js";/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],K=U("layout-grid",J),se=()=>{const[i,f]=d.useState([]),[o,N]=d.useState([]),[v,w]=d.useState([]),[k,m]=d.useState(!0),[h,g]=d.useState("all"),{showToast:T}=F(),x=R();d.useEffect(()=>{z()},[]);const z=async()=>{try{m(!0);const[s,t,r]=await Promise.all([fetch(`${x}/teams`),fetch(`${x}/tasks`),fetch(`${x}/users`)]),n=await s.json(),l=await t.json(),c=await r.json();f(n),N(l),w(c)}catch(s){console.error("Failed to fetch team data:",s),T("Failed to load teams","error")}finally{m(!1)}},y=s=>o.filter(t=>t.assignees.some(r=>r.id===s)),C=s=>v.find(t=>t.id===s),S=new Set(i.flatMap(s=>s.members)).size,A=o.filter(s=>s.status!=="Complete").length,p=i.length>0?i.reduce((s,t)=>{const r=y(t.id),n=r.filter(l=>l.status==="Complete").length;return s+(r.length>0?n/r.length*100:0)},0)/i.length:0;return k?e.jsx("div",{className:"flex items-center justify-center h-full bg-white",children:e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-brand-primary"})}):e.jsxs("div",{className:"flex h-full bg-white text-gray-900 overflow-hidden font-sans",children:[e.jsxs("div",{className:"w-80 bg-gray-50 border-r border-gray-200 flex flex-col flex-shrink-0",children:[e.jsx("div",{className:"p-4",children:e.jsxs("h2",{className:"text-xl font-bold flex items-center gap-2 text-gray-800",children:[e.jsx(b,{className:"text-brand-primary",size:22}),e.jsx("span",{children:"Teams"})]})}),e.jsxs("div",{className:"flex-1 overflow-y-auto px-3 space-y-3 custom-scrollbar",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs("button",{onClick:()=>g("all"),className:`w-full flex items-center justify-between px-3 py-1.5 rounded-md text-base font-medium transition-colors ${h==="all"?"bg-white text-brand-primary shadow-sm ring-1 ring-gray-200":"text-gray-600 hover:bg-gray-100 hover:text-gray-900"}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(K,{size:18}),e.jsx("span",{children:"All Teams"})]}),e.jsx("span",{className:"text-xs bg-gray-200 text-gray-600 px-2 py-0.5 rounded-full",children:i.length})]}),e.jsxs("button",{onClick:()=>g("my"),className:`w-full flex items-center justify-between px-3 py-1.5 rounded-md text-base font-medium transition-colors ${h==="my"?"bg-white text-brand-primary shadow-sm ring-1 ring-gray-200":"text-gray-600 hover:bg-gray-100 hover:text-gray-900"}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(W,{size:18}),e.jsx("span",{children:"My Teams"})]}),e.jsx("span",{className:"text-xs bg-gray-200 text-gray-600 px-2 py-0.5 rounded-full",children:"2"})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"px-3 text-xs font-bold text-gray-400 uppercase tracking-wider mb-1",children:"Departments"}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"px-3 py-1.5 text-sm font-semibold text-gray-800 flex items-center gap-2",children:[e.jsx(I,{size:18,className:"text-gray-500"}),"Supply Chain"]}),e.jsx("div",{className:"pl-9 space-y-0.5",children:["Procurement","Warehouse","Shipping","Planning","Fleet","Vendors"].map(s=>e.jsx("button",{className:"w-full flex items-center px-2 py-1 rounded-md text-sm font-medium text-gray-500 hover:bg-gray-100 hover:text-gray-900 transition-colors",children:s},s))}),e.jsxs("div",{className:"px-3 py-1.5 text-sm font-semibold text-gray-800 flex items-center gap-2 mt-2",children:[e.jsx(j,{size:18,className:"text-gray-500"}),"Operations"]}),e.jsx("div",{className:"pl-9 space-y-0.5",children:["Maintenance","Production","Quality"].map(s=>e.jsx("button",{className:"w-full flex items-center px-2 py-1 rounded-md text-sm font-medium text-gray-500 hover:bg-gray-100 hover:text-gray-900 transition-colors",children:s},s))}),e.jsxs("div",{className:"px-3 py-1.5 text-sm font-semibold text-gray-800 flex items-center gap-2 mt-2",children:[e.jsx(L,{size:18,className:"text-gray-500"}),"Business"]}),e.jsx("div",{className:"pl-9 space-y-0.5",children:["Sales","Finance"].map(s=>e.jsx("button",{className:"w-full flex items-center px-2 py-1 rounded-md text-sm font-medium text-gray-500 hover:bg-gray-100 hover:text-gray-900 transition-colors",children:s},s))}),e.jsxs("div",{className:"px-3 py-1.5 text-sm font-semibold text-gray-800 flex items-center gap-2 mt-2",children:[e.jsx($,{size:18,className:"text-gray-500"}),"Support"]}),e.jsx("div",{className:"pl-9 space-y-0.5",children:["IT","HR","Marketing"].map(s=>e.jsx("button",{className:"w-full flex items-center px-2 py-1 rounded-md text-sm font-medium text-gray-500 hover:bg-gray-100 hover:text-gray-900 transition-colors",children:s},s))})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"px-3 text-xs font-bold text-gray-400 uppercase tracking-wider mb-1",children:"Insights"}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("button",{className:"w-full flex items-center px-3 py-1.5 rounded-md text-base font-medium text-gray-600 hover:bg-gray-100 hover:text-gray-900 transition-colors",children:[e.jsx(D,{size:18,className:"mr-2"}),e.jsx("span",{children:"Capacity"})]}),e.jsxs("button",{className:"w-full flex items-center px-3 py-1.5 rounded-md text-base font-medium text-gray-600 hover:bg-gray-100 hover:text-gray-900 transition-colors",children:[e.jsx(B,{size:18,className:"mr-2"}),e.jsx("span",{children:"Velocity"})]})]})]})]}),e.jsx("div",{className:"p-4 border-t border-gray-200",children:e.jsxs("button",{className:"w-full bg-brand-primary hover:bg-brand-primary/90 text-white px-3 py-2 rounded-lg text-sm font-medium transition-all shadow-sm flex items-center justify-center gap-2",children:[e.jsx(E,{size:18}),e.jsx("span",{children:"Create Team"})]})})]}),e.jsxs("div",{className:"flex-1 flex flex-col min-w-0 overflow-hidden bg-gray-50/50",children:[e.jsxs("div",{className:"h-14 border-b border-gray-200 flex items-center justify-between px-6 bg-white",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(V,{className:"absolute left-2.5 top-1/2 transform -translate-y-1/2 text-gray-400",size:14}),e.jsx("input",{type:"text",placeholder:"Search teams...",className:"pl-8 pr-3 py-1.5 bg-gray-100 border-none rounded-md text-xs text-gray-900 placeholder-gray-500 focus:ring-1 focus:ring-brand-primary w-56 transition-all"})]}),e.jsx("button",{className:"p-1.5 text-gray-400 hover:text-gray-700 hover:bg-gray-100 rounded-md transition-colors",children:e.jsx(_,{size:16})})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{className:"p-1.5 text-gray-400 hover:text-gray-700 hover:bg-gray-100 rounded-md transition-colors relative",children:[e.jsx(O,{size:16}),e.jsx("span",{className:"absolute top-1.5 right-1.5 w-1.5 h-1.5 bg-red-500 rounded-full border-2 border-white"})]}),e.jsx("button",{className:"p-1.5 text-gray-400 hover:text-gray-700 hover:bg-gray-100 rounded-md transition-colors",children:e.jsx(j,{size:16})})]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6 custom-scrollbar",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-8",children:[e.jsxs("div",{className:"bg-white p-4 rounded-xl border border-gray-100 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:"p-2 bg-green-50 rounded-lg",children:e.jsx(Z,{className:"text-green-600",size:18})}),e.jsx("span",{className:"text-green-600 text-xs font-medium",children:"+12% vs last month"})]}),e.jsxs("h3",{className:"text-2xl font-bold text-gray-900 mb-0.5",children:[Math.round(p),"%"]}),e.jsx("p",{className:"text-gray-500 text-xs",children:"Average Task Completion"})]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl border border-gray-100 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:"p-2 bg-blue-50 rounded-lg",children:e.jsx(H,{className:"text-blue-600",size:18})}),e.jsx("span",{className:"text-blue-600 text-xs font-medium",children:"High Velocity"})]}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-0.5",children:A}),e.jsx("p",{className:"text-gray-500 text-xs",children:"Active Tasks Across Teams"})]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl border border-gray-100 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:"p-2 bg-purple-50 rounded-lg",children:e.jsx(Y,{className:"text-purple-600",size:18})}),e.jsx("span",{className:"text-purple-600 text-xs font-medium",children:"All Systems Operational"})]}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-0.5",children:i.length}),e.jsx("p",{className:"text-gray-500 text-xs",children:"Active Squads Deployed"})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl shadow-sm overflow-hidden",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Featured Teams"}),e.jsx("button",{className:"text-gray-400 hover:text-gray-600",children:e.jsx(q,{size:20})})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-100",children:[e.jsx("th",{className:"text-left py-4 px-6 text-xs font-medium text-gray-500 uppercase tracking-wider w-1/3",children:"Creator"}),e.jsx("th",{className:"text-left py-4 px-6 text-xs font-medium text-gray-500 uppercase tracking-wider w-1/3",children:"Campaign"}),e.jsx("th",{className:"text-right py-4 px-6 text-xs font-medium text-gray-500 uppercase tracking-wider w-1/3",children:"Status"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-50",children:i.map(s=>{var u;const t=y(s.id),r=t.filter(P=>P.status==="Complete").length,n=t.length>0?r/t.length*100:0;let l="Pending",c="bg-orange-50 text-orange-600";n>=80?(l="Success",c="bg-green-50 text-green-600"):n===0&&t.length===0?(l="Inactive",c="bg-gray-100 text-gray-500"):n<30&&(l="At Risk",c="bg-red-50 text-red-600");const M=s.members[0],a=C(M);return e.jsxs("tr",{className:"group hover:bg-gray-50/50 transition-colors",children:[e.jsx("td",{className:"py-4 px-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-10 h-10 rounded-full overflow-hidden bg-gray-100 border border-gray-200",children:a!=null&&a.avatarUrl?e.jsx("img",{src:a.avatarUrl,alt:a.name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-xs font-bold text-gray-400",children:((u=a==null?void 0:a.name)==null?void 0:u.charAt(0))||"?"})}),e.jsx("div",{className:"absolute bottom-0 right-0 w-2.5 h-2.5 bg-green-500 border-2 border-white rounded-full"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-900 text-sm",children:(a==null?void 0:a.name)||"Unknown Lead"}),e.jsx("div",{className:"text-xs text-gray-500",children:"Team Lead"})]})]})}),e.jsx("td",{className:"py-4 px-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl flex items-center justify-center text-white shadow-sm shrink-0",style:{backgroundColor:s.color},children:e.jsx("span",{className:"font-bold text-lg",children:s.name.charAt(0)})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-900 text-sm",children:s.name}),e.jsxs("div",{className:"text-xs text-gray-500",children:[s.members.length," Members â€¢ ",t.length," Tasks"]})]})]})}),e.jsx("td",{className:"py-4 px-6 text-right",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium ${c}`,children:l})})]},s.id)})})]})})]})]}),e.jsx(G,{leftContent:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(b,{size:12,className:"mr-1.5 text-gray-400"}),e.jsxs("span",{className:"font-medium text-gray-600",children:[S," Members"]})]}),e.jsx("div",{className:"h-2.5 w-px bg-gray-200"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(Q,{size:12,className:"mr-1.5 text-green-500"}),e.jsxs("span",{className:"font-medium text-gray-600",children:[Math.round(p),"% Completion Rate"]})]})]})})]})]})};export{se as TeamPage};
