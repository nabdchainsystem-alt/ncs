import{r as l,j as e,a5 as w,P as L,aF as V,ad as W,a6 as X,m as Z,C as H,X as E,l as q,az as J}from"./index-sqQsKImc.js";import{g as f}from"./goalsService-XSbMoi0L.js";import{D as ee}from"./DatePicker-pXxBGZdI.js";const s={pageBg:"bg-stone-50",container:"w-full",sectionPadding:"py-10",fontMain:"font-serif antialiased",h1:"text-5xl font-medium tracking-tight text-gray-900 font-serif",subline:"text-lg text-gray-500 font-serif italic mt-2",navText:"text-sm font-bold tracking-wide uppercase",btnGroup:"flex items-stretch border border-gray-900 rounded-sm bg-white shadow-sm hover:shadow-md transition-shadow",btnLeft:"px-6 py-2.5 flex items-center gap-2 text-sm font-bold border-r border-gray-900 hover:bg-gray-50 text-gray-900",btnRight:"px-6 py-2.5 flex items-center gap-2 text-sm font-bold hover:bg-gray-50 text-gray-900",tabActive:"text-black border-b-2 border-black",tabInactive:"text-gray-400 hover:text-gray-600 border-transparent",card:"relative group py-8 px-6 -mx-4 rounded-xl transition-all duration-300 border border-transparent",cardCompleted:"bg-white/50 border-gray-100 shadow-none opacity-60 hover:opacity-100 transition-opacity",cardActive:"hover:bg-white/50 border-b-gray-200 border-b",glowingDot:"w-3 h-3 rounded-full bg-emerald-400 shadow-[0_0_15px_3px_rgba(52,211,153,0.9),0_0_30px_6px_rgba(16,185,129,0.5)] border border-white/20",kpiStat:"text-6xl font-serif text-gray-900 leading-none",kpiLabel:"text-[10px] font-bold uppercase tracking-[0.2em] text-gray-400 mt-2"},te=["All","Quarterly","Monthly","Personal","Work","Long-term","Completed"],le=()=>{const[b,_]=l.useState("All"),[i,g]=l.useState([]),[r,d]=l.useState(null),[F,u]=l.useState(!1),[y,k]=l.useState(""),[C,G]=l.useState("Work"),[h,D]=l.useState(""),[S,z]=l.useState("Medium"),[$,A]=l.useState(""),[M,p]=l.useState(!1),[m,j]=l.useState(null),[O,T]=l.useState(!0);l.useEffect(()=>{I()},[]);const I=async()=>{T(!0);try{const t=await f.getGoals();g(t)}catch(t){console.error("Failed to load goals",t)}finally{T(!1)}},R=async()=>{if(!y.trim())return;const t={title:y,category:C,dueDate:h||new Date().toISOString().split("T")[0],progress:0,subGoals:[],status:"on-track",priority:S,impact:"Medium",description:$};try{const a=await f.createGoal(t);g([a,...i]),k(""),G("Work"),D(""),z("Medium"),A(""),u(!1)}catch(a){console.error("Failed to save goal",a),alert("Failed to save goal. Please check the server connection.")}},n=async t=>{g(i.map(a=>a.id===t.id?t:a)),d(t);try{await f.updateGoal(t)}catch(a){console.error("Failed to update goal",a)}},U=t=>{j(t)},Y=async()=>{if(m)try{await f.deleteGoal(m),g(i.filter(t=>t.id!==m)),(r==null?void 0:r.id)===m&&d(null)}catch(t){console.error("Failed to delete goal",t)}finally{j(null)}},B=(t,a)=>{const c={id:Date.now().toString(),title:a,completed:!1},o={...t,subGoals:[...t.subGoals,c]};n(o)},K=(t,a)=>{const c={...t,subGoals:t.subGoals.map(o=>o.id===a?{...o,completed:!o.completed}:o)};if(c.subGoals.length>0){const o=c.subGoals.filter(Q=>Q.completed).length;c.progress=Math.round(o/c.subGoals.length*100)}n(c)},[v,P]=l.useState(""),x=b==="All"?i:b==="Completed"?i.filter(t=>t.status==="completed"||t.progress===100):i.filter(t=>t.category===b),N=t=>t?new Date(t).toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric"}):"";return e.jsxs("div",{className:`h-screen w-full ${s.pageBg} ${s.fontMain} relative overflow-hidden flex flex-col`,children:[e.jsx("div",{className:"fixed inset-0 pointer-events-none opacity-[0.02]",style:{backgroundImage:"radial-gradient(#000 0.5px, transparent 0.5px)",backgroundSize:"24px 24px"}}),e.jsx("div",{className:"flex-1 overflow-y-auto overflow-x-hidden relative",children:e.jsxs("div",{className:`${s.container} px-8 md:px-16 pb-32 relative z-10`,children:[e.jsxs("header",{className:`${s.sectionPadding} pt-20 pb-16 flex flex-col md:flex-row justify-between items-end gap-8`,children:[e.jsxs("div",{children:[e.jsx("h1",{className:s.h1,children:"Your Goals"}),e.jsx("p",{className:s.subline,children:"Strategy, execution, and impact."})]}),e.jsxs("div",{className:s.btnGroup,children:[e.jsxs("button",{className:s.btnLeft,children:[e.jsx(w,{size:16,strokeWidth:2}),"New Project"]}),e.jsxs("button",{onClick:()=>u(!0),className:s.btnRight,children:[e.jsx(L,{size:16,strokeWidth:2}),"New Goal"]})]})]}),e.jsx("nav",{className:"flex items-center gap-8 mb-20 overflow-x-auto pb-1 scrollbar-hide border-b border-gray-200",children:te.map(t=>e.jsx("button",{onClick:()=>_(t),className:`pb-3 transition-colors whitespace-nowrap ${s.navText} ${b===t?s.tabActive:s.tabInactive}`,children:t},t))}),e.jsxs("section",{className:"grid grid-cols-1 md:grid-cols-3 gap-12 mb-24",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:s.kpiStat,children:i.filter(t=>t.status!=="completed").length}),e.jsx("span",{className:s.kpiLabel,children:"Active Goals"}),e.jsxs("div",{className:"flex items-center gap-2 mt-3 text-xs font-bold text-emerald-600",children:[e.jsx(V,{size:12})," High Velocity"]})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:s.kpiStat,children:i.filter(t=>t.status==="completed"||t.progress===100).length}),e.jsx("span",{className:s.kpiLabel,children:"Completed"}),e.jsxs("div",{className:"flex items-center gap-2 mt-3 text-xs font-bold text-blue-600",children:[e.jsx(W,{size:12})," Consistent"]})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("span",{className:s.kpiStat,children:[i.length>0?Math.round(i.filter(t=>t.status==="on-track").length/i.length*100):0,e.jsx("span",{className:"text-3xl",children:"%"})]}),e.jsx("span",{className:s.kpiLabel,children:"On Track"}),e.jsxs("div",{className:"flex items-center gap-2 mt-3 text-xs font-bold text-amber-600",children:[e.jsx(X,{size:12})," Strong Focus"]})]})]}),O?e.jsx("div",{className:"text-center py-20 text-gray-400 italic",children:"Loading your vision..."}):e.jsxs(e.Fragment,{children:[x.some(t=>t.priority==="High")&&e.jsxs("section",{className:"mb-20",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[e.jsx("div",{className:"p-2 bg-black text-white rounded-full",children:e.jsx(Z,{size:20})}),e.jsx("h2",{className:"text-2xl font-serif font-bold",children:"Current Focus"})]}),x.filter(t=>t.priority==="High").slice(0,1).map(t=>{const a=t.status==="completed"||t.progress===100;return e.jsxs("article",{onClick:()=>d(t),className:`${s.card} ${a?s.cardCompleted:`${s.cardActive} border-l-4 border-l-black !rounded-r-xl`} shadow-sm p-8 cursor-pointer`,children:[a&&e.jsx("div",{className:"absolute top-8 right-8",children:e.jsx("div",{className:s.glowingDot})}),e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"max-w-3xl w-full",children:[e.jsx("span",{className:"text-xs font-bold uppercase tracking-widest text-emerald-600 mb-2 block",children:"Top Priority"}),e.jsx("h3",{className:"text-4xl font-serif font-medium mb-4",children:t.title}),e.jsxs("div",{className:"flex items-center gap-6 text-sm text-gray-500 mb-6",children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(H,{size:14})," Due ",N(t.dueDate)]}),e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(w,{size:14})," ",t.category]})]}),e.jsx("div",{className:"w-full h-2 bg-gray-100 rounded-full overflow-hidden max-w-md",children:e.jsx("div",{className:`h-full ${a?"bg-black":"bg-emerald-500"}`,style:{width:`${t.progress}%`}})})]}),e.jsx("div",{className:"hidden md:block",children:e.jsxs("span",{className:"text-6xl font-serif text-gray-200",children:[t.progress,"%"]})})]})]},t.id)})]}),e.jsxs("section",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-12",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6 pb-4 border-b border-gray-200",children:[e.jsx(w,{size:18,className:"text-gray-400"}),e.jsx("h3",{className:"text-lg font-bold font-serif",children:"Work & Projects"}),e.jsx("span",{className:"ml-auto text-xs font-bold bg-gray-100 px-2 py-1 rounded-full",children:x.filter(t=>t.category==="Work").length})]}),x.filter(t=>t.category==="Work"&&t.priority!=="High").length===0&&e.jsx("p",{className:"text-gray-400 text-sm italic",children:"No other active work goals."}),x.filter(t=>t.category==="Work").map(t=>{if(t.priority==="High")return null;const a=t.status==="completed"||t.progress===100;return e.jsxs("div",{onClick:()=>d(t),className:`${s.card} ${a?s.cardCompleted:s.cardActive} p-6 cursor-pointer group`,children:[a&&e.jsx("div",{className:"absolute top-6 right-6",children:e.jsx("div",{className:s.glowingDot})}),e.jsx("h4",{className:"text-lg font-serif font-medium mb-2 group-hover:text-amber-700 transition-colors",children:t.title}),e.jsxs("div",{className:"flex justify-between items-center mt-4",children:[e.jsx("span",{className:"text-xs font-bold text-gray-400 uppercase",children:N(t.dueDate)}),e.jsx("div",{className:"w-16 h-1 bg-gray-100 rounded-full",children:e.jsx("div",{className:"h-full rounded-full bg-black",style:{width:`${t.progress}%`}})})]})]},t.id)})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6 pb-4 border-b border-gray-200",children:[e.jsx(W,{size:18,className:"text-gray-400"}),e.jsx("h3",{className:"text-lg font-bold font-serif",children:"Personal & Health"}),e.jsx("span",{className:"ml-auto text-xs font-bold bg-gray-100 px-2 py-1 rounded-full",children:x.filter(t=>t.category!=="Work").length})]}),x.filter(t=>t.category!=="Work"&&t.priority!=="High").length===0&&e.jsx("p",{className:"text-gray-400 text-sm italic",children:"No other active personal goals."}),x.filter(t=>t.category!=="Work").map(t=>{if(t.priority==="High")return null;const a=t.status==="completed"||t.progress===100;return e.jsxs("div",{onClick:()=>d(t),className:`${s.card} ${a?s.cardCompleted:s.cardActive} p-6 cursor-pointer group`,children:[a&&e.jsx("div",{className:"absolute top-6 right-6",children:e.jsx("div",{className:s.glowingDot})}),e.jsx("h4",{className:"text-lg font-serif font-medium mb-2 group-hover:text-blue-700 transition-colors",children:t.title}),e.jsxs("div",{className:"flex justify-between items-center mt-4",children:[e.jsx("span",{className:"text-xs font-bold text-gray-400 uppercase",children:N(t.dueDate)}),e.jsx("div",{className:"w-16 h-1 bg-gray-100 rounded-full",children:e.jsx("div",{className:`h-full rounded-full ${a?"bg-black":"bg-blue-500"}`,style:{width:`${t.progress}%`}})})]})]},t.id)})]}),e.jsxs("div",{className:"space-y-6 opacity-60 hover:opacity-100 transition-opacity",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6 pb-4 border-b border-gray-200",children:[e.jsx(H,{size:18,className:"text-gray-400"}),e.jsx("h3",{className:"text-lg font-bold font-serif",children:"Later"})]}),e.jsx("div",{className:"p-6 border-2 border-dashed border-gray-200 rounded-sm text-center",children:e.jsx("p",{className:"text-sm text-gray-400 font-serif italic",children:"Clean up desk"})})]})]})]})]})}),r&&e.jsxs("div",{className:"fixed inset-0 z-50 flex justify-end",children:[e.jsx("div",{className:"absolute inset-0 bg-white/50 backdrop-blur-sm",onClick:()=>d(null)}),e.jsxs("div",{className:"relative w-full max-w-[600px] h-full bg-white shadow-2xl p-12 overflow-y-auto animate-in slide-in-from-right duration-300 border-l border-gray-100 font-serif",children:[e.jsx("button",{onClick:()=>d(null),className:"absolute top-8 right-8 text-gray-400 hover:text-black",children:e.jsx(E,{size:24})}),e.jsx("span",{className:"text-xs font-bold uppercase tracking-widest text-gray-400 block mb-6",children:"Goal Details"}),e.jsx("input",{type:"text",className:"w-full text-4xl font-serif font-medium text-gray-900 mb-6 bg-transparent border-b border-transparent hover:border-gray-200 focus:border-black focus:outline-none transition-all",value:r.title,onChange:t=>n({...r,title:t.target.value})}),e.jsx("textarea",{className:"w-full text-gray-500 font-serif italic mb-8 bg-gray-50/50 p-4 rounded-sm border-l-2 border-gray-200 focus:border-black focus:outline-none resize-none",value:r.description||"",onChange:t=>n({...r,description:t.target.value}),placeholder:"Add a motivating description...",rows:3}),e.jsxs("div",{className:"grid grid-cols-2 gap-6 mb-10 pb-10 border-b border-gray-100",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-bold uppercase tracking-widest text-gray-400 block mb-2",children:"Status"}),e.jsxs("select",{className:"bg-transparent text-xs font-bold uppercase tracking-wide border-b border-gray-200 focus:border-black outline-none py-1 w-full",value:r.status,onChange:t=>n({...r,status:t.target.value}),children:[e.jsx("option",{value:"on-track",children:"On Track"}),e.jsx("option",{value:"at-risk",children:"At Risk"}),e.jsx("option",{value:"off-track",children:"Off Track"}),e.jsx("option",{value:"completed",children:"Completed"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-bold uppercase tracking-widest text-gray-400 block mb-2",children:"Priority"}),e.jsxs("select",{className:"bg-transparent text-sm font-bold text-gray-900 border-b border-gray-200 focus:border-black outline-none py-1 w-full",value:r.priority,onChange:t=>n({...r,priority:t.target.value}),children:[e.jsx("option",{value:"High",children:"High"}),e.jsx("option",{value:"Medium",children:"Medium"}),e.jsx("option",{value:"Low",children:"Low"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-bold uppercase tracking-widest text-gray-400 block mb-2",children:"Due Date"}),e.jsx("input",{type:"date",className:"bg-transparent text-sm font-serif text-gray-900 border-b border-gray-200 focus:border-black outline-none py-1 w-full",value:r.dueDate,onChange:t=>n({...r,dueDate:t.target.value})})]})]}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx("div",{className:"flex justify-between items-end mb-4",children:e.jsx("h3",{className:"text-lg font-bold",children:"Milestones"})}),e.jsxs("div",{className:"space-y-3",children:[r.subGoals&&r.subGoals.map(t=>e.jsxs("div",{className:"flex items-center gap-3 group",children:[e.jsx("button",{onClick:()=>K(r,t.id),className:`w-4 h-4 rounded-full border border-gray-300 flex-shrink-0 ${t.completed?"bg-black border-black":"hover:border-black transition-colors"}`}),e.jsx("input",{type:"text",className:`bg-transparent border-none focus:outline-none w-full ${t.completed?"line-through text-gray-400":"text-gray-900"}`,value:t.title,onChange:a=>{const c=r.subGoals.map(o=>o.id===t.id?{...o,title:a.target.value}:o);n({...r,subGoals:c})}}),e.jsx("button",{onClick:()=>n({...r,subGoals:r.subGoals.filter(a=>a.id!==t.id)}),className:"opacity-0 group-hover:opacity-100 text-gray-400 hover:text-red-500",children:e.jsx(E,{size:14})})]},t.id)),e.jsxs("div",{className:"flex items-center gap-3 mt-4",children:[e.jsx(L,{size:16,className:"text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Type a new milestone and press Enter...",className:"bg-transparent border-b border-gray-200 focus:border-black outline-none w-full py-1 text-sm font-serif",value:v,onChange:t=>P(t.target.value),onKeyDown:t=>{t.key==="Enter"&&v.trim()&&(B(r,v),P(""))}})]})]})]}),e.jsxs("div",{className:"pt-8 border-t border-gray-100 flex flex-col gap-3",children:[e.jsx("button",{onClick:()=>d(null),className:"w-full py-4 bg-black text-white text-sm font-bold uppercase tracking-widest hover:bg-gray-800 transition-colors rounded-sm flex justify-center items-center gap-2",children:"Close Details"}),e.jsxs("button",{onClick:()=>n({...r,status:"completed",progress:100}),className:"w-full py-4 bg-white border border-gray-200 text-gray-900 text-sm font-bold uppercase tracking-widest hover:bg-gray-50 transition-colors rounded-sm flex justify-center items-center gap-2",children:[e.jsx(q,{size:16})," Mark as Completed"]}),e.jsx("button",{onClick:()=>U(r.id),className:"w-full py-3 text-red-500 text-xs font-bold uppercase tracking-widest hover:bg-red-50 transition-colors rounded-sm",children:"Delete Goal"})]})]})]})]}),F&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-8",children:[e.jsx("div",{className:"absolute inset-0 bg-white/60 backdrop-blur-sm",onClick:()=>{u(!1),p(!1)}}),e.jsxs("div",{className:"relative w-full max-w-[600px] bg-white p-12 shadow-[0_20px_50px_rgba(0,0,0,0.1)] animate-in zoom-in-95 duration-300 rounded-[2px]",onClick:()=>p(!1),children:[e.jsx("h2",{className:"text-[32px] font-serif text-gray-900 leading-tight mb-2",children:"Create New Goal"}),e.jsx("p",{className:"text-[16px] text-gray-500 italic font-serif mb-10",children:"What's the next big milestone?"}),e.jsxs("div",{className:"space-y-8",onClick:t=>t.stopPropagation(),children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-bold uppercase tracking-[0.2em] text-gray-400 block mb-3",children:"Goal Title"}),e.jsx("input",{type:"text",className:"w-full text-2xl font-serif text-gray-900 pb-2 border-b-2 border-gray-900 focus:border-black focus:outline-none placeholder:text-gray-300",placeholder:"Enter goal...",value:y,onChange:t=>k(t.target.value),autoFocus:!0})]}),e.jsxs("div",{className:"flex gap-12",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"text-[10px] font-bold uppercase tracking-[0.2em] text-gray-400 block mb-4",children:"Category"}),e.jsx("div",{className:"flex flex-col gap-3",children:["WORK","PERSONAL","HEALTH"].map(t=>e.jsx("button",{onClick:()=>G(t.charAt(0)+t.slice(1).toLowerCase()),className:`px-4 py-3 text-[11px] font-bold uppercase tracking-widest text-left w-full transition-all border ${C.toUpperCase()===t?"bg-black text-white border-black":"bg-white text-gray-400 border-gray-200 hover:border-gray-900 hover:text-gray-900"}`,children:t},t))})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"text-[10px] font-bold uppercase tracking-[0.2em] text-gray-400 block mb-4",children:"Priority"}),e.jsx("div",{className:"flex flex-col gap-3",children:["HIGH","MEDIUM","LOW"].map(t=>e.jsx("button",{onClick:()=>z(t.charAt(0)+t.slice(1).toLowerCase()),className:`px-4 py-3 text-[11px] font-bold uppercase tracking-widest text-left w-full transition-all border ${S.toUpperCase()===t?"bg-black text-white border-black":"bg-white text-gray-400 border-gray-200 hover:border-gray-900 hover:text-gray-900"}`,children:t},t))})]})]}),e.jsxs("div",{className:"pt-2 relative",children:[e.jsx("label",{className:"text-[10px] font-bold uppercase tracking-[0.2em] text-gray-400 block mb-3",children:"Target Date"}),e.jsx("button",{onClick:t=>{t.stopPropagation(),p(!M)},className:"w-full text-left text-lg font-serif text-gray-900 pb-2 border-b border-gray-200 hover:border-black focus:outline-none transition-colors",children:h?new Date(h).toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric"}):e.jsx("span",{className:"text-gray-300",children:"MM/DD/YYYY"})}),M&&e.jsx("div",{className:"absolute top-full left-0 mt-4 z-[60] shadow-2xl",children:e.jsx(ee,{date:h,onSelect:t=>{D(t),p(!1)},onClose:()=>p(!1),compact:!0,className:"shadow-2xl border border-gray-100"})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-bold uppercase tracking-[0.2em] text-gray-400 block mb-3",children:"Description (Optional)"}),e.jsx("textarea",{className:"w-full text-base font-serif text-gray-600 pb-2 border-b border-gray-200 focus:border-black focus:outline-none resize-none h-24 bg-transparent",placeholder:"Add some context or success criteria...",value:$,onChange:t=>A(t.target.value)})]}),e.jsxs("div",{className:"flex justify-between items-center pt-8 mt-4",children:[e.jsx("button",{onClick:()=>u(!1),className:"text-xs font-bold uppercase tracking-widest text-gray-400 hover:text-black transition-colors",children:"Cancel"}),e.jsx("button",{onClick:R,className:"px-8 py-4 bg-black text-white text-xs font-bold uppercase tracking-[0.2em] hover:bg-gray-800 transition-colors shadow-lg",children:"Save Goal"})]})]})]})]}),e.jsx(J,{isOpen:!!m,onClose:()=>j(null),onConfirm:Y,title:"Delete Goal",message:"Are you sure you want to delete this goal? This action cannot be undone.",variant:"danger",confirmText:"Delete Goal"})]})};export{le as default};
