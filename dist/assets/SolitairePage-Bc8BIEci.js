import{c as C,ae as D,j as t,ax as k,J as S,r as g,K as F,ay as W,az as $}from"./index-BlVqsW8p.js";/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],V=C("trophy",M);class T{constructor(){this.state=this.getInitialState()}getInitialState(){return{stock:[],waste:[],foundations:{H:[],D:[],C:[],S:[]},tableau:[[],[],[],[],[],[],[]],score:0,moves:0,startTime:null,isWon:!1}}startNewGame(){const e=this.createDeck();this.shuffleDeck(e);const s=[[],[],[],[],[],[],[]];for(let n=0;n<7;n++)for(let a=n;a<7;a++){const o=e.pop();o&&(n===a&&(o.isFaceUp=!0),s[a].push(o))}this.state={stock:e,waste:[],foundations:{H:[],D:[],C:[],S:[]},tableau:s,score:0,moves:0,startTime:Date.now(),isWon:!1}}createDeck(){const e=["H","D","C","S"],s=["A","2","3","4","5","6","7","8","9","10","J","Q","K"],n=[];for(const a of e)for(const o of s)n.push({id:D(),suit:a,rank:o,isFaceUp:!1});return n}shuffleDeck(e){for(let s=e.length-1;s>0;s--){const n=Math.floor(Math.random()*(s+1));[e[s],e[n]]=[e[n],e[s]]}}drawCard(){if(this.state.stock.length>0){const e=this.state.stock.pop();e&&(e.isFaceUp=!0,this.state.waste.push(e))}else for(;this.state.waste.length>0;){const e=this.state.waste.pop();e&&(e.isFaceUp=!1,this.state.stock.push(e))}this.state.moves++}getCardColor(e){return e.suit==="H"||e.suit==="D"?"red":"black"}getRankValue(e){return{A:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,10:10,J:11,Q:12,K:13}[e]}moveWasteToTableau(e){const s=this.state.waste[this.state.waste.length-1];if(!s)return!1;const n=this.state.tableau[e],a=n[n.length-1];return this.isValidTableauMove(s,a)?(this.state.waste.pop(),this.state.tableau[e].push(s),this.state.moves++,this.state.score+=5,!0):!1}moveWasteToFoundation(){const e=this.state.waste[this.state.waste.length-1];if(!e)return!1;const s=this.state.foundations[e.suit],n=s[s.length-1];return this.isValidFoundationMove(e,n)?(this.state.waste.pop(),this.state.foundations[e.suit].push(e),this.state.moves++,this.state.score+=10,this.checkWinCondition(),!0):!1}moveTableauToFoundation(e){const s=this.state.tableau[e],n=s[s.length-1];if(!n)return!1;const a=this.state.foundations[n.suit],o=a[a.length-1];if(this.isValidFoundationMove(n,o)){if(s.pop(),s.length>0){const c=s[s.length-1];c.isFaceUp||(c.isFaceUp=!0,this.state.score+=5)}return this.state.foundations[n.suit].push(n),this.state.moves++,this.state.score+=10,this.checkWinCondition(),!0}return!1}moveTableauToTableau(e,s,n){const a=this.state.tableau[e],o=this.state.tableau[s],c=a.slice(n),x=c[0],f=o[o.length-1];if(this.isValidTableauMove(x,f)){if(this.state.tableau[e]=a.slice(0,n),this.state.tableau[e].length>0){const h=this.state.tableau[e][this.state.tableau[e].length-1];h.isFaceUp||(h.isFaceUp=!0,this.state.score+=5)}return this.state.tableau[s]=[...o,...c],this.state.moves++,!0}return!1}moveFoundationToTableau(e,s){const n=this.state.foundations[e],a=n[n.length-1];if(!a)return!1;const o=this.state.tableau[s],c=o[o.length-1];return this.isValidTableauMove(a,c)?(n.pop(),o.push(a),this.state.moves++,this.state.score-=15,!0):!1}isValidTableauMove(e,s){if(!s)return e.rank==="K";const n=this.getCardColor(e),a=this.getCardColor(s);if(n===a)return!1;const o=this.getRankValue(e.rank);return this.getRankValue(s.rank)===o+1}isValidFoundationMove(e,s){if(!s)return e.rank==="A";if(e.suit!==s.suit)return!1;const n=this.getRankValue(e.rank),a=this.getRankValue(s.rank);return n===a+1}checkWinCondition(){this.state.foundations.H.length+this.state.foundations.D.length+this.state.foundations.C.length+this.state.foundations.S.length===52&&(this.state.isWon=!0)}}const v=({card:d,index:e=0,isPlayable:s=!1,onClick:n,onDragStart:a,source:o,style:c})=>{const x=d.suit==="H"||d.suit==="D",f=({className:h})=>{switch(d.suit){case"H":return t.jsx("span",{className:`text-red-600 ${h}`,children:"♥"});case"D":return t.jsx("span",{className:`text-red-600 ${h}`,children:"♦"});case"C":return t.jsx("span",{className:`text-slate-900 ${h}`,children:"♣"});case"S":return t.jsx("span",{className:`text-slate-900 ${h}`,children:"♠"})}};return t.jsx(k.div,{layoutId:`card-${d.id}`,initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{type:"spring",stiffness:300,damping:25},whileHover:s?{y:-5,scale:1.05,zIndex:100}:{},whileTap:s?{scale:.95}:{},onClick:s?n:void 0,draggable:s&&!!a,onDragStart:h=>{s&&a&&a(h,d,o,e)},className:`
        relative w-24 h-36 rounded-xl shadow-md transform-gpu preserve-3d transition-shadow duration-200 select-none
        ${s?"cursor-grab active:cursor-grabbing":""}
        ${s?"hover:shadow-lg":""}
      `,style:{...c,backgroundColor:"white"},children:d.isFaceUp?t.jsxs("div",{className:"absolute inset-0 bg-white rounded-xl flex flex-col justify-between p-2 shadow-inner border border-gray-200 overflow-hidden",children:[t.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-transparent via-white/40 to-transparent opacity-0 hover:opacity-100 transition-opacity pointer-events-none"}),t.jsxs("div",{className:"flex flex-col items-center self-start leading-none",children:[t.jsx("span",{className:`text-xl font-bold ${x?"text-red-600":"text-slate-900"}`,children:d.rank}),t.jsx(f,{className:"text-sm"})]}),t.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-10 pointer-events-none",children:t.jsx(f,{className:"text-7xl transform scale-150"})}),t.jsxs("div",{className:"flex flex-col items-center self-end leading-none rotate-180",children:[t.jsx("span",{className:`text-xl font-bold ${x?"text-red-600":"text-slate-900"}`,children:d.rank}),t.jsx(f,{className:"text-sm"})]})]}):t.jsxs("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-900 to-slate-900 rounded-xl border border-white/10 overflow-hidden flex items-center justify-center shadow-inner",children:[t.jsx("div",{className:"absolute inset-0 opacity-30 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')]"}),t.jsx("div",{className:"w-20 h-32 border-2 border-white/10 rounded-lg flex items-center justify-center",children:t.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-tr from-yellow-500 to-amber-300 opacity-20 blur-sm"})})]})})},j=({type:d,icon:e,onClick:s,onDrop:n,highlight:a})=>t.jsx("div",{className:`
                w-24 h-36 rounded-xl border-2 border-dashed flex items-center justify-center transition-colors
                ${a?"border-yellow-400 bg-yellow-400/10":"border-white/20 bg-black/20"}
                ${s?"cursor-pointer hover:bg-white/5":""}
            `,onClick:s,onDragOver:o=>{n&&o.preventDefault()},onDrop:n,children:e?t.jsx("div",{className:"opacity-30 text-white text-4xl",children:e}):d==="stock"&&t.jsx("div",{className:"w-12 h-12 rounded-full border-2 border-white/20 flex items-center justify-center",children:t.jsx("span",{className:"text-white/40 text-xs",children:"RESTART"})})}),R="https://www.transparenttextures.com/patterns/wood-pattern.png",H="https://www.transparenttextures.com/patterns/felt.png",_=()=>{const{setActivePage:d}=S(),e=g.useRef(new T),[s,n]=g.useState(e.current.state),[a,o]=g.useState(null);g.useEffect(()=>{e.current.startNewGame(),c()},[]);const c=()=>{n({...e.current.state})},x=()=>{e.current=new T,e.current.startNewGame(),c()},f=()=>{e.current.drawCard(),c()},h=(l,i,u)=>{if(i==="waste"){if(e.current.moveWasteToFoundation()){c();return}for(let r=0;r<7;r++)if(e.current.moveWasteToTableau(r)){c();return}}else if(i.startsWith("tableau")){const r=parseInt(i.split("-")[1]);if(u===s.tableau[r].length-1&&e.current.moveTableauToFoundation(r)){c();return}}},w=(l,i,u,r)=>{o({card:i,source:u,index:r})},N=(l,i)=>{if(l.preventDefault(),!a)return;const{card:u,source:r,index:y}=a;let m=!1;if(i.startsWith("tableau")){const p=parseInt(i.split("-")[1]);if(r==="waste")m=e.current.moveWasteToTableau(p);else if(r.startsWith("tableau")){const b=parseInt(r.split("-")[1]);b!==p&&(m=e.current.moveTableauToTableau(b,p,y))}else if(r.startsWith("foundation")){const b=r.split("-")[1];m=e.current.moveFoundationToTableau(b,p)}}else if(i.startsWith("foundation")){if(r==="waste")m=e.current.moveWasteToFoundation();else if(r.startsWith("tableau")){const p=parseInt(r.split("-")[1]);y===s.tableau[p].length-1&&(m=e.current.moveTableauToFoundation(p))}}m&&c(),o(null)};return t.jsxs("div",{className:"w-full h-full bg-[#0f172a] relative overflow-hidden flex flex-col select-none",children:[t.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_center,_var(--tw-gradient-stops))] from-slate-800/50 via-slate-900 to-black pointer-events-none"}),t.jsxs("div",{className:"absolute top-0 left-0 right-0 p-6 flex justify-between items-start z-50 pointer-events-none",children:[t.jsx("button",{onClick:()=>d("home"),className:"pointer-events-auto p-3 bg-white/5 hover:bg-white/10 rounded-full text-white/80 hover:text-white backdrop-blur-md border border-white/10 transition-all hover:scale-105 active:scale-95",children:t.jsx(F,{size:24})}),t.jsxs("div",{className:"pointer-events-auto flex items-center gap-8 bg-black/40 backdrop-blur-xl px-10 py-4 rounded-2xl border border-white/10 shadow-2xl relative overflow-hidden",children:[t.jsxs("div",{className:"flex flex-col items-center gap-1",children:[t.jsx("span",{className:"text-[10px] font-bold text-blue-400 uppercase tracking-[0.2em]",children:"Score"}),t.jsx("span",{className:"text-4xl font-black text-white font-mono",children:s.score})]}),t.jsx("div",{className:"h-12 w-[1px] bg-white/20"}),t.jsxs("div",{className:"flex flex-col items-center gap-1",children:[t.jsx("span",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-[0.2em]",children:"Moves"}),t.jsx("span",{className:"text-4xl font-black text-white font-mono",children:s.moves})]})]}),t.jsx("div",{className:"pointer-events-auto flex gap-3",children:t.jsx("button",{onClick:x,className:"p-3 bg-white/5 hover:bg-white/10 rounded-full text-white/80 hover:text-white backdrop-blur-md border border-white/10 transition-all hover:rotate-180 duration-500",children:t.jsx(W,{size:20})})})]}),t.jsxs("div",{className:"flex-1 relative m-4 md:m-12 rounded-[3rem] shadow-[0_0_100px_rgba(0,0,0,0.8)] overflow-hidden isolate transform-gpu",children:[t.jsx("div",{className:"absolute inset-0 rounded-[3rem] z-0",style:{backgroundImage:`url(${R})`,backgroundColor:"#3f2e22",boxShadow:"inset 0 0 50px rgba(0,0,0,0.8), 0 0 20px rgba(0,0,0,0.5)"}}),t.jsxs("div",{className:"absolute inset-[15px] rounded-[2.5rem] z-0 overflow-hidden",style:{backgroundColor:"#1a472a",boxShadow:"inset 0 0 100px rgba(0,0,0,0.9)"},children:[t.jsx("div",{className:"absolute inset-0 opacity-40 mix-blend-multiply",style:{backgroundImage:`url(${H})`}}),t.jsxs("div",{className:"absolute inset-0 p-8 flex flex-col items-center justify-start pt-24",children:[t.jsxs("div",{className:"flex gap-12 mb-12 w-full max-w-6xl justify-between px-8",children:[t.jsxs("div",{className:"flex gap-6",children:[t.jsxs("div",{className:"relative",children:[s.stock.length>0?t.jsx(v,{card:s.stock[s.stock.length-1],isPlayable:!0,onClick:f,source:"stock"}):t.jsx(j,{type:"stock",onClick:f}),s.stock.length>1&&t.jsx("div",{className:"absolute top-0.5 left-0.5 w-24 h-36 bg-white/10 rounded-xl -z-10 border border-white/5"})]}),t.jsx("div",{className:"relative min-w-[6rem]",children:s.waste.map((l,i)=>i<s.waste.length-3?null:(Math.min(2,s.waste.length-1-i)*20,t.jsx("div",{className:"absolute top-0 left-0",style:{transform:`translateX(${-(s.waste.length-1-i)*20}px)`},children:t.jsx(v,{card:l,isPlayable:i===s.waste.length-1,onClick:()=>h(l,"waste",i),onDragStart:w,source:"waste"})},l.id)))})]}),t.jsx("div",{className:"flex gap-4",children:["H","D","C","S"].map(l=>t.jsx("div",{onDragOver:i=>i.preventDefault(),onDrop:i=>N(i,`foundation-${l}`),children:s.foundations[l].length>0?t.jsx(v,{card:s.foundations[l][s.foundations[l].length-1],isPlayable:!0,onDragStart:w,source:`foundation-${l}`}):t.jsx(j,{type:"foundation",icon:l==="H"?"♥":l==="D"?"♦":l==="C"?"♣":"♠",highlight:(a==null?void 0:a.card.suit)===l&&(a==null?void 0:a.card.rank)==="A"})},l))})]}),t.jsx("div",{className:"flex gap-4 w-full max-w-6xl justify-center px-8",children:s.tableau.map((l,i)=>t.jsxs("div",{className:"relative w-24 min-h-[20rem]",onDragOver:u=>u.preventDefault(),onDrop:u=>N(u,`tableau-${i}`),children:[l.length===0&&t.jsx(j,{type:"tableau",highlight:(a==null?void 0:a.card.rank)==="K"}),l.map((u,r)=>t.jsx("div",{className:"absolute top-0 left-0 w-full",style:{top:`${r*(u.isFaceUp?30:10)}px`,zIndex:r},children:t.jsx(v,{card:u,index:r,isPlayable:u.isFaceUp,onClick:()=>h(u,`tableau-${i}`,r),onDragStart:w,source:`tableau-${i}`})},u.id))]},i))})]})]}),t.jsx($,{children:s.isWon&&t.jsx(k.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/80 backdrop-blur-md flex items-center justify-center z-50",children:t.jsxs(k.div,{initial:{scale:.8,y:50},animate:{scale:1,y:0},className:"bg-[#1e293b] border border-white/10 rounded-3xl p-10 text-center shadow-2xl max-w-lg w-full mx-4",children:[t.jsx(V,{className:"w-20 h-20 text-yellow-400 mx-auto mb-6 drop-shadow-[0_0_15px_rgba(250,204,21,0.5)]"}),t.jsx("h2",{className:"text-4xl font-black text-white mb-2 tracking-tight",children:"You Won!"}),t.jsx("p",{className:"text-gray-400 mb-8",children:"Congratulations! You've cleared the board."}),t.jsxs("div",{className:"text-2xl font-bold text-white mb-8",children:["Score: ",s.score]}),t.jsx("button",{onClick:x,className:"w-full py-4 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-500 hover:to-indigo-500 text-white rounded-xl font-bold text-lg transition-all shadow-lg",children:"Play Again"})]})})})]})]})};export{_ as default};
