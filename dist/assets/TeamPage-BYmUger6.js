import{r as d,u as $,a1 as D,j as e,O as M,I as R,ag as f,$ as E,P as I,F as y,al as q,aA as O,Z as B,Y as Z,E as j,e as v,A as G,aw as H}from"./index-BpRJKc9c.js";import{L as N}from"./layout-grid-CkYDyMKL.js";import{S as Q}from"./star-D9OJk-4y.js";const J=()=>{const[l,w]=d.useState([]),[g,k]=d.useState([]),[_,z]=d.useState([]),[T,h]=d.useState(!0),[c,p]=d.useState("all"),{showToast:S}=$(),m=D();d.useEffect(()=>{A()},[]);const A=async()=>{try{h(!0);const[s,t,r]=await Promise.all([fetch(`${m}/teams`),fetch(`${m}/tasks`),fetch(`${m}/users`)]),i=await s.json(),n=await t.json(),x=await r.json();w(i),k(n),z(x)}catch(s){console.error("Failed to fetch team data:",s),S("Failed to load teams","error")}finally{h(!1)}},u=s=>g.filter(t=>t.assignees.some(r=>r.id===s)),C=s=>_.find(t=>t.id===s);new Set(l.flatMap(s=>s.members)).size;const F=g.filter(s=>s.status!=="Complete").length,P=l.length>0?l.reduce((s,t)=>{const r=u(t.id),i=r.filter(n=>n.status==="Complete").length;return s+(r.length>0?i/r.length*100:0)},0)/l.length:0;return T?e.jsx("div",{className:"flex items-center justify-center h-full bg-[#F2F2F7]",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"flex h-full bg-[#F2F2F7] text-gray-900 overflow-hidden font-sans",children:[e.jsxs("div",{className:"w-[260px] bg-[#F2F2F7]/80 backdrop-blur-xl border-r border-gray-200/50 flex flex-col flex-shrink-0",children:[e.jsx("div",{className:"p-4 pb-2",children:e.jsxs("div",{className:"relative group",children:[e.jsx(M,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 group-focus-within:text-blue-600 transition-colors",size:16}),e.jsx("input",{type:"text",placeholder:"Search",className:"w-full pl-9 pr-4 py-2 bg-gray-200/50 border-none focus:bg-white focus:ring-2 focus:ring-blue-500/20 rounded-xl text-sm transition-all placeholder-gray-500"})]})}),e.jsxs("div",{className:"flex-1 overflow-y-auto px-4 space-y-6 custom-scrollbar mt-2",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs("button",{onClick:()=>p("all"),className:`w-full flex items-center justify-between px-3 py-2 rounded-lg text-[15px] font-medium transition-colors ${c==="all"?"bg-gray-200/60 text-gray-900":"text-gray-600 hover:bg-gray-100/50"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(N,{size:18,className:c==="all"?"text-blue-600":"text-gray-400"}),e.jsx("span",{children:"All Teams"})]}),e.jsx("span",{className:"text-xs bg-gray-200/50 text-gray-500 px-2 py-0.5 rounded-full",children:l.length})]}),e.jsxs("button",{onClick:()=>p("my"),className:`w-full flex items-center justify-between px-3 py-2 rounded-lg text-[15px] font-medium transition-colors ${c==="my"?"bg-gray-200/60 text-gray-900":"text-gray-600 hover:bg-gray-100/50"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Q,{size:18,className:c==="my"?"text-yellow-500 fill-yellow-500":"text-gray-400"}),e.jsx("span",{children:"My Teams"})]}),e.jsx("span",{className:"text-xs bg-gray-200/50 text-gray-500 px-2 py-0.5 rounded-full",children:"2"})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"px-3 text-xs font-bold text-gray-400 uppercase tracking-wider mb-2",children:"Departments"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"px-3 py-1 text-xs font-semibold text-gray-500 flex items-center gap-2 mb-1",children:[e.jsx(R,{size:14}),"Supply Chain"]}),e.jsx("div",{className:"space-y-0.5",children:["Procurement","Warehouse","Shipping","Planning"].map(s=>e.jsx("button",{className:"w-full flex items-center px-3 py-1.5 rounded-lg text-[14px] font-medium text-gray-600 hover:bg-gray-100/50 hover:text-gray-900 transition-colors",children:s},s))})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"px-3 py-1 text-xs font-semibold text-gray-500 flex items-center gap-2 mb-1",children:[e.jsx(f,{size:14}),"Operations"]}),e.jsx("div",{className:"space-y-0.5",children:["Maintenance","Production","Quality"].map(s=>e.jsx("button",{className:"w-full flex items-center px-3 py-1.5 rounded-lg text-[14px] font-medium text-gray-600 hover:bg-gray-100/50 hover:text-gray-900 transition-colors",children:s},s))})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"px-3 py-1 text-xs font-semibold text-gray-500 flex items-center gap-2 mb-1",children:[e.jsx(E,{size:14}),"Business"]}),e.jsx("div",{className:"space-y-0.5",children:["Sales","Finance","Marketing"].map(s=>e.jsx("button",{className:"w-full flex items-center px-3 py-1.5 rounded-lg text-[14px] font-medium text-gray-600 hover:bg-gray-100/50 hover:text-gray-900 transition-colors",children:s},s))})]})]})]})]}),e.jsx("div",{className:"p-4 border-t border-gray-200/50",children:e.jsxs("button",{className:"w-full bg-gray-900 hover:bg-gray-800 text-white px-3 py-2.5 rounded-xl text-sm font-medium transition-all shadow-sm flex items-center justify-center gap-2",children:[e.jsx(I,{size:18}),e.jsx("span",{children:"Create Team"})]})})]}),e.jsxs("div",{className:"flex-1 flex flex-col min-w-0 bg-white relative z-10 shadow-2xl rounded-l-3xl overflow-hidden ml-[-1px]",children:[e.jsxs("div",{className:"h-16 border-b border-gray-100 flex items-center justify-between px-8 flex-shrink-0 bg-white/80 backdrop-blur-xl sticky top-0 z-20",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 tracking-tight",children:"Teams"}),e.jsx("div",{className:"h-6 w-px bg-gray-200"}),e.jsxs("div",{className:"flex items-center space-x-1 text-sm text-gray-500",children:[e.jsx("span",{className:"font-medium text-gray-900",children:l.length}),e.jsx("span",{children:"active squads"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center bg-gray-100/50 rounded-lg p-1",children:[e.jsx("button",{className:"p-1.5 text-gray-600 bg-white shadow-sm rounded-md transition-all",children:e.jsx(N,{size:18})}),e.jsx("button",{className:"p-1.5 text-gray-400 hover:text-gray-600 rounded-md transition-all",children:e.jsx(y,{size:18})})]}),e.jsx("button",{className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(q,{size:20})}),e.jsx("button",{className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(f,{size:20})})]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-8 custom-scrollbar",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-10",children:[e.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-gray-100 shadow-[0_2px_20px_-5px_rgba(0,0,0,0.05)] hover:shadow-[0_8px_30px_-5px_rgba(0,0,0,0.05)] transition-shadow",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"p-3 bg-green-50 rounded-xl",children:e.jsx(O,{className:"text-green-600",size:24})}),e.jsx("span",{className:"flex items-center text-green-600 text-xs font-bold bg-green-50 px-2 py-1 rounded-full",children:"+12% vs last month"})]}),e.jsxs("h3",{className:"text-3xl font-bold text-gray-900 mb-1",children:[Math.round(P),"%"]}),e.jsx("p",{className:"text-gray-500 text-sm font-medium",children:"Average Task Completion"})]}),e.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-gray-100 shadow-[0_2px_20px_-5px_rgba(0,0,0,0.05)] hover:shadow-[0_8px_30px_-5px_rgba(0,0,0,0.05)] transition-shadow",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"p-3 bg-blue-50 rounded-xl",children:e.jsx(B,{className:"text-blue-600",size:24})}),e.jsx("span",{className:"flex items-center text-blue-600 text-xs font-bold bg-blue-50 px-2 py-1 rounded-full",children:"High Velocity"})]}),e.jsx("h3",{className:"text-3xl font-bold text-gray-900 mb-1",children:F}),e.jsx("p",{className:"text-gray-500 text-sm font-medium",children:"Active Tasks Across Teams"})]}),e.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-gray-100 shadow-[0_2px_20px_-5px_rgba(0,0,0,0.05)] hover:shadow-[0_8px_30px_-5px_rgba(0,0,0,0.05)] transition-shadow",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"p-3 bg-purple-50 rounded-xl",children:e.jsx(Z,{className:"text-purple-600",size:24})}),e.jsx("span",{className:"flex items-center text-purple-600 text-xs font-bold bg-purple-50 px-2 py-1 rounded-full",children:"All Systems Operational"})]}),e.jsx("h3",{className:"text-3xl font-bold text-gray-900 mb-1",children:l.length}),e.jsx("p",{className:"text-gray-500 text-sm font-medium",children:"Active Squads Deployed"})]})]}),e.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl shadow-sm overflow-hidden",children:[e.jsxs("div",{className:"px-8 py-6 border-b border-gray-100 flex items-center justify-between bg-gray-50/30",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Featured Squads"}),e.jsx("p",{className:"text-sm text-gray-500 mt-0.5",children:"Performance and status overview"})]}),e.jsx("button",{className:"text-gray-400 hover:text-gray-600 p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(j,{size:20})})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-100 bg-gray-50/50",children:[e.jsx("th",{className:"text-left py-5 px-8 text-xs font-bold text-gray-400 uppercase tracking-wider w-[30%]",children:"Lead"}),e.jsx("th",{className:"text-left py-5 px-8 text-xs font-bold text-gray-400 uppercase tracking-wider w-[40%]",children:"Campaign"}),e.jsx("th",{className:"text-right py-5 px-8 text-xs font-bold text-gray-400 uppercase tracking-wider w-[30%]",children:"Status"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-50",children:l.map(s=>{var b;const t=u(s.id),r=t.filter(L=>L.status==="Complete").length,i=t.length>0?r/t.length*100:0;let n="Pending",x="bg-amber-50 text-amber-600 border-amber-100",o=e.jsx(G,{size:12,className:"mr-1.5"});i>=80?(n="Success",x="bg-emerald-50 text-emerald-600 border-emerald-100",o=e.jsx(v,{size:12,className:"mr-1.5"})):i===0&&t.length===0?(n="Inactive",x="bg-gray-50 text-gray-500 border-gray-100",o=e.jsx(j,{size:12,className:"mr-1.5"})):i<30&&(n="At Risk",x="bg-rose-50 text-rose-600 border-rose-100",o=e.jsx(H,{size:12,className:"mr-1.5"}));const U=s.members[0],a=C(U);return e.jsxs("tr",{className:"group hover:bg-gray-50/80 transition-colors cursor-pointer",children:[e.jsx("td",{className:"py-5 px-8",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden bg-gray-100 border-2 border-white shadow-sm group-hover:border-blue-100 transition-colors",children:a!=null&&a.avatarUrl?e.jsx("img",{src:a.avatarUrl,alt:a.name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-sm font-bold text-gray-400 bg-gray-50",children:((b=a==null?void 0:a.name)==null?void 0:b.charAt(0))||"?"})}),e.jsx("div",{className:"absolute bottom-0 right-0 w-3.5 h-3.5 bg-green-500 border-2 border-white rounded-full"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-gray-900 text-sm mb-0.5",children:(a==null?void 0:a.name)||"Unknown Lead"}),e.jsx("div",{className:"text-xs text-gray-500 font-medium",children:"Team Lead"})]})]})}),e.jsx("td",{className:"py-5 px-8",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center text-white shadow-md shrink-0 transition-transform group-hover:scale-105",style:{backgroundColor:s.color},children:e.jsx("span",{className:"font-bold text-lg",children:s.name.charAt(0)})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-gray-900 text-sm mb-0.5",children:s.name}),e.jsxs("div",{className:"text-xs text-gray-500 font-medium flex items-center",children:[e.jsx(y,{size:12,className:"mr-1"}),s.members.length," Members",e.jsx("span",{className:"mx-1.5 text-gray-300",children:"â€¢"}),e.jsx(v,{size:12,className:"mr-1"}),t.length," Tasks"]})]})]})}),e.jsx("td",{className:"py-5 px-8 text-right",children:e.jsxs("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-bold border ${x}`,children:[o,n]})})]},s.id)})})]})})]})]})]})]})};export{J as TeamPage};
