import{r as u,j as e,X as g,H as p,$ as y}from"./index-BFP11Qd5.js";import{U as m}from"./constants-DIz9rW5w.js";const v=({isOpen:t,onClose:a,onCreate:r})=>{const[n,i]=u.useState(""),[l,c]=u.useState([]);if(!t)return null;const h=s=>{s.preventDefault(),n.trim()&&(r(n,l),i(""),c([]),a())},x=s=>{c(d=>d.includes(s)?d.filter(b=>b!==s):[...d,s])},f=Object.values(m).filter(s=>s.id!=="me");return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md overflow-hidden animate-in fade-in zoom-in duration-200",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-100",children:[e.jsx("h3",{className:"font-semibold text-gray-800",children:"Start New Discussion"}),e.jsx("button",{onClick:a,className:"p-1 hover:bg-gray-100 rounded-full transition-colors",children:e.jsx(g,{size:20,className:"text-gray-500"})})]}),e.jsxs("form",{onSubmit:h,className:"p-4 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Discussion Name"}),e.jsxs("div",{className:"relative",children:[e.jsx(p,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",value:n,onChange:s=>i(s.target.value),placeholder:"e.g. Project Alpha",className:"w-full pl-9 pr-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all",autoFocus:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Add Participants"}),e.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto border border-gray-100 rounded-lg p-2",children:f.map(s=>e.jsxs("div",{onClick:()=>x(s.id),className:`flex items-center p-2 rounded-md cursor-pointer transition-colors ${l.includes(s.id)?"bg-blue-50 border-blue-100":"hover:bg-gray-50"}`,children:[e.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-white text-xs font-bold mr-3",style:{backgroundColor:s.color},children:s.avatar}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:s.name}),e.jsx("p",{className:"text-xs text-gray-500",children:s.email})]}),l.includes(s.id)&&e.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-500"})]},s.id))})]}),e.jsxs("div",{className:"flex justify-end pt-2",children:[e.jsx("button",{type:"button",onClick:a,className:"px-4 py-2 text-sm font-medium text-gray-600 hover:text-gray-800 mr-2",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:!n.trim(),className:"px-4 py-2 bg-[#1e2126] hover:bg-[#2c3036] text-white text-sm font-medium rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Create Discussion"})]})]})]})})},o=y(),N={getChannels:async()=>{try{const t=await fetch(`${o}/channels`);if(!t.ok)throw new Error("Failed to fetch channels");return t.json()}catch(t){return console.error("Error fetching channels:",t),[]}},createChannel:async(t,a)=>{const r={id:Date.now().toString(),name:t,type:"public",participants:a};return(await fetch(`${o}/channels`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)})).json()},deleteChannel:async t=>{await fetch(`${o}/channels/${t}`,{method:"DELETE"})},getMessages:async t=>{try{const a=await fetch(`${o}/discussion_messages?channelId=${t}`,{cache:"no-store"});if(!a.ok)throw new Error("Failed to fetch messages");const r=await a.json(),n=["1763818389922","1763880943783","1763880944894"];return r.filter(i=>!n.includes(i.id))}catch(a){return console.error("Error fetching messages:",a),[]}},sendMessage:async(t,a,r="me")=>{const n=Object.values(m).find(c=>c.id===r)||m.me,i={id:Date.now().toString(),sender:n.name,senderId:n.id,content:a,timestamp:new Date().toISOString(),avatar:n.avatar,channelId:t};return(await fetch(`${o}/discussion_messages`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)})).json()}};export{v as C,N as d};
