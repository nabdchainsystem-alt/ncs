import{r as x,u as F,a1 as M,j as e,O as R,I as E,ag as y,$ as I,P as q,F as f,al as O,aA as B,Z,Y as G,E as j,e as v,A as H,aw as Q}from"./index-D-msRKty.js";import{L as N}from"./layout-grid-C__91eXq.js";import{S as V}from"./star-CYQU_OLA.js";const J=()=>{const[l,w]=x.useState([]),[h,k]=x.useState([]),[z,T]=x.useState([]),[S,g]=x.useState(!0),[c,b]=x.useState("all"),{showToast:A}=F(),m=M();x.useEffect(()=>{C()},[]);const C=async()=>{try{g(!0);const[s,t,r]=await Promise.all([fetch(`${m}/teams`),fetch(`${m}/tasks`),fetch(`${m}/users`)]),n=await s.json(),i=await t.json(),d=await r.json();w(n),k(i),T(d)}catch(s){console.error("Failed to fetch team data:",s),A("Failed to load teams","error")}finally{g(!1)}},p=s=>h.filter(t=>t.assignees.some(r=>r.id===s)),P=s=>z.find(t=>t.id===s);new Set(l.flatMap(s=>s.members)).size;const U=h.filter(s=>s.status!=="Complete").length,$=l.length>0?l.reduce((s,t)=>{const r=p(t.id),n=r.filter(i=>i.status==="Complete").length;return s+(r.length>0?n/r.length*100:0)},0)/l.length:0;return S?e.jsx("div",{className:"flex items-center justify-center h-full bg-white",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-black"})}):e.jsxs("div",{className:"flex h-full bg-white text-gray-900 overflow-hidden font-sans",children:[e.jsxs("div",{className:"w-[260px] bg-gray-50 border-r border-gray-200 flex flex-col flex-shrink-0",children:[e.jsx("div",{className:"p-4 pb-2",children:e.jsxs("div",{className:"relative group",children:[e.jsx(R,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 group-focus-within:text-black transition-colors",size:16}),e.jsx("input",{type:"text",placeholder:"Search",className:"w-full pl-9 pr-4 py-2 bg-white border border-gray-200 focus:border-black focus:ring-0 rounded-xl text-sm transition-all placeholder-gray-500"})]})}),e.jsxs("div",{className:"flex-1 overflow-y-auto px-4 space-y-6 custom-scrollbar mt-2",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs("button",{onClick:()=>b("all"),className:`w-full flex items-center justify-between px-3 py-2 rounded-lg text-[15px] font-medium transition-colors ${c==="all"?"bg-black text-white":"text-gray-600 hover:bg-gray-200"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(N,{size:18,className:c==="all"?"text-white":"text-gray-400"}),e.jsx("span",{children:"All Teams"})]}),e.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${c==="all"?"bg-white/20 text-white":"bg-gray-200 text-gray-500"}`,children:l.length})]}),e.jsxs("button",{onClick:()=>b("my"),className:`w-full flex items-center justify-between px-3 py-2 rounded-lg text-[15px] font-medium transition-colors ${c==="my"?"bg-black text-white":"text-gray-600 hover:bg-gray-200"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(V,{size:18,className:c==="my"?"text-white":"text-gray-400"}),e.jsx("span",{children:"My Teams"})]}),e.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${c==="my"?"bg-white/20 text-white":"bg-gray-200 text-gray-500"}`,children:"2"})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"px-3 text-xs font-bold text-gray-400 uppercase tracking-wider mb-2",children:"Departments"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"px-3 py-1 text-xs font-semibold text-gray-500 flex items-center gap-2 mb-1",children:[e.jsx(E,{size:14}),"Supply Chain"]}),e.jsx("div",{className:"space-y-0.5",children:["Procurement","Warehouse","Shipping","Planning"].map(s=>e.jsx("button",{className:"w-full flex items-center px-3 py-1.5 rounded-lg text-[14px] font-medium text-gray-600 hover:bg-gray-200 hover:text-gray-900 transition-colors",children:s},s))})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"px-3 py-1 text-xs font-semibold text-gray-500 flex items-center gap-2 mb-1",children:[e.jsx(y,{size:14}),"Operations"]}),e.jsx("div",{className:"space-y-0.5",children:["Maintenance","Production","Quality"].map(s=>e.jsx("button",{className:"w-full flex items-center px-3 py-1.5 rounded-lg text-[14px] font-medium text-gray-600 hover:bg-gray-200 hover:text-gray-900 transition-colors",children:s},s))})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"px-3 py-1 text-xs font-semibold text-gray-500 flex items-center gap-2 mb-1",children:[e.jsx(I,{size:14}),"Business"]}),e.jsx("div",{className:"space-y-0.5",children:["Sales","Finance","Marketing"].map(s=>e.jsx("button",{className:"w-full flex items-center px-3 py-1.5 rounded-lg text-[14px] font-medium text-gray-600 hover:bg-gray-200 hover:text-gray-900 transition-colors",children:s},s))})]})]})]})]}),e.jsx("div",{className:"p-4 border-t border-gray-200",children:e.jsxs("button",{className:"w-full bg-black hover:bg-gray-800 text-white px-3 py-2.5 rounded-xl text-sm font-medium transition-all shadow-sm flex items-center justify-center gap-2",children:[e.jsx(q,{size:18}),e.jsx("span",{children:"Create Team"})]})})]}),e.jsxs("div",{className:"flex-1 flex flex-col min-w-0 bg-white relative z-10 shadow-2xl rounded-l-3xl overflow-hidden ml-[-1px] border-l border-gray-200",children:[e.jsxs("div",{className:"h-16 border-b border-gray-100 flex items-center justify-between px-8 flex-shrink-0 bg-white sticky top-0 z-20",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 tracking-tight",children:"Teams"}),e.jsx("div",{className:"h-6 w-px bg-gray-200"}),e.jsxs("div",{className:"flex items-center space-x-1 text-sm text-gray-500",children:[e.jsx("span",{className:"font-medium text-gray-900",children:l.length}),e.jsx("span",{children:"active squads"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center bg-gray-100 rounded-lg p-1",children:[e.jsx("button",{className:"p-1.5 text-black bg-white shadow-sm rounded-md transition-all",children:e.jsx(N,{size:18})}),e.jsx("button",{className:"p-1.5 text-gray-400 hover:text-gray-600 rounded-md transition-all",children:e.jsx(f,{size:18})})]}),e.jsx("button",{className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(O,{size:20})}),e.jsx("button",{className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(y,{size:20})})]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-8 custom-scrollbar",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-10",children:[e.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-gray-200 shadow-sm hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"p-3 bg-gray-100 rounded-xl",children:e.jsx(B,{className:"text-black",size:24})}),e.jsx("span",{className:"flex items-center text-black text-xs font-bold bg-gray-100 px-2 py-1 rounded-full",children:"+12% vs last month"})]}),e.jsxs("h3",{className:"text-3xl font-bold text-gray-900 mb-1",children:[Math.round($),"%"]}),e.jsx("p",{className:"text-gray-500 text-sm font-medium",children:"Average Task Completion"})]}),e.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-gray-200 shadow-sm hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"p-3 bg-gray-100 rounded-xl",children:e.jsx(Z,{className:"text-black",size:24})}),e.jsx("span",{className:"flex items-center text-black text-xs font-bold bg-gray-100 px-2 py-1 rounded-full",children:"High Velocity"})]}),e.jsx("h3",{className:"text-3xl font-bold text-gray-900 mb-1",children:U}),e.jsx("p",{className:"text-gray-500 text-sm font-medium",children:"Active Tasks Across Teams"})]}),e.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-gray-200 shadow-sm hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"p-3 bg-gray-100 rounded-xl",children:e.jsx(G,{className:"text-black",size:24})}),e.jsx("span",{className:"flex items-center text-black text-xs font-bold bg-gray-100 px-2 py-1 rounded-full",children:"All Systems Operational"})]}),e.jsx("h3",{className:"text-3xl font-bold text-gray-900 mb-1",children:l.length}),e.jsx("p",{className:"text-gray-500 text-sm font-medium",children:"Active Squads Deployed"})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-2xl shadow-sm overflow-hidden",children:[e.jsxs("div",{className:"px-8 py-6 border-b border-gray-200 flex items-center justify-between bg-gray-50",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Featured Squads"}),e.jsx("p",{className:"text-sm text-gray-500 mt-0.5",children:"Performance and status overview"})]}),e.jsx("button",{className:"text-gray-400 hover:text-gray-600 p-2 hover:bg-gray-200 rounded-lg transition-colors",children:e.jsx(j,{size:20})})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200 bg-gray-50",children:[e.jsx("th",{className:"text-left py-5 px-8 text-xs font-bold text-gray-400 uppercase tracking-wider w-[30%]",children:"Lead"}),e.jsx("th",{className:"text-left py-5 px-8 text-xs font-bold text-gray-400 uppercase tracking-wider w-[40%]",children:"Campaign"}),e.jsx("th",{className:"text-right py-5 px-8 text-xs font-bold text-gray-400 uppercase tracking-wider w-[30%]",children:"Status"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:l.map(s=>{var u;const t=p(s.id),r=t.filter(D=>D.status==="Complete").length,n=t.length>0?r/t.length*100:0;let i="Pending",d="bg-gray-100 text-gray-600 border-gray-200",o=e.jsx(H,{size:12,className:"mr-1.5"});n>=80?(i="Success",d="bg-black text-white border-black",o=e.jsx(v,{size:12,className:"mr-1.5"})):n===0&&t.length===0?(i="Inactive",d="bg-white text-gray-400 border-gray-200 border",o=e.jsx(j,{size:12,className:"mr-1.5"})):n<30&&(i="At Risk",d="bg-white text-black border-black border",o=e.jsx(Q,{size:12,className:"mr-1.5"}));const L=s.members[0],a=P(L);return e.jsxs("tr",{className:"group hover:bg-gray-50 transition-colors cursor-pointer",children:[e.jsx("td",{className:"py-5 px-8",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden bg-gray-100 border-2 border-white shadow-sm group-hover:border-gray-300 transition-colors",children:a!=null&&a.avatarUrl?e.jsx("img",{src:a.avatarUrl,alt:a.name,className:"w-full h-full object-cover grayscale"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-sm font-bold text-gray-400 bg-gray-100",children:((u=a==null?void 0:a.name)==null?void 0:u.charAt(0))||"?"})}),e.jsx("div",{className:"absolute bottom-0 right-0 w-3.5 h-3.5 bg-black border-2 border-white rounded-full"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-gray-900 text-sm mb-0.5",children:(a==null?void 0:a.name)||"Unknown Lead"}),e.jsx("div",{className:"text-xs text-gray-500 font-medium",children:"Team Lead"})]})]})}),e.jsx("td",{className:"py-5 px-8",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center text-white shadow-md shrink-0 transition-transform group-hover:scale-105 bg-black",children:e.jsx("span",{className:"font-bold text-lg",children:s.name.charAt(0)})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-gray-900 text-sm mb-0.5",children:s.name}),e.jsxs("div",{className:"text-xs text-gray-500 font-medium flex items-center",children:[e.jsx(f,{size:12,className:"mr-1"}),s.members.length," Members",e.jsx("span",{className:"mx-1.5 text-gray-300",children:"â€¢"}),e.jsx(v,{size:12,className:"mr-1"}),t.length," Tasks"]})]})]})}),e.jsx("td",{className:"py-5 px-8 text-right",children:e.jsxs("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-bold border ${d}`,children:[o,i]})})]},s.id)})})]})})]})]})]})]})};export{J as TeamPage};
