import{c as z,u as O,r as T,f as E,g as F,j as e,P as g,q as _,p as y,o as p,i as P,E as j,C as R}from"./index-sqQsKImc.js";import{u as $,a as I,D as M,b as B,d as V,P as q,e as A,f as L}from"./core.esm-TRimKU_7.js";import{S as U}from"./square-kanban-DGFt-Phx.js";import{F as v}from"./flag-DM0neTDo.js";/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=[["path",{d:"m14 10 7-7",key:"oa77jy"}],["path",{d:"M20 10h-6V4",key:"mjg0md"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M4 14h6v6",key:"rmj7iw"}]],b=z("minimize-2",K),Y=({task:s,onClick:o})=>{const{attributes:n,listeners:d,setNodeRef:t,isDragging:x}=L({id:s.id,data:{task:s}});return x?e.jsx("div",{ref:t,className:"bg-gray-50 p-3 rounded-lg border-2 border-dashed border-gray-200 h-24 opacity-50"}):e.jsxs("div",{ref:t,...d,...n,className:"bg-white p-3 rounded-lg border border-gray-200 shadow-sm hover:shadow-md hover:border-gray-300 transition-all cursor-grab active:cursor-grabbing group relative select-none touch-none",onClick:o,children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{className:"text-xs font-medium text-gray-400 hover:underline",children:["#",s.id.substring(5)]}),e.jsx("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity p-1 hover:bg-gray-100 rounded",children:e.jsx(j,{size:14,className:"text-gray-400"})})]}),e.jsx("h3",{className:"text-sm text-gray-800 font-medium mb-3 leading-snug group-hover:text-clickup-purple transition-colors",children:s.title}),e.jsxs("div",{className:"flex items-center justify-between mt-auto",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[s.priority!==y.None&&e.jsx("div",{className:"p-0.5 rounded hover:bg-gray-100 transition-colors",title:`Priority: ${s.priority}`,children:e.jsx(v,{size:12,fill:p[s.priority],color:p[s.priority]})}),s.dueDate&&e.jsxs("div",{className:`flex items-center text-[10px] px-1.5 py-0.5 bg-gray-50 rounded border border-gray-100 ${new Date(s.dueDate)<new Date?"text-red-500 border-red-100 bg-red-50":"text-gray-400"}`,children:[e.jsx(R,{size:10,className:"mr-1"}),new Date(s.dueDate).toLocaleDateString(void 0,{month:"short",day:"numeric"})]})]}),e.jsx("div",{className:"flex -space-x-1",children:s.assignees.map(r=>e.jsx("div",{className:"w-5 h-5 rounded-full border border-white flex items-center justify-center text-[9px] text-white font-bold shadow-sm",style:{backgroundColor:r.color},title:r.name,children:r.avatar},r.id))})]})]})},G=({status:s,tasks:o,isLoading:n,onAddTask:d,showToast:t})=>{const{setNodeRef:x,isOver:r}=A({id:s});return e.jsxs("div",{ref:x,className:`flex-shrink-0 w-72 flex flex-col h-full animate-in fade-in duration-500 rounded-xl transition-colors ${r?"bg-indigo-50/50 ring-2 ring-indigo-100":""}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-3 px-1 group",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-[10px] uppercase font-bold px-1.5 py-0.5 rounded text-white shadow-sm cursor-pointer hover:opacity-90",style:{backgroundColor:P[s]},onClick:()=>t(`Status: ${s}`,"info"),children:s}),e.jsx("span",{className:"text-xs text-gray-500 font-medium",children:n?"...":o.length})]}),e.jsxs("div",{className:"flex space-x-1 text-gray-400 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx(g,{size:14,className:"cursor-pointer hover:text-gray-600",onClick:d}),e.jsx(j,{size:14,className:"cursor-pointer hover:text-gray-600",onClick:()=>t("Column Settings","info")})]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto pr-2 space-y-2.5 pb-10 custom-scrollbar",children:[e.jsxs("button",{className:"w-full py-2 mb-2 rounded-md border border-transparent hover:bg-gray-200/50 hover:border-gray-300 text-gray-400 text-sm flex items-center justify-center transition-all group",onClick:d,children:[e.jsx(g,{size:14,className:"mr-1 group-hover:text-clickup-purple transition-colors"}),e.jsx("span",{className:"group-hover:text-clickup-purple transition-colors",children:"New Task"})]}),n?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-white p-3 rounded-lg border border-gray-200 shadow-sm h-28 animate-pulse"}),e.jsx("div",{className:"bg-white p-3 rounded-lg border border-gray-200 shadow-sm h-28 animate-pulse"})]}):e.jsx(e.Fragment,{children:o.map(c=>e.jsx(Y,{task:c,onClick:()=>t(`Opening ${c.title}`,"info")},c.id))})]})]})},H=({tasks:s,isLoading:o,onAddTask:n,onStatusChange:d,activePage:t})=>{const{showToast:x}=O(),[r,c]=T.useState(null),{setFloatingTaskState:m}=E(),N=$(I(q,{activationConstraint:{distance:5}})),w=Object.values(F).reduce((i,a)=>(i[a]=s.filter(l=>l.status===a),i),{}),S=i=>{const{active:a}=i,l=s.find(u=>u.id===a.id);l&&c(l)},D=i=>{const{active:a,over:l}=i;if(c(null),!l)return;const u=a.id,h=l.id,f=s.find(C=>C.id===u);f&&f.status!==h&&d(u,h)},k={sideEffects:V({styles:{active:{opacity:"0.5"}}})};return!o&&s.length===0?e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center bg-clickup-light p-8 animate-in fade-in duration-500",children:[e.jsx("div",{className:"w-20 h-20 bg-white rounded-full flex items-center justify-center mb-6 border border-dashed border-gray-300 shadow-sm",children:e.jsx(U,{size:40,className:"text-gray-300"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:"Board is empty"}),e.jsx("p",{className:"text-gray-500 max-w-sm mb-8 text-center",children:"Visualise your workflow here. Start by creating a new task."}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:n,className:"px-6 py-2 bg-clickup-purple text-white rounded-lg font-medium hover:bg-indigo-600 transition-colors shadow-lg shadow-purple-200 flex items-center",children:[e.jsx(g,{size:18,className:"mr-2"}),"Create Task"]}),t&&m&&e.jsxs("button",{onClick:()=>m({isOpen:!0,isExpanded:!1,config:{activePage:t}}),className:"px-4 py-2 bg-white text-gray-600 border border-gray-200 rounded-lg font-medium hover:bg-gray-50 transition-colors shadow-sm flex items-center",children:[e.jsx(b,{size:18,className:"mr-2"}),"Float Board"]})]})]}):e.jsxs(M,{sensors:N,onDragStart:S,onDragEnd:D,children:[e.jsxs("div",{className:"flex-1 overflow-x-auto overflow-y-hidden bg-clickup-light p-6 custom-scrollbar h-full flex flex-col",children:[t&&m&&e.jsx("div",{className:"flex justify-end mb-4 flex-shrink-0",children:e.jsxs("button",{onClick:()=>m({isOpen:!0,isExpanded:!1,config:{activePage:t}}),className:"text-gray-400 hover:text-clickup-purple transition-colors p-2 hover:bg-gray-100 rounded-md flex items-center gap-2 text-sm font-medium",title:"Float this board",children:[e.jsx(b,{size:16}),"Float"]})}),e.jsxs("div",{className:"flex h-full space-x-4 flex-1",children:[Object.entries(w).map(([i,a])=>e.jsx(G,{status:i,tasks:a,isLoading:o,onAddTask:n,showToast:x},i)),e.jsx("div",{className:"w-8 flex-shrink-0"})]})]}),_.createPortal(e.jsx(B,{dropAnimation:k,children:r?e.jsxs("div",{className:"bg-white p-3 rounded-lg border border-gray-200 shadow-xl w-72 cursor-grabbing rotate-2 opacity-90",children:[e.jsx("div",{className:"flex justify-between items-start mb-2",children:e.jsxs("div",{className:"text-xs font-medium text-gray-400",children:["#",r.id.substring(5)]})}),e.jsx("h3",{className:"text-sm text-gray-800 font-medium mb-3 leading-snug",children:r.title}),e.jsx("div",{className:"flex items-center justify-between mt-auto",children:e.jsx("div",{className:"flex items-center space-x-2",children:r.priority!==y.None&&e.jsx("div",{className:"p-0.5 rounded",title:`Priority: ${r.priority}`,children:e.jsx(v,{size:12,fill:p[r.priority],color:p[r.priority]})})})})]}):null}),document.body)]})},Z=Object.freeze(Object.defineProperty({__proto__:null,default:H},Symbol.toStringTag,{value:"Module"}));export{b as M,H as T,Z as a};
